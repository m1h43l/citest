system -i "CHGATR OBJ('stompframe.rpgmod') ATR(*CCSID) VALUE(850)"
CPFB414: Attributes changed for 1 objects.  0 objects not changed.
system -iK "CRTRPGMOD STOMP/stompframe SRCSTMF('stompframe.rpgmod') OPTION(*NOUNREF) OPTIMIZE(*FULL) DBGVIEW(*LIST) INCDIR('../include/' '/home/mihael/include') TGTRLS(*CURRENT) STGMDL(*INHERIT) TGTCCSID(273)"                    
CPD000D: Command QSYS/CRTRPGMOD not safe for a multithreaded job.
RNS9305: Module STOMPFRAME placed in library STOMP. 00 highest severity. Created on 06/05/21 at 16:13:14.
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page      1
  Command  . . . . . . . . . . . . :   CRTRPGMOD
    Issued by  . . . . . . . . . . :     MIHAEL
  Module . . . . . . . . . . . . . :   STOMPFRAME
    Library  . . . . . . . . . . . :     STOMP
  Text 'description' . . . . . . . :   *SRCMBRTXT
  Source stream file   . . . . . . :   stompframe.rpgmod
    CCSID  . . . . . . . . . . . . :     850
  Target CCSID . . . . . . . . . . :   273
  Text 'description' . . . . . . . :
  Last Change  . . . . . . . . . . :   06/05/21  16:13:01
  Generation severity level  . . . :   10
  Compiler options . . . . . . . . :   *XREF      *GEN       *NOSECLVL  *SHOWCPY
                                       *EXPDDS    *EXT       *NOSHOWSKP *NOSRCSTMT
                                       *DEBUGIO   *NOUNREF   *NOEVENTF
  Debugging views  . . . . . . . . :   *LIST
  Debug encryption key . . . . . . :   *NONE
  Output . . . . . . . . . . . . . :   *PRINT
  Optimization level . . . . . . . :   *FULL
  Source listing indentation . . . :   *NONE
  Type conversion options  . . . . :   *NONE
  Sort sequence  . . . . . . . . . :   *HEX
  Language identifier  . . . . . . :   *JOBRUN
  Replace module . . . . . . . . . :   *YES
  Authority  . . . . . . . . . . . :   *LIBCRTAUT
  Truncate numeric . . . . . . . . :   *YES
  Fix numeric  . . . . . . . . . . :   *NONE
  Target release . . . . . . . . . :   *CURRENT
  Allow null values  . . . . . . . :   *NO
  Storage model . . .  . . . . . . :   *INHERIT
  Binding directory  . . . . . . . :   *NONE
  Define condition names . . . . . :   *NONE
  Enable performance collection  . :   *PEP
  Profiling data . . . . . . . . . :   *NOCOL
  Licensed Internal Code options . :
  Generate program interface . . . :   *NO
  Include directory  . . . . . . . :   ../include/
                                   :   /home/mihael/include
  Preprocessor options . . . . . . :   *NONE
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page      2
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
                          S o u r c e   L i s t i n g
     1 **FREE                                                                                                               000001
     2                                                                                                                      000002
     3 //                          The MIT License (MIT)                                                                    000003
     4 //                                                                                                                   000004
     5 // Copyright (c) 2021 Mihael Schmidt                                                                                 000005
     6 //                                                                                                                   000006
     7 // Permission is hereby granted, free of charge, to any person obtaining a copy                                      000007
     8 // of this software and associated documentation files (the "Software"), to deal                                     000008
     9 // in the Software without restriction, including without limitation the rights                                      000009
    10 // to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                         000010
    11 // copies of the Software, and to permit persons to whom the Software is                                             000011
    12 // furnished to do so, subject to the following conditions:                                                          000012
    13 //                                                                                                                   000013
    14 // The above copyright notice and this permission notice shall be included in                                        000014
    15 // all copies or substantial portions of the Software.                                                               000015
    16 //                                                                                                                   000016
    17 // THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                        000017
    18 // IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                          000018
    19 // FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                       000019
    20 // AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                            000020
    21 // LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                     000021
    22 // OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                     000022
    23 // SOFTWARE.                                                                                                         000023
    24                                                                                                                      000024
    25 ctl-opt nomain;                                                                                                      000025
    26                                                                                                                      000026
    27                                                                                                                      000027
    28 dcl-pr stomp_frame_init int(10) extproc(*dclcase) end-pr;                                                            000028
    29                                                                                                                      000029
    30 dcl-pr isValidFrame ind;                                                                                             000030
    31   frame pointer const;                                                                                               000031
    32 end-pr;                                                                                                              000032
    33                                                                                                                      000033
    34 /include 'ilecee.rpginc'                                                                                             000034
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  ilecee.rp+                                                   *                     1
        * External name  . . . . . . :  ../include/ilecee.rpginc                                     *                     1
        * Last change  . . . . . . . :  05/20/21  19:17:09                                           *                     1
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    35+**FREE                                                                                                              1000001
    36+                                                                                                                    1000002
    37+/if defined (ILE_CEE_API)                                                                                           1000003
            LINES EXCLUDED: 1
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page      3
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    38+/endif                                                                                                              1000005
    39+                                                                                                                    1000006
    40+/define ILE_CEE_API                                                                                                 1000007
    41+                                                                                                                    1000008
    42+dcl-pr cee4rage2 extproc('CEE4RAGE2');                                                                              1000009
    43+  exitHandler pointer(*proc) const;                                                                                 1000010
    44+  feedback char(12);                                                                                                1000011
    45+end-pr;                                                                                                             1000012
    46 /include 'libc_h.rpgle'                                                                                              000035
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  libc_h.rp+                                                   *                     2
        * External name  . . . . . . :  ../include/libc_h.rpgle                                      *                     2
        * Last change  . . . . . . . :  08/21/18  18:21:24                                           *                     2
        *--------------------------------------------------------------------------------------------*
    47+ /if not defined(QUSEC)                                                                                             2000001
    48+ /define QUSEC                                                                                                      2000002
    49+ /copy QSYSINC/QRPGLESRC,QUSEC                                                                                      2000003
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  QUSEC                                                        *                     3
        * External name  . . . . . . :  QSYSINC/QRPGLESRC(QUSEC)                                     *                     3
        * Last change  . . . . . . . :  02/17/19  10:02:41                                           *                     3
        * Text 'description' . . . . :  COMMON STRUCTURE FOR ERROR CODE PARAMETER                    *                     3
        *--------------------------------------------------------------------------------------------*
    50+D*** START HEADER FILE SPECIFICATIONS ****************************                                        000000    3000001
    51+D*                                                                                                        000000    3000002
    52+D*Header File Name: H/QUSEC                                                                               000000    3000003
    53+D*                                                                                                        000000    3000004
    54+D*Descriptive Name: Error Code Parameter.                                                                 000000    3000005
    55+D*                                                                                                        000000    3000006
    56+D*5763-SS1, 5722-SS1 (C) Copyright IBM Corp. 1994, 2001.                                                  000000    3000007
    57+D*All rights reserved.                                                                                    000000    3000008
    58+D*US Government Users Restricted Rights -                                                                 000000    3000009
    59+D*Use, duplication or disclosure restricted                                                               000000    3000010
    60+D*by GSA ADP Schedule Contract with IBM Corp.                                                             000000    3000011
    61+D*                                                                                                        000000    3000012
    62+D*Licensed Materials-Property of IBM                                                                      000000    3000013
    63+D*                                                                                                        000000    3000014
    64+D*                                                                                                        000000    3000015
    65+D*Description: Include header file for the error code parameter.                                          000000    3000016
    66+D*                                                                                                        000000    3000017
    67+D*Header Files Included: None.                                                                            000000    3000018
    68+D*                                                                                                        000000    3000019
    69+D*Macros List: None.                                                                                      000000    3000020
    70+D*                                                                                                        000000    3000021
    71+D*Structure List: Qus_EC_t                                                                                000000    3000022
    72+D*             Qus_ERRC0200_t                                                                             000000    3000023
    73+D*                                                                                                        000000    3000024
    74+D*Function Prototype List: None.                                                                          000000    3000025
    75+D*                                                                                                        000000    3000026
    76+D*Change Activity:                                                                                        000000    3000027
    77+D*                                                                                                        000000    3000028
    78+D*CFD List:                                                                                               000000    3000029
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page      4
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    79+D*                                                                                                        000000    3000030
    80+D*FLAG REASON       LEVEL DATE   PGMR      CHANGE DESCRIPTION                                             000000    3000031
    81+D*---- ------------ ----- ------ --------- ----------------------                                         000000    3000032
    82+D*                                                                                                        000000    3000033
    83+D*End CFD List.                                                                                           000000    3000034
    84+D*                                                                                                        000000    3000035
    85+D*Additional notes about the Change Activity                                                              000000    3000036
    86+D*End Change Activity.                                                                                    000000    3000037
    87+D*** END HEADER FILE SPECIFICATIONS ******************************                                        000000    3000038
    88+D*****************************************************************                                        000000    3000039
    89+D*Record structure for Error Code Parameter                                                               000000    3000040
    90+D****                                                          ***                                        000000    3000041
    91+D*NOTE: The following type definition only defines the fixed                                              000000    3000042
    92+D*   portion of the format.  Varying length field Exception                                               000000    3000043
    93+D*   Data will not be defined here.                                                                       000000    3000044
    94+D*****************************************************************                                        000000    3000045
    95+DQUSEC            DS                                                                                      000000    3000046
    96+D*                                             Qus EC                                                     000000    3000047
    97+D QUSBPRV                 1      4I 0                                                                     000000    3000048
    98+D*                                             Bytes Provided                                             000000    3000049
    99+D QUSBAVL                 5      8I 0                                                                     000000    3000050
   100+D*                                             Bytes Available                                            000000    3000051
   101+D QUSEI                   9     15                                                                        000000    3000052
   102+D*                                             Exception Id                                               000000    3000053
   103+D QUSERVED               16     16                                                                        000000    3000054
   104+D*                                             Reserved                                                   000000    3000055
   105+D*QUSED01                17     17                                                                        000000    3000056
   106+D*                                                                                                        000000    3000057
   107+D*                                      Varying length                                                    000000    3000058
   108+DQUSC0200         DS                                                                                      000000    3000059
   109+D*                                             Qus ERRC0200                                               000000    3000060
   110+D QUSK01                  1      4I 0                                                                     000000    3000061
   111+D*                                             Key                                                        000000    3000062
   112+D QUSBPRV00               5      8I 0                                                                     000000    3000063
   113+D*                                             Bytes Provided                                             000000    3000064
   114+D QUSBAVL14               9     12I 0                                                                     000000    3000065
   115+D*                                             Bytes Available                                            000000    3000066
   116+D QUSEI00                13     19                                                                        000000    3000067
   117+D*                                             Exception Id                                               000000    3000068
   118+D QUSERVED39             20     20                                                                        000000    3000069
   119+D*                                             Reserved                                                   000000    3000070
   120+D QUSCCSID11             21     24I 0                                                                     000000    3000071
   121+D*                                             CCSID                                                      000000    3000072
   122+D QUSOED01               25     28I 0                                                                     000000    3000073
   123+D*                                             Offset Exc Data                                            000000    3000074
   124+D QUSLED01               29     32I 0                                                                     000000    3000075
   125+D*                                             Length Exc Data                                            000000    3000076
   126+D*QUSRSV214              33     33                                                                        000000    3000077
   127+D*                                             Reserved2                                                  000000    3000078
   128+D*                                                                                                        000000    3000079
   129+D*QUSED02                34     34                                                                        000000    3000080
   130+D*                                                                                                        000000    3000081
   131+D*                                      Varying Length    @B1A                                            000000    3000082
   132+ /endif                                                                                                             2000004
   133+                                                                                                                    2000005
   134+ /if not defined (LIBC)                                                                                             2000006
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page      5
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   135+ /define LIBC                                                                                                       2000007
   136+ *-------------------------------------------------------------------------                                         2000008
   137+ * Prototypes for C-Functions                                                                                       2000009
   138+ *-------------------------------------------------------------------------                                         2000010
   139+ *                                                                                                                  2000011
   140+ * string functions                                                                                                 2000012
   141+ *                                                                                                                  2000013
   142+D strtok          PR              *   extproc('strtok')                                                             2000014
   143+D  i_string                       *   value  options(*string)                                                       2000015
   144+D  i_token                        *   value  options(*string)                                                       2000016
   145+ *                                                                                                                  2000017
   146+D strlen          PR            10U 0 extproc('strlen')                                                             2000018
   147+D   string                        *   value                                                                         2000019
   148+ *                                                                                                                  2000020
   149+D strcmp          PR            10I 0 extproc('strcmp')                                                             2000021
   150+D  string1                        *   value                                                                         2000022
   151+D  string2                        *   value                                                                         2000023
   152+ *                                                                                                                  2000024
   153+D strncmp         PR            10I 0 extproc('strncmp')                                                            2000025
   154+D  string1                        *   value                                                                         2000026
   155+D  string2                        *   value                                                                         2000027
   156+D  count                        10I 0 value                                                                         2000028
   157+ *                                                                                                                  2000029
   158+D strcmpi         PR            10I 0 extproc('strcmpi')                                                            2000030
   159+D  string1                        *   value                                                                         2000031
   160+D  string2                        *   value                                                                         2000032
   161+ *                                                                                                                  2000033
   162+D strcasecmp      PR            10I 0 extproc('strcasecmp')                                                         2000034
   163+D  string1                        *   value                                                                         2000035
   164+D  string2                        *   value                                                                         2000036
   165+ *                                                                                                                  2000037
   166+D strncasecmp     PR            10I 0 extproc('strncasecmp')                                                        2000038
   167+D  string1                        *   value                                                                         2000039
   168+D  string2                        *   value                                                                         2000040
   169+D  count                        10I 0 value                                                                         2000041
   170+ *                                                                                                                  2000042
   171+D strstr          PR              *   extproc('strstr')                                                             2000043
   172+D  string1                        *   value                                                                         2000044
   173+D  string2                        *   value                                                                         2000045
   174+ *                                                                                                                  2000046
   175+D strcspn         PR            10I 0 extproc('strcspn')                                                            2000047
   176+D  string1                        *   value                                                                         2000048
   177+D  string2                        *   value                                                                         2000049
   178+ *                                                                                                                  2000050
   179+D requestControlBlockLower...                                                                                       2000051
   180+D                 DS                  qualified                                                                     2000052
   181+D   type                        10I 0 inz(0)                                                                        2000053
   182+D   ccsid                       10I 0 inz(0)                                                                        2000054
   183+D   case                        10I 0 inz(0)                                                                        2000055
   184+D   res1                        10A   inz(*ALLX'00')                                                                2000056
   185+ *                                                                                                                  2000057
   186+D requestControlBlockUpper...                                                                                       2000058
   187+D                 DS                  qualified                                                                     2000059
   188+D   type                        10I 0 inz(1)                                                                        2000060
   189+D   ccsid                       10I 0 inz(0)                                                                        2000061
   190+D   case                        10I 0 inz(0)                                                                        2000062
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page      6
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   191+D   res1                        10A   inz(*ALLX'00')                                                                2000063
   192+ *                                                                                                                  2000064
   193+D caseConvert     PR                  extproc('QlgConvertCase')                                                     2000065
   194+D   reqContBlock                      const                                                                         2000066
   195+D                                     likeds(requestControlBlockUpper)                                              2000067
   196+D   input                     1024A   const options(*varsize)                                                       2000068
   197+D   output                    1024A   options(*varsize)                                                             2000069
   198+D   len                         10I 0 const                                                                         2000070
   199+D   errorcode                         likeds(QUSEC) options(*varsize)                                               2000071
   200+                                                                                                                    2000072
   201+ *                                                                                                                  2000073
   202+ * memory functions                                                                                                 2000074
   203+ *                                                                                                                  2000075
   204+D memcpy          PR              *          extproc('memcpy')                                                      2000076
   205+D  dest                           *   value                                                                         2000077
   206+D  source                         *   value                                                                         2000078
   207+D  count                        10U 0 value                                                                         2000079
   208+ *                                                                                                                  2000080
   209+D memset          PR              *          extproc('memset')                                                      2000081
   210+D  i_pDest                        *   value                                                                         2000082
   211+D  i_char                       10I 0 value                                                                         2000083
   212+D  i_count                      10U 0 value                                                                         2000084
   213+ *                                                                                                                  2000085
   214+D memmove         PR              *          extproc('memmove')                                                     2000086
   215+D  pMemDest                       *   value                                                                         2000087
   216+D  pMemSrc                        *   value                                                                         2000088
   217+D  memSize                      10U 0 value                                                                         2000089
   218+ *                                                                                                                  2000090
   219+D memcmp          PR            10I 0        extproc('memcmp')                                                      2000091
   220+D  pBuf1                          *   value                                                                         2000092
   221+D  pBuf2                          *   value                                                                         2000093
   222+D  count                        10U 0 value                                                                         2000094
   223+ *                                                                                                                  2000095
   224+D memicmp         PR            10I 0        extproc('__memicmp')                                                   2000096
   225+D  pBuf1                          *   value                                                                         2000097
   226+D  pBuf2                          *   value                                                                         2000098
   227+D  count                        10U 0 value                                                                         2000099
   228+                                                                                                                    2000100
   229+ *                                                                                                                  2000101
   230+ * math functions                                                                                                   2000102
   231+ *                                                                                                                  2000103
   232+D ceiling         PR             8F   extproc('ceil')                                                               2000104
   233+D   value                        8F   value                                                                         2000105
   234+ *                                                                                                                  2000106
   235+D floor           PR             8F   extproc('floor')                                                              2000107
   236+D   value                        8F   value                                                                         2000108
   237+                                                                                                                    2000109
   238+ *                                                                                                                  2000110
   239+ * other functions                                                                                                  2000111
   240+ *                                                                                                                  2000112
   241+D tmpnam          PR              *   extproc('tmpnam')                                                             2000113
   242+D   buffer                      39A   options(*omit)                                                                2000114
   243+ *                                                                                                                  2000115
   244+D tmpnamIFS       PR              *   extproc('_C_IFS_tmpnam')                                                      2000116
   245+D   buffer                      39A   options(*omit)                                                                2000117
   246+ *                                                                                                                  2000118
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page      7
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   247+D system          PR            10I 0 extproc('system')                                                             2000119
   248+D   command                       *   value options(*string)                                                        2000120
   249+ *                                                                                                                  2000121
   250+D srand           PR                         extproc('srand')                                                       2000122
   251+D  i_seed                       10U 0 value                                                                         2000123
   252+ *                                                                                                                  2000124
   253+D rand            PR            10I 0        extproc('rand')                                                        2000125
   254+ *                                                                                                                  2000126
   255+D qsort           PR              *          extproc('qsort')                                                       2000127
   256+D  memPtr                         *   value                                                                         2000128
   257+D  numElem                      10U 0 value                                                                         2000129
   258+D  width                        10U 0 value                                                                         2000130
   259+D  pSortFunc                      *   value  procptr                                                                2000131
   260+ *                                                                                                                  2000132
   261+D bsearch         PR              *          extproc('bsearch')                                                     2000133
   262+D  keyPtr                         *   value                                                                         2000134
   263+D  memPtr                         *   value                                                                         2000135
   264+D  numElem                      10U 0 value                                                                         2000136
   265+D  width                        10U 0 value                                                                         2000137
   266+D  pSearchFnc                     *   value  procptr                                                                2000138
   267+                                                                                                                    2000139
   268+ *                                                                                                                  2000140
   269+ * error handling                                                                                                   2000141
   270+ *                                                                                                                  2000142
   271+D errno           PR              *   extproc('__errno')                                                            2000143
   272+ *                                                                                                                  2000144
   273+D strerr          PR              *   extproc('strerror')                                                           2000145
   274+D  errnum                       10I 0 value                                                                         2000146
   275+ * for backwards compatibility                                                                                      2000147
   276+D strerror        PR              *   extproc('strerror')                                                           2000148
   277+D  errnum                       10I 0 value                                                                         2000149
   278+                                                                                                                    2000150
   279+ /endif                                                                                                             2000151
   280+                                                                                                                    2000152
   281+ /if not defined(FCNTL_PROTOTYPE)                                                                                   2000153
   282+ *                                                                                                                  2000154
   283+ * fcntl() commands                                                                                                 2000155
   284+ *                                                                                                                  2000156
   285+D F_DUPFD         C                   0                                                                             2000157
   286+D F_GETFL         C                   6                                                                             2000158
   287+D F_SETFL         C                   7                                                                             2000159
   288+D F_GETOWN        C                   8                                                                             2000160
   289+D F_SETOWN        C                   9                                                                             2000161
   290+ *                                                                                                                  2000162
   291+ * fcntl() flags                                                                                                    2000163
   292+ *                                                                                                                  2000164
   293+D O_NONBLOCK      C                   128                                                                           2000165
   294+D O_NDELAY        C                   128                                                                           2000166
   295+D FNDELAY         C                   128                                                                           2000167
   296+D FASYNC          C                   512                                                                           2000168
   297+                                                                                                                    2000169
   298+ *--------------------------------------------------------------------                                              2000170
   299+ *   fcntl()--Change Descriptor Attributes                                                                          2000171
   300+ *                                                                                                                  2000172
   301+ *   int fcntl(int descriptor, int command, ...)                                                                    2000173
   302+ *                                                                                                                  2000174
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page      8
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   303+ *   The third parameter (when used with sockets) is also an                                                        2000175
   304+ *   integer passed by value.. it specifies an argument for                                                         2000176
   305+ *   some of the commands.                                                                                          2000177
   306+ *                                                                                                                  2000178
   307+ *   commands supported in sockets are:                                                                             2000179
   308+ *          F_GETFL -- Return the status flags for the descriptor                                                   2000180
   309+ *          F_SETFL -- Set status flags for the descriptor                                                          2000181
   310+ *                    (Arg =)status flags (ORed) to set.                                                            2000182
   311+ * (the commands below arent terribly useful in RPG)                                                                2000183
   312+ *          F_DUPFD -- Duplicate the descriptor                                                                     2000184
   313+ *                    (Arg =)minimum value that new descriptor can be                                               2000185
   314+ *          F_GETOWN -- Return the process ID or group ID that's                                                    2000186
   315+ *                     set to receive SIGIO & SIGURG                                                                2000187
   316+ *          F_SETOWN -- Set the process ID or group ID that's                                                       2000188
   317+ *                     to receive SIGIO & SIGURG                                                                    2000189
   318+ *                    (Arg =)process ID (or neg value for group ID)                                                 2000190
   319+ *                                                                                                                  2000191
   320+ *  returns -1 upon error.                                                                                          2000192
   321+ *          successful values are command-specific.                                                                 2000193
   322+ *--------------------------------------------------------------------                                              2000194
   323+D fcntl           PR            10I 0 extproc('fcntl')                                                              2000195
   324+D   socketDesc                  10I 0 value                                                                         2000196
   325+D   command                     10I 0 value                                                                         2000197
   326+D   arg                         10I 0 value options(*nopass)                                                        2000198
   327+                                                                                                                    2000199
   328+ /define FCNTL_PROTOTYPE                                                                                            2000200
   329+ /endif                                                                                                             2000201
   330+                                                                                                                    2000202
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   331 /include 'llist/llist_h.rpgle'                                                                                       000036
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  llist_h.r+                                                   *                     4
        * External name  . . . . . . :  /home/mihael/include/llist/llist_h.rpgle                     *                     4
        * Last change  . . . . . . . :  03/29/20  08:30:06                                           *                     4
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   332+**FREE                                                                                                              4000001
   333+                                                                                                                    4000002
   334+/if not defined(LLIST)                                                                                              4000003
   335+/define LLIST                                                                                                       4000004
   336+                                                                                                                    4000005
   337+///                                                                                                                 4000006
   338+// Linked List Implementation                                                                                       4000007
   339+//                                                                                                                  4000008
   340+// This is a typical Doubly-Linked List (Two-Way Linked List) Implementation                                        4000009
   341+// using dynamic memory allocation. The list is particular suitable for                                             4000010
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page      9
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   342+// character values but does also work with any other data (f. e. data                                              4000011
   343+// structures).                                                                                                     4000012
   344+//                                                                                                                  4000013
   345+// <br><br>                                                                                                         4000014
   346+//                                                                                                                  4000015
   347+// Values are stored as null-terminated chars.                                                                      4000016
   348+//                                                                                                                  4000017
   349+// <br><br>                                                                                                         4000018
   350+//                                                                                                                  4000019
   351+// Operations that index into the list will traverse the list from                                                  4000020
   352+// the beginning or the end, whichever is closer to the specified index.                                            4000021
   353+//                                                                                                                  4000022
   354+// <br><br>                                                                                                         4000023
   355+//                                                                                                                  4000024
   356+// <b>Iteration:</b> With the procedure <em>getNext</em> the list is                                                4000025
   357+// traversable in the top-bottom direction. Each call to <em>getNext</em>                                           4000026
   358+// will return the next entry of the list till the end of the list.                                                 4000027
   359+// If the walk through the list should be stopped early (before the end                                             4000028
   360+// of the list) the method <em>abortIteration</em> should be called.                                                4000029
   361+// If the list is structurally modified at any time                                                                 4000030
   362+// after an iteration has begun in any way, the result of the iteration                                             4000031
   363+// can not be safely determined. If an iteratioj is not going to continue                                           4000032
   364+// the procedure <em>abortIteration</em> should be called. After that                                               4000033
   365+// call it is safe to modify the list again.                                                                        4000034
   366+//                                                                                                                  4000035
   367+// <br><br>                                                                                                         4000036
   368+//                                                                                                                  4000037
   369+// Throughout this service program a zero-based index is used.                                                      4000038
   370+//                                                                                                                  4000039
   371+// <br><br>                                                                                                         4000040
   372+//                                                                                                                  4000041
   373+// This list implementation is not thread-safe.                                                                     4000042
   374+//                                                                                                                  4000043
   375+// @author Mihael Schmidt                                                                                           4000044
   376+// @date   20.12.2007                                                                                               4000045
   377+// @project Linked List                                                                                             4000046
   378+//                                                                                                                  4000047
   379+// @rev 22.11.2009 Mihael Schmidt                                                                                   4000048
   380+//      Added sorting support <br>                                                                                  4000049
   381+//      Changed memory management to user created heap <br>                                                         4000050
   382+//      Added removeRange procedure <br>                                                                            4000051
   383+//      Bug fix: list_addAll does not work if value has x'00'                                                       4000052
   384+//                                                                                                                  4000053
   385+// @rev 15.12.2009 Mihael Schmidt                                                                                   4000054
   386+//      Added merge procedure                                                                                       4000055
   387+//                                                                                                                  4000056
   388+// @rev 19.02.2011 Mihael Schmidt                                                                                   4000057
   389+//      Fixed list_sublist procedure <br>                                                                           4000058
   390+//      Added list_resetIteration <br>                                                                              4000059
   391+//      Deprecated list_abortIteration <br>                                                                         4000060
   392+//      Added list_iterate <br>                                                                                     4000061
   393+//      Deprecated list_getNext <br>                                                                                4000062
   394+//      Userdata parameter on list_foreach is now optional <br>                                                     4000063
   395+//      list_merge got new parameter to only optionally skip duplicate entries                                      4000064
   396+//                                                                                                                  4000065
   397+// @rev 07.06.2018 Mihael Schmidt                                                                                   4000066
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     10
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   398+//      Changed sort API <br>                                                                                       4000067
   399+//      Escape messages are now sent to the current call stack entry +1                                             4000068
   400+//      instead of the program control boundary <br>                                                                4000069
   401+//                                                                                                                  4000070
   402+///                                                                                                                 4000071
   403+                                                                                                                    4000072
   404+//------------------------------------------------------------------------------                                    4000073
   405+//                          The MIT License (MIT)                                                                   4000074
   406+//                                                                                                                  4000075
   407+// Copyright (c) 2017 Mihael Schmidt                                                                                4000076
   408+//                                                                                                                  4000077
   409+// Permission is hereby granted, free of charge, to any person obtaining a copy                                     4000078
   410+// of this software and associated documentation files (the "Software"), to deal                                    4000079
   411+// in the Software without restriction, including without limitation the rights                                     4000080
   412+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                        4000081
   413+// copies of the Software, and to permit persons to whom the Software is                                            4000082
   414+// furnished to do so, subject to the following conditions:                                                         4000083
   415+//                                                                                                                  4000084
   416+// The above copyright notice and this permission notice shall be included in                                       4000085
   417+// all copies or substantial portions of the Software.                                                              4000086
   418+//                                                                                                                  4000087
   419+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                       4000088
   420+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                         4000089
   421+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                      4000090
   422+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                           4000091
   423+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                    4000092
   424+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                    4000093
   425+// SOFTWARE.                                                                                                        4000094
   426+//------------------------------------------------------------------------------                                    4000095
   427+                                                                                                                    4000096
   428+                                                                                                                    4000097
   429+//-------------------------------------------------------------------------                                         4000098
   430+// Prototypes                                                                                                       4000099
   431+//-------------------------------------------------------------------------                                         4000100
   432+                                                                                                                    4000101
   433+///                                                                                                                 4000102
   434+// Create list                                                                                                      4000103
   435+//                                                                                                                  4000104
   436+// Creates a list. A header is generated for the list and the pointer to                                            4000105
   437+// the list returned.                                                                                               4000106
   438+//                                                                                                                  4000107
   439+// <br><br>                                                                                                         4000108
   440+//                                                                                                                  4000109
   441+// A list must be disposed via the procedure <em>dispose</em> to free all                                           4000110
   442+// allocated memory.                                                                                                4000111
   443+//                                                                                                                  4000112
   444+// @author Mihael Schmidt                                                                                           4000113
   445+// @date   18.12.2007                                                                                               4000114
   446+//                                                                                                                  4000115
   447+// @return Pointer to the list                                                                                      4000116
   448+///                                                                                                                 4000117
   449+dcl-pr list_create pointer extproc('list_create') end-pr;                                                           4000118
   450+                                                                                                                    4000119
   451+///                                                                                                                 4000120
   452+// Dispose list                                                                                                     4000121
   453+//                                                                                                                  4000122
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     11
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   454+// The memory for whole list are is released                                                                        4000123
   455+// (deallocated). The list pointer is set to *null;                                                                 4000124
   456+//                                                                                                                  4000125
   457+// <br><br>                                                                                                         4000126
   458+//                                                                                                                  4000127
   459+// If the passed pointer is already *null the procedure simply returns.                                             4000128
   460+//                                                                                                                  4000129
   461+// @author Mihael Schmidt                                                                                           4000130
   462+// @date   18.12.2007                                                                                               4000131
   463+//                                                                                                                  4000132
   464+// @param Pointer to the list                                                                                       4000133
   465+///                                                                                                                 4000134
   466+dcl-pr list_dispose extproc('list_dispose');                                                                        4000135
   467+  list pointer;                                                                                                     4000136
   468+end-pr;                                                                                                             4000137
   469+                                                                                                                    4000138
   470+///                                                                                                                 4000139
   471+// Add list entry                                                                                                   4000140
   472+//                                                                                                                  4000141
   473+// Adds an entry at an exact position in the list. If the position is                                               4000142
   474+// outside the list the procedure returns <em>*off</em>. The current                                                4000143
   475+// entry of the list at that position will be pushed one position down                                              4000144
   476+// the list.                                                                                                        4000145
   477+//                                                                                                                  4000146
   478+// <br><br>                                                                                                         4000147
   479+//                                                                                                                  4000148
   480+// If no position is passed to the procedure then the entry will be                                                 4000149
   481+// appended to the end of the list (like <em>addLast</em>).                                                         4000150
   482+//                                                                                                                  4000151
   483+// @author Mihael Schmidt                                                                                           4000152
   484+// @date   18.12.2007                                                                                               4000153
   485+//                                                                                                                  4000154
   486+// @param Pointer to the list                                                                                       4000155
   487+// @param Pointer to the new value                                                                                  4000156
   488+// @param Length of the new value                                                                                   4000157
   489+// @param List position for the new value (optional)                                                                4000158
   490+//                                                                                                                  4000159
   491+// @return *on = entry added the list <br>                                                                          4000160
   492+//         *off = error                                                                                             4000161
   493+///                                                                                                                 4000162
   494+dcl-pr list_add ind extproc('list_add');                                                                            4000163
   495+  list pointer const;                                                                                               4000164
   496+    value pointer const;                                                                                            4000165
   497+  length uns(10) const;                                                                                             4000166
   498+  position uns(10) const options(*nopass);                                                                          4000167
   499+end-pr;                                                                                                             4000168
   500+                                                                                                                    4000169
   501+///                                                                                                                 4000170
   502+// Add list entry to the top of the list                                                                            4000171
   503+//                                                                                                                  4000172
   504+// @author Mihael Schmidt                                                                                           4000173
   505+// @date   18.12.2007                                                                                               4000174
   506+//                                                                                                                  4000175
   507+// @param Pointer to the list                                                                                       4000176
   508+// @param Pointer to new value                                                                                      4000177
   509+// @param Length of new value                                                                                       4000178
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     12
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   510+//                                                                                                                  4000179
   511+// @return *on = successful <br>                                                                                    4000180
   512+//         *off = error                                                                                             4000181
   513+///                                                                                                                 4000182
   514+dcl-pr list_addFirst ind extproc('list_addFirst');                                                                  4000183
   515+  list pointer;                                                                                                     4000184
   516+  value pointer const;                                                                                              4000185
   517+  length uns(10) const;                                                                                             4000186
   518+end-pr;                                                                                                             4000187
   519+                                                                                                                    4000188
   520+///                                                                                                                 4000189
   521+// Add list entry to the end of the list                                                                            4000190
   522+//                                                                                                                  4000191
   523+// @author Mihael Schmidt                                                                                           4000192
   524+// @date   18.12.2007                                                                                               4000193
   525+//                                                                                                                  4000194
   526+// @param Pointer to the list                                                                                       4000195
   527+// @param Pointer to new value                                                                                      4000196
   528+// @param Length of new value                                                                                       4000197
   529+//                                                                                                                  4000198
   530+// @return *on = successful <br>                                                                                    4000199
   531+//         *off = error                                                                                             4000200
   532+///                                                                                                                 4000201
   533+dcl-pr list_addLast ind extproc('list_addLast');                                                                    4000202
   534+  list pointer const;                                                                                               4000203
   535+  value pointer const;                                                                                              4000204
   536+  length uns(10) const;                                                                                             4000205
   537+end-pr;                                                                                                             4000206
   538+                                                                                                                    4000207
   539+///                                                                                                                 4000208
   540+// Add all elements of a list                                                                                       4000209
   541+//                                                                                                                  4000210
   542+// Adds all elements of the passed list to the end of this list.                                                    4000211
   543+// Elements will not be referenced but storage newly allocated.                                                     4000212
   544+//                                                                                                                  4000213
   545+// @author Mihael Schmidt                                                                                           4000214
   546+// @date   18.12.2007                                                                                               4000215
   547+//                                                                                                                  4000216
   548+// @param Pointer to the destination list                                                                           4000217
   549+// @param Pointer to the source list                                                                                4000218
   550+//                                                                                                                  4000219
   551+// @return *on = all elements added to list <br>                                                                    4000220
   552+//         *off = not all or none elements added                                                                    4000221
   553+///                                                                                                                 4000222
   554+dcl-pr list_addAll ind extproc('list_addAll');                                                                      4000223
   555+  list pointer const;                                                                                               4000224
   556+  sourceList pointer const;                                                                                         4000225
   557+end-pr;                                                                                                             4000226
   558+                                                                                                                    4000227
   559+///                                                                                                                 4000228
   560+// Remove list entry                                                                                                4000229
   561+//                                                                                                                  4000230
   562+// Removes an entry from the list at the given position. If the                                                     4000231
   563+// position is outside of the list the return value will be <em>*off</em>.                                          4000232
   564+//                                                                                                                  4000233
   565+// <br><br>                                                                                                         4000234
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     13
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   566+//                                                                                                                  4000235
   567+// The index is 0 (zero) based.                                                                                     4000236
   568+//                                                                                                                  4000237
   569+// @author Mihael Schmidt                                                                                           4000238
   570+// @date   18.12.2007                                                                                               4000239
   571+//                                                                                                                  4000240
   572+// @param Pointer to the list                                                                                       4000241
   573+// @param index of the entry in the list (zero-based)                                                               4000242
   574+//                                                                                                                  4000243
   575+// @return *on = entry removed                                                                                      4000244
   576+//         *off = error                                                                                             4000245
   577+///                                                                                                                 4000246
   578+dcl-pr list_remove ind extproc('list_remove');                                                                      4000247
   579+  list pointer const;                                                                                               4000248
   580+  index uns(10) const;                                                                                              4000249
   581+end-pr;                                                                                                             4000250
   582+                                                                                                                    4000251
   583+///                                                                                                                 4000252
   584+// Remove first list entry                                                                                          4000253
   585+//                                                                                                                  4000254
   586+// Removes the first entry from the list.                                                                           4000255
   587+//                                                                                                                  4000256
   588+// @author Mihael Schmidt                                                                                           4000257
   589+// @date   18.12.2007                                                                                               4000258
   590+//                                                                                                                  4000259
   591+// @param Pointer to the list                                                                                       4000260
   592+//                                                                                                                  4000261
   593+// @return *on = entry removed <br>                                                                                 4000262
   594+//         *off = error                                                                                             4000263
   595+///                                                                                                                 4000264
   596+dcl-pr list_removeFirst ind extproc('list_removeFirst');                                                            4000265
   597+  list pointer const;                                                                                               4000266
   598+end-pr;                                                                                                             4000267
   599+                                                                                                                    4000268
   600+///                                                                                                                 4000269
   601+// Remove last list entry                                                                                           4000270
   602+//                                                                                                                  4000271
   603+// Removes the last entry from the list.                                                                            4000272
   604+//                                                                                                                  4000273
   605+// @author Mihael Schmidt                                                                                           4000274
   606+// @date   18.12.2007                                                                                               4000275
   607+//                                                                                                                  4000276
   608+// @param Pointer to the list                                                                                       4000277
   609+//                                                                                                                  4000278
   610+// @return *on = entry removed <br>                                                                                 4000279
   611+//         *off = error (escape message)                                                                            4000280
   612+///                                                                                                                 4000281
   613+dcl-pr list_removeLast ind extproc('list_removeLast');                                                              4000282
   614+  list pointer const;                                                                                               4000283
   615+end-pr;                                                                                                             4000284
   616+                                                                                                                    4000285
   617+///                                                                                                                 4000286
   618+// Clear list                                                                                                       4000287
   619+//                                                                                                                  4000288
   620+// Deletes all entries in the list.                                                                                 4000289
   621+//                                                                                                                  4000290
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     14
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   622+// @author Mihael Schmidt                                                                                           4000291
   623+// @date   18.12.2007                                                                                               4000292
   624+//                                                                                                                  4000293
   625+// @param Pointer to the list                                                                                       4000294
   626+//                                                                                                                  4000295
   627+// @return *on = successful <br>                                                                                    4000296
   628+//         *off = error                                                                                             4000297
   629+///                                                                                                                 4000298
   630+dcl-pr list_clear ind extproc('list_clear');                                                                        4000299
   631+  list pointer const;                                                                                               4000300
   632+end-pr;                                                                                                             4000301
   633+                                                                                                                    4000302
   634+///                                                                                                                 4000303
   635+// Check if list is empty                                                                                           4000304
   636+//                                                                                                                  4000305
   637+// Checks if the list is empty.                                                                                     4000306
   638+//                                                                                                                  4000307
   639+// @author Mihael Schmidt                                                                                           4000308
   640+// @date   19.12.2007                                                                                               4000309
   641+//                                                                                                                  4000310
   642+// @param Pointer to the list                                                                                       4000311
   643+//                                                                                                                  4000312
   644+// @return *on = list is empty <br>                                                                                 4000313
   645+//         *off = list is not empty                                                                                 4000314
   646+///                                                                                                                 4000315
   647+dcl-pr list_isEmpty ind extproc('list_isEmpty');                                                                    4000316
   648+  list pointer const;                                                                                               4000317
   649+end-pr;                                                                                                             4000318
   650+                                                                                                                    4000319
   651+///                                                                                                                 4000320
   652+// Replaces an entry in the list                                                                                    4000321
   653+//                                                                                                                  4000322
   654+// An element in the list will be replaced. If there is no element                                                  4000323
   655+// at that position the return value will be <em>*off</em>.                                                         4000324
   656+//                                                                                                                  4000325
   657+// @author Mihael Schmidt                                                                                           4000326
   658+// @date   19.12.2007                                                                                               4000327
   659+//                                                                                                                  4000328
   660+// @param Pointer to the list                                                                                       4000329
   661+// @param Pointer to new value                                                                                      4000330
   662+// @param Length of new value                                                                                       4000331
   663+// @param index of new value                                                                                        4000332
   664+//                                                                                                                  4000333
   665+// @return *on = entry successfully replaced <br>                                                                   4000334
   666+//         *off = error                                                                                             4000335
   667+///                                                                                                                 4000336
   668+dcl-pr list_replace ind extproc('list_replace');                                                                    4000337
   669+  list pointer const;                                                                                               4000338
   670+  value pointer const;                                                                                              4000339
   671+  length uns(10) const;                                                                                             4000340
   672+  index uns(10) const;                                                                                              4000341
   673+end-pr;                                                                                                             4000342
   674+                                                                                                                    4000343
   675+///                                                                                                                 4000344
   676+// Get entry                                                                                                        4000345
   677+//                                                                                                                  4000346
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     15
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   678+// Returns a list entry specified by the passed index.                                                              4000347
   679+//                                                                                                                  4000348
   680+// @author Mihael Schmidt                                                                                           4000349
   681+// @date   19.12.2007                                                                                               4000350
   682+//                                                                                                                  4000351
   683+// @param Pointer to the list                                                                                       4000352
   684+// @param List position                                                                                             4000353
   685+//                                                                                                                  4000354
   686+// @return Pointer to a null terminated string or                                                                   4000355
   687+//         *null if an error occured or there is no                                                                 4000356
   688+//         entry at that position                                                                                   4000357
   689+///                                                                                                                 4000358
   690+dcl-pr list_get pointer extproc('list_get');                                                                        4000359
   691+  list pointer const;                                                                                               4000360
   692+  index uns(10) const;                                                                                              4000361
   693+end-pr;                                                                                                             4000362
   694+                                                                                                                    4000363
   695+///                                                                                                                 4000364
   696+// Get first entry                                                                                                  4000365
   697+//                                                                                                                  4000366
   698+// Returns the first entry of the list.                                                                             4000367
   699+//                                                                                                                  4000368
   700+// @author Mihael Schmidt                                                                                           4000369
   701+// @date   19.12.2007                                                                                               4000370
   702+//                                                                                                                  4000371
   703+// @param Pointer to the list                                                                                       4000372
   704+//                                                                                                                  4000373
   705+// @return Pointer to a null terminated string or                                                                   4000374
   706+//         *null if the list is empty or an error occured                                                           4000375
   707+///                                                                                                                 4000376
   708+dcl-pr list_getFirst pointer extproc('list_getFirst');                                                              4000377
   709+  list pointer const;                                                                                               4000378
   710+end-pr;                                                                                                             4000379
   711+                                                                                                                    4000380
   712+///                                                                                                                 4000381
   713+// Get last entry                                                                                                   4000382
   714+//                                                                                                                  4000383
   715+// Returns the last entry of the list.                                                                              4000384
   716+//                                                                                                                  4000385
   717+// @author Mihael Schmidt                                                                                           4000386
   718+// @date   19.12.2007                                                                                               4000387
   719+//                                                                                                                  4000388
   720+// @param Pointer to the list                                                                                       4000389
   721+//                                                                                                                  4000390
   722+// @return Pointer to a null terminated string or                                                                   4000391
   723+//         *null if the list is empty or an error occured                                                           4000392
   724+///                                                                                                                 4000393
   725+dcl-pr list_getLast pointer extproc('list_getLast');                                                                4000394
   726+  list pointer const;                                                                                               4000395
   727+end-pr;                                                                                                             4000396
   728+                                                                                                                    4000397
   729+///                                                                                                                 4000398
   730+// Get next entry                                                                                                   4000399
   731+//                                                                                                                  4000400
   732+// Iterates through the list and gets the next entry. If the iterator is                                            4000401
   733+// at the end of the list this method will return <em>null</em>. The                                                4000402
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     16
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   734+// iteration can be aborted early with the procedure <em>                                                           4000403
   735+// list_resetIteration</em>.                                                                                        4000404
   736+//                                                                                                                  4000405
   737+// @author Mihael Schmidt                                                                                           4000406
   738+// @date   18.12.2007                                                                                               4000407
   739+//                                                                                                                  4000408
   740+// @param Pointer to the list                                                                                       4000409
   741+//                                                                                                                  4000410
   742+// @return Pointer to entry or *null if no more entries in list                                                     4000411
   743+//                                                                                                                  4000412
   744+// @deprecated Use <em>list_iterate</em> instead.                                                                   4000413
   745+///                                                                                                                 4000414
   746+dcl-pr list_getNext pointer extproc('list_getNext');                                                                4000415
   747+  list pointer const;                                                                                               4000416
   748+end-pr;                                                                                                             4000417
   749+                                                                                                                    4000418
   750+///                                                                                                                 4000419
   751+// Iterate list                                                                                                     4000420
   752+//                                                                                                                  4000421
   753+// Iterates through the list and returns the next entry. If the iterator is                                         4000422
   754+// at the end of the list this method will return <em>null</em>. The                                                4000423
   755+// iteration can be aborted early with the procedure <em>list_resetIteration</em>.                                  4000424
   756+//                                                                                                                  4000425
   757+// @author Mihael Schmidt                                                                                           4000426
   758+// @date   19.2.2011                                                                                                4000427
   759+//                                                                                                                  4000428
   760+// @param Pointer to the list                                                                                       4000429
   761+//                                                                                                                  4000430
   762+// @return Pointer to entry or *n ll if no more entries in list                                                     4000431
   763+///                                                                                                                 4000432
   764+dcl-pr list_iterate pointer extproc('list_iterate');                                                                4000433
   765+  list pointer const;                                                                                               4000434
   766+end-pr;                                                                                                             4000435
   767+                                                                                                                    4000436
   768+///                                                                                                                 4000437
   769+// Get previous entry                                                                                               4000438
   770+//                                                                                                                  4000439
   771+// Iterates through the list and gets the previous entry. If the iterator is                                        4000440
   772+// before the start of the list this method will return <em>null</em>. The                                          4000441
   773+// iteration can be aborted early with the procedure <em>list_resetIteration</em>.                                  4000442
   774+//                                                                                                                  4000443
   775+// @author Mihael Schmidt                                                                                           4000444
   776+// @date   18.12.2007                                                                                               4000445
   777+//                                                                                                                  4000446
   778+// @param Pointer to the list                                                                                       4000447
   779+//                                                                                                                  4000448
   780+// @return Pointer to entry or *null if no more entries in list                                                     4000449
   781+///                                                                                                                 4000450
   782+dcl-pr list_getPrev pointer extproc('list_getPrev');                                                                4000451
   783+  list pointer const;                                                                                               4000452
   784+end-pr;                                                                                                             4000453
   785+                                                                                                                    4000454
   786+///                                                                                                                 4000455
   787+// Abort iteration                                                                                                  4000456
   788+//                                                                                                                  4000457
   789+// If the iteration through the list should be aborted early this                                                   4000458
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     17
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   790+// procedure should be called.                                                                                      4000459
   791+//                                                                                                                  4000460
   792+// @author Mihael Schmidt                                                                                           4000461
   793+// @date   18.12.2007                                                                                               4000462
   794+//                                                                                                                  4000463
   795+// @param Pointer to the list                                                                                       4000464
   796+//                                                                                                                  4000465
   797+// @deprecated Use <em>list_resetIteration</em> instead.                                                            4000466
   798+///                                                                                                                 4000467
   799+dcl-pr list_abortIteration extproc('list_abortIteration');                                                          4000468
   800+  list pointer const;                                                                                               4000469
   801+end-pr;                                                                                                             4000470
   802+                                                                                                                    4000471
   803+///                                                                                                                 4000472
   804+// Reset iteration                                                                                                  4000473
   805+//                                                                                                                  4000474
   806+// Resets the internal iteration state of the list so that the next                                                 4000475
   807+// call to <em>list_iterate</em> will return the first element.                                                     4000476
   808+//                                                                                                                  4000477
   809+// @author Mihael Schmidt                                                                                           4000478
   810+// @date   19.2.2011                                                                                                4000479
   811+//                                                                                                                  4000480
   812+// @param Pointer to the list                                                                                       4000481
   813+///                                                                                                                 4000482
   814+dcl-pr list_resetIteration extproc('list_resetIteration');                                                          4000483
   815+  list pointer const;                                                                                               4000484
   816+end-pr;                                                                                                             4000485
   817+                                                                                                                    4000486
   818+///                                                                                                                 4000487
   819+// Contains entry                                                                                                   4000488
   820+//                                                                                                                  4000489
   821+// Checks if this list contains the passed entry.                                                                   4000490
   822+//                                                                                                                  4000491
   823+// @author Mihael Schmidt                                                                                           4000492
   824+// @date   19.12.2007                                                                                               4000493
   825+//                                                                                                                  4000494
   826+// @param Pointer to the list                                                                                       4000495
   827+// @param Pointer to value                                                                                          4000496
   828+// @param Length of value                                                                                           4000497
   829+//                                                                                                                  4000498
   830+// @return *on = list contains value <br>                                                                           4000499
   831+//         *off = list does not contain value                                                                       4000500
   832+///                                                                                                                 4000501
   833+dcl-pr list_contains ind extproc('list_contains');                                                                  4000502
   834+  list pointer const;                                                                                               4000503
   835+  value pointer const;                                                                                              4000504
   836+  length uns(10) const;                                                                                             4000505
   837+end-pr;                                                                                                             4000506
   838+                                                                                                                    4000507
   839+///                                                                                                                 4000508
   840+// Index of entry                                                                                                   4000509
   841+//                                                                                                                  4000510
   842+// Returns the index of the passed entry or -1 if the entry could not                                               4000511
   843+// be found in the list.                                                                                            4000512
   844+//                                                                                                                  4000513
   845+// @author Mihael Schmidt                                                                                           4000514
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     18
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   846+// @date   19.12.2007                                                                                               4000515
   847+//                                                                                                                  4000516
   848+// @param Pointer to the list                                                                                       4000517
   849+// @param Pointer to the value                                                                                      4000518
   850+// @param Length of the value                                                                                       4000519
   851+//                                                                                                                  4000520
   852+// @return index of the entry or -1 if entry not in list                                                            4000521
   853+///                                                                                                                 4000522
   854+dcl-pr list_indexOf int(10) extproc('list_indexOf');                                                                4000523
   855+  list pointer const;                                                                                               4000524
   856+  value pointer const;                                                                                              4000525
   857+  length uns(10) const;                                                                                             4000526
   858+end-pr;                                                                                                             4000527
   859+                                                                                                                    4000528
   860+///                                                                                                                 4000529
   861+// Last index of entry                                                                                              4000530
   862+//                                                                                                                  4000531
   863+// Returns the last indes of the passed entry or -1 if the entry                                                    4000532
   864+// could not be found in the list.                                                                                  4000533
   865+//                                                                                                                  4000534
   866+// @author Mihael Schmidt                                                                                           4000535
   867+// @date   19.12.2007                                                                                               4000536
   868+//                                                                                                                  4000537
   869+// @param Pointer to the list                                                                                       4000538
   870+// @param Pointer to the value                                                                                      4000539
   871+// @param Length of the value                                                                                       4000540
   872+//                                                                                                                  4000541
   873+// @return index of the entry or -1 if entry not in list                                                            4000542
   874+///                                                                                                                 4000543
   875+dcl-pr list_lastIndexOf int(10) extproc('list_lastIndexOf');                                                        4000544
   876+  list pointer const;                                                                                               4000545
   877+  value pointer const;                                                                                              4000546
   878+  length uns(10) const;                                                                                             4000547
   879+end-pr;                                                                                                             4000548
   880+                                                                                                                    4000549
   881+///                                                                                                                 4000550
   882+// To character array                                                                                               4000551
   883+//                                                                                                                  4000552
   884+// Copies all entries of this list to the passed array. Entries will be                                             4000553
   885+// truncated if they are too big for the array. If the array is not big                                             4000554
   886+// enough, the last entries will be silently dropped.                                                               4000555
   887+//                                                                                                                  4000556
   888+// @author Mihael Schmidt                                                                                           4000557
   889+// @date   19.12.2007                                                                                               4000558
   890+//                                                                                                                  4000559
   891+// @param Pointer to the list                                                                                       4000560
   892+// @param Pointer to the array                                                                                      4000561
   893+// @param Element count                                                                                             4000562
   894+// @param Element length                                                                                            4000563
   895+//                                                                                                                  4000564
   896+///                                                                                                                 4000565
   897+dcl-pr list_toCharArray extproc('list_toCharArray');                                                                4000566
   898+  list pointer const;                                                                                               4000567
   899+  array pointer const;                                                                                              4000568
   900+  count uns(10) const;                                                                                              4000569
   901+  length uns(10) const;                                                                                             4000570
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     19
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   902+end-pr;                                                                                                             4000571
   903+                                                                                                                    4000572
   904+///                                                                                                                 4000573
   905+// Get list size                                                                                                    4000574
   906+//                                                                                                                  4000575
   907+// Returns the number elements in the list.                                                                         4000576
   908+//                                                                                                                  4000577
   909+// @author Mihael Schmidt                                                                                           4000578
   910+// @date   16.01.2008                                                                                               4000579
   911+//                                                                                                                  4000580
   912+// @param Pointer to the list                                                                                       4000581
   913+//                                                                                                                  4000582
   914+// @return number of elements in the list or -1 if an error occurs                                                  4000583
   915+///                                                                                                                 4000584
   916+dcl-pr list_size uns(10) extproc('list_size');                                                                      4000585
   917+  list pointer const;                                                                                               4000586
   918+end-pr;                                                                                                             4000587
   919+                                                                                                                    4000588
   920+///                                                                                                                 4000589
   921+// Create sublist                                                                                                   4000590
   922+//                                                                                                                  4000591
   923+// Creates a list with copies of a part of the passed list.                                                         4000592
   924+//                                                                                                                  4000593
   925+// @author Mihael Schmidt                                                                                           4000594
   926+// @date   16.1.2008                                                                                                4000595
   927+//                                                                                                                  4000596
   928+// @param Pointer to the list                                                                                       4000597
   929+// @param start of the index to copy                                                                                4000598
   930+// @param number of elements to copy                                                                                4000599
   931+//                                                                                                                  4000600
   932+// @return new list                                                                                                 4000601
   933+///                                                                                                                 4000602
   934+dcl-pr list_sublist pointer extproc('list_sublist');                                                                4000603
   935+  list pointer const;                                                                                               4000604
   936+  startIndex uns(10) const;                                                                                         4000605
   937+  length uns(10) const options(*nopass);                                                                            4000606
   938+end-pr;                                                                                                             4000607
   939+                                                                                                                    4000608
   940+///                                                                                                                 4000609
   941+// Rotate list by n positions                                                                                       4000610
   942+//                                                                                                                  4000611
   943+// Rotatas items in the list by the given number.                                                                   4000612
   944+//                                                                                                                  4000613
   945+// <br><br>                                                                                                         4000614
   946+//                                                                                                                  4000615
   947+// The elements from the end will be pushed to the front.                                                           4000616
   948+// A rotation of one will bring the last element to the first                                                       4000617
   949+// position and the first element will become the second element                                                    4000618
   950+// (pushed one position down the list).                                                                             4000619
   951+//                                                                                                                  4000620
   952+// <br><br>                                                                                                         4000621
   953+//                                                                                                                  4000622
   954+// Only a forward rotation is possible. No negative number of                                                       4000623
   955+// rotations are valid.                                                                                             4000624
   956+//                                                                                                                  4000625
   957+// <br><br>                                                                                                         4000626
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     20
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   958+//                                                                                                                  4000627
   959+// The number of rotations may even be greater than the size of                                                     4000628
   960+// the list. Example: List size 4, rotation number 5 = rotation                                                     4000629
   961+// number 1.                                                                                                        4000630
   962+//                                                                                                                  4000631
   963+// @author Mihael Schmidt                                                                                           4000632
   964+// @date   23.01.2008                                                                                               4000633
   965+//                                                                                                                  4000634
   966+// @param Pointer to the list                                                                                       4000635
   967+// @param Number positions to rotate list                                                                           4000636
   968+///                                                                                                                 4000637
   969+dcl-pr list_rotate extproc('list_rotate');                                                                          4000638
   970+  list pointer const;                                                                                               4000639
   971+  numberRotations int(10) const;                                                                                    4000640
   972+end-pr;                                                                                                             4000641
   973+                                                                                                                    4000642
   974+///                                                                                                                 4000643
   975+// Swap list items                                                                                                  4000644
   976+//                                                                                                                  4000645
   977+//                                                                                                                  4000646
   978+// @author Mihael Schmidt                                                                                           4000647
   979+// @date   23.01.2008                                                                                               4000648
   980+//                                                                                                                  4000649
   981+// @param Pointer to the list                                                                                       4000650
   982+// @param List item to swap                                                                                         4000651
   983+// @param List item to swap                                                                                         4000652
   984+///                                                                                                                 4000653
   985+dcl-pr list_swap ind extproc('list_swap');                                                                          4000654
   986+  list pointer const;                                                                                               4000655
   987+  itemPosition1 uns(10) const;                                                                                      4000656
   988+  itemPosition2 uns(10) const;                                                                                      4000657
   989+end-pr;                                                                                                             4000658
   990+                                                                                                                    4000659
   991+///                                                                                                                 4000660
   992+// Execute procedure for every list item                                                                            4000661
   993+//                                                                                                                  4000662
   994+// The passed procedure will be executed for every item                                                             4000663
   995+// in the list.                                                                                                     4000664
   996+//                                                                                                                  4000665
   997+// <br><br>                                                                                                         4000666
   998+//                                                                                                                  4000667
   999+// The user can pass data through a pointer to the procedure.                                                       4000668
  1000+// The pointer will not be touched by this procedure itself, so it                                                  4000669
  1001+// can be *null.                                                                                                    4000670
  1002+//                                                                                                                  4000671
  1003+// <br><br>                                                                                                         4000672
  1004+//                                                                                                                  4000673
  1005+// The value of list entry can be changed through the passed procedure                                              4000674
  1006+// but not the size of the entry/allocated memory.                                                                  4000675
  1007+//                                                                                                                  4000676
  1008+// @author Mihael Schmidt                                                                                           4000677
  1009+// @date   23.01.2008                                                                                               4000678
  1010+//                                                                                                                  4000679
  1011+// @param Pointer to the list                                                                                       4000680
  1012+// @param Procedure pointer                                                                                         4000681
  1013+// @param Pointer to user data (optional)                                                                           4000682
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     21
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1014+///                                                                                                                 4000683
  1015+dcl-pr list_foreach extproc('list_foreach');                                                                        4000684
  1016+  list pointer const;                                                                                               4000685
  1017+  procecdure pointer(*proc) const;                                                                                  4000686
  1018+  userData pointer const options(*nopass);                                                                          4000687
  1019+end-pr;                                                                                                             4000688
  1020+                                                                                                                    4000689
  1021+///                                                                                                                 4000690
  1022+// Return character representation of list                                                                          4000691
  1023+//                                                                                                                  4000692
  1024+// Returns a string with the list items separated either by                                                         4000693
  1025+// the passed or default separator. The items can be                                                                4000694
  1026+// enclosed by a passed character. The maximum character length                                                     4000695
  1027+// returned is 65535. Every character/item after that will be                                                       4000696
  1028+// dropped silently. Items will not be trimmed for this operation.                                                  4000697
  1029+//                                                                                                                  4000698
  1030+// <br><br>                                                                                                         4000699
  1031+//                                                                                                                  4000700
  1032+// If the third parameter is passed, the third parameter will be                                                    4000701
  1033+// pre- and appended to the item. If the fourth parameter is also                                                   4000702
  1034+// passed the third parameter will be prepended to the item and the                                                 4000703
  1035+// fourth parameter will be appended to the item.                                                                   4000704
  1036+//                                                                                                                  4000705
  1037+// @author Mihael Schmidt                                                                                           4000706
  1038+// @date   08.02.2008                                                                                               4000707
  1039+//                                                                                                                  4000708
  1040+// @param Pointer to the list                                                                                       4000709
  1041+// @param separator (default: ,)                                                                                    4000710
  1042+// @param enclosing character (default: nothing)                                                                    4000711
  1043+// @param enclosing character at the end of item (default: nothing)                                                 4000712
  1044+//                                                                                                                  4000713
  1045+// @return character representation of all list items                                                               4000714
  1046+///                                                                                                                 4000715
  1047+dcl-pr list_toString varchar(65535) extproc('list_toString');                                                       4000716
  1048+  list pointer const;                                                                                               4000717
  1049+  separator varchar(1) const options(*omit:*nopass);                                                                4000718
  1050+  enclosing varchar(100) const options(*nopass);                                                                    4000719
  1051+  enclosingEnd varchar(100) const options(*nopass);                                                                 4000720
  1052+end-pr;                                                                                                             4000721
  1053+                                                                                                                    4000722
  1054+///                                                                                                                 4000723
  1055+// Split character string                                                                                           4000724
  1056+//                                                                                                                  4000725
  1057+// The passed character string will be split into tokens by either                                                  4000726
  1058+// a passed or the default separator. All tokens will be added to                                                   4000727
  1059+// a new list which will be returned.                                                                               4000728
  1060+//                                                                                                                  4000729
  1061+// <br><br>                                                                                                         4000730
  1062+//                                                                                                                  4000731
  1063+// Empty (but not blank) values will be dropped silently.                                                           4000732
  1064+//                                                                                                                  4000733
  1065+// @author Mihael Schmidt                                                                                           4000734
  1066+// @date   08.02.2008                                                                                               4000735
  1067+//                                                                                                                  4000736
  1068+// @param Character string (null-terminated)                                                                        4000737
  1069+// @param Separator (default: ;)                                                                                    4000738
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     22
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1070+//                                                                                                                  4000739
  1071+// @return Pointer to the filled list                                                                               4000740
  1072+///                                                                                                                 4000741
  1073+dcl-pr list_split pointer extproc('list_split') opdesc;                                                             4000742
  1074+  string char(65535) const options(*varsize);                                                                       4000743
  1075+  separator char(1) const options(*nopass);                                                                         4000744
  1076+end-pr;                                                                                                             4000745
  1077+                                                                                                                    4000746
  1078+///                                                                                                                 4000747
  1079+// Reverse list                                                                                                     4000748
  1080+//                                                                                                                  4000749
  1081+// Reverse the order of the list by simply switching the previous and                                               4000750
  1082+// next pointers of each element.                                                                                   4000751
  1083+//                                                                                                                  4000752
  1084+// @param Pointer to the list                                                                                       4000753
  1085+///                                                                                                                 4000754
  1086+dcl-pr list_reverse extproc('list_reverse');                                                                        4000755
  1087+  list pointer const;                                                                                               4000756
  1088+end-pr;                                                                                                             4000757
  1089+                                                                                                                    4000758
  1090+///                                                                                                                 4000759
  1091+// Create a copy of a list                                                                                          4000760
  1092+//                                                                                                                  4000761
  1093+// Creates a list with copies of all elements of the list.                                                          4000762
  1094+//                                                                                                                  4000763
  1095+// @author Mihael Schmidt                                                                                           4000764
  1096+// @date   7.4.2008                                                                                                 4000765
  1097+//                                                                                                                  4000766
  1098+// @param Pointer to the list                                                                                       4000767
  1099+//                                                                                                                  4000768
  1100+// @return Pointer to t e new list                                                                                  4000769
  1101+///                                                                                                                 4000770
  1102+dcl-pr list_copy pointer extproc('list_copy');                                                                      4000771
  1103+  list pointer const;                                                                                               4000772
  1104+end-pr;                                                                                                             4000773
  1105+                                                                                                                    4000774
  1106+///                                                                                                                 4000775
  1107+// Frequency of a value in the list                                                                                 4000776
  1108+//                                                                                                                  4000777
  1109+// Returns the number of times the passed value                                                                     4000778
  1110+// can be found in the list.                                                                                        4000779
  1111+//                                                                                                                  4000780
  1112+// @author Mihael Schmidt                                                                                           4000781
  1113+// @date   05.04.2008                                                                                               4000782
  1114+//                                                                                                                  4000783
  1115+// @param Pointer to the list                                                                                       4000784
  1116+// @param Pointer to the value                                                                                      4000785
  1117+// @param Length of the value                                                                                       4000786
  1118+//                                                                                                                  4000787
  1119+// @return number of copies of passed value in the list                                                             4000788
  1120+///                                                                                                                 4000789
  1121+dcl-pr list_frequency uns(10) extproc('list_frequency');                                                            4000790
  1122+  list pointer const;                                                                                               4000791
  1123+  value pointer const;                                                                                              4000792
  1124+  length uns(10) const;                                                                                             4000793
  1125+end-pr;                                                                                                             4000794
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     23
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1126+                                                                                                                    4000795
  1127+///                                                                                                                 4000796
  1128+// Add character list entry                                                                                         4000797
  1129+//                                                                                                                  4000798
  1130+// Adds a character entry to the list. If the position is outside the list                                          4000799
  1131+// the procedure returns <em>*off</em>. The current entry of the list at                                            4000800
  1132+// that position will be pushed one position down the list.                                                         4000801
  1133+//                                                                                                                  4000802
  1134+// <br><br>                                                                                                         4000803
  1135+//                                                                                                                  4000804
  1136+// If no position is passed to the procedure then the entry will be                                                 4000805
  1137+// appended to the end of the list (like <em>addLast</em>).                                                         4000806
  1138+//                                                                                                                  4000807
  1139+// @author Mihael Schmidt                                                                                           4000808
  1140+// @date   21.09.2008                                                                                               4000809
  1141+//                                                                                                                  4000810
  1142+// @param Pointer to the list                                                                                       4000811
  1143+// @param Character value                                                                                           4000812
  1144+// @param List position for the new value (optional)                                                                4000813
  1145+//                                                                                                                  4000814
  1146+// @return *on = entry added the list <br>                                                                          4000815
  1147+//         *off = error                                                                                             4000816
  1148+///                                                                                                                 4000817
  1149+dcl-pr list_addString ind extproc('list_addString') opdesc;                                                         4000818
  1150+  list pointer const;                                                                                               4000819
  1151+  value char(65535) const options(*varsize);                                                                        4000820
  1152+  index uns(10) const options(*nopass);                                                                             4000821
  1153+end-pr;                                                                                                             4000822
  1154+                                                                                                                    4000823
  1155+///                                                                                                                 4000824
  1156+// Add integer list entry                                                                                           4000825
  1157+//                                                                                                                  4000826
  1158+// Adds an integer entry to the list. If the position is outside the list                                           4000827
  1159+// the procedure returns <em>*off</em>. The current entry of the list at                                            4000828
  1160+// that position will be pushed one position down the list.                                                         4000829
  1161+//                                                                                                                  4000830
  1162+// <br><br>                                                                                                         4000831
  1163+//                                                                                                                  4000832
  1164+// If no position is passed to the procedure then the entry will be                                                 4000833
  1165+// appended to the end of the list (like <em>addLast</em>).                                                         4000834
  1166+//                                                                                                                  4000835
  1167+// @author Mihael Schmidt                                                                                           4000836
  1168+// @date   21.09.2008                                                                                               4000837
  1169+//                                                                                                                  4000838
  1170+// @param Pointer to the list                                                                                       4000839
  1171+// @param Integer value                                                                                             4000840
  1172+// @param List position for the new value (optional)                                                                4000841
  1173+//                                                                                                                  4000842
  1174+// @return *on = entry added the list <br>                                                                          4000843
  1175+//         *off = error                                                                                             4000844
  1176+///                                                                                                                 4000845
  1177+dcl-pr list_addInteger ind extproc('list_addInteger');                                                              4000846
  1178+  list pointer const;                                                                                               4000847
  1179+  value int(10) const;                                                                                              4000848
  1180+  index uns(10) const options(*nopass);                                                                             4000849
  1181+end-pr;                                                                                                             4000850
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     24
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1182+                                                                                                                    4000851
  1183+///                                                                                                                 4000852
  1184+// Add long list entry                                                                                              4000853
  1185+//                                                                                                                  4000854
  1186+// Adds a long entry to the list. If the position is outside the list                                               4000855
  1187+// the procedure returns <em>*off</em>. The current entry of the list at                                            4000856
  1188+// that position will be pushed one position down the list.                                                         4000857
  1189+//                                                                                                                  4000858
  1190+// <br><br>                                                                                                         4000859
  1191+//                                                                                                                  4000860
  1192+// If no position is passed to the procedure then the entry will be                                                 4000861
  1193+// appended to the end of the list (like <em>addLast</em>).                                                         4000862
  1194+//                                                                                                                  4000863
  1195+// @author Mihael Schmidt                                                                                           4000864
  1196+// @date   21.09.2008                                                                                               4000865
  1197+//                                                                                                                  4000866
  1198+// @param Pointer to the list                                                                                       4000867
  1199+// @param Long value                                                                                                4000868
  1200+// @param List position for the new value (optional)                                                                4000869
  1201+//                                                                                                                  4000870
  1202+// @return *on = entry added the list <br>                                                                          4000871
  1203+//         *off = error                                                                                             4000872
  1204+///                                                                                                                 4000873
  1205+dcl-pr list_addLong ind extproc('list_addLong');                                                                    4000874
  1206+  list pointer const;                                                                                               4000875
  1207+  value int(20) const;                                                                                              4000876
  1208+  index uns(10) const options(*nopass);                                                                             4000877
  1209+end-pr;                                                                                                             4000878
  1210+                                                                                                                    4000879
  1211+///                                                                                                                 4000880
  1212+// Add short list entry                                                                                             4000881
  1213+//                                                                                                                  4000882
  1214+// Adds a short entry to the list. If the position is outside the list                                              4000883
  1215+// the procedure returns <em>*off</em>. The current entry of the list at                                            4000884
  1216+// that position will be pushed one position down the list.                                                         4000885
  1217+//                                                                                                                  4000886
  1218+// <br><br>                                                                                                         4000887
  1219+//                                                                                                                  4000888
  1220+// If no position is passed to the procedure then the entry will be                                                 4000889
  1221+// appended to the end of the list (like <em>addLast</em>).                                                         4000890
  1222+//                                                                                                                  4000891
  1223+// @author Mihael Schmidt                                                                                           4000892
  1224+// @date   21.09.2008                                                                                               4000893
  1225+//                                                                                                                  4000894
  1226+// @param Pointer to the list                                                                                       4000895
  1227+// @param Short value                                                                                               4000896
  1228+// @param List position for the new value (optional)                                                                4000897
  1229+//                                                                                                                  4000898
  1230+// @return *on = entry added the list <br>                                                                          4000899
  1231+//         *off = error                                                                                             4000900
  1232+///                                                                                                                 4000901
  1233+dcl-pr list_addShort ind extproc('list_addShort');                                                                  4000902
  1234+  list pointer const;                                                                                               4000903
  1235+  value int(5) const;                                                                                               4000904
  1236+  index uns(10) const options(*nopass);                                                                             4000905
  1237+end-pr;                                                                                                             4000906
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     25
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1238+                                                                                                                    4000907
  1239+///                                                                                                                 4000908
  1240+// Add float list entry                                                                                             4000909
  1241+//                                                                                                                  4000910
  1242+// Adds a float entry to the list. If the position is outside the list                                              4000911
  1243+// the procedure returns <em>*off</em>. The current entry of the list at                                            4000912
  1244+// that position will be pushed one position down the list.                                                         4000913
  1245+//                                                                                                                  4000914
  1246+// <br><br>                                                                                                         4000915
  1247+//                                                                                                                  4000916
  1248+// If no position is passed to the procedure then the entry will be                                                 4000917
  1249+// appended to the end of the list (like <em>addLast</em>).                                                         4000918
  1250+//                                                                                                                  4000919
  1251+// @author Mihael Schmidt                                                                                           4000920
  1252+// @date   21.09.2008                                                                                               4000921
  1253+//                                                                                                                  4000922
  1254+// @param Pointer to the list                                                                                       4000923
  1255+// @param Float value                                                                                               4000924
  1256+// @param List position for the new value (optional)                                                                4000925
  1257+//                                                                                                                  4000926
  1258+// @return *on = entry added the list <br>                                                                          4000927
  1259+//         *off = error                                                                                             4000928
  1260+///                                                                                                                 4000929
  1261+dcl-pr list_addFloat ind extproc('list_addFloat');                                                                  4000930
  1262+  list pointer const;                                                                                               4000931
  1263+  value float(4) const;                                                                                             4000932
  1264+  index uns(10) const options(*nopass);                                                                             4000933
  1265+end-pr;                                                                                                             4000934
  1266+                                                                                                                    4000935
  1267+///                                                                                                                 4000936
  1268+// Add double list entry                                                                                            4000937
  1269+//                                                                                                                  4000938
  1270+// Adds a double entry to the list. If the position is outside the list                                             4000939
  1271+// the procedure returns <em>*off</em>. The current entry of the list at                                            4000940
  1272+// that position will be pushed one position down the list.                                                         4000941
  1273+//                                                                                                                  4000942
  1274+// <br><br>                                                                                                         4000943
  1275+//                                                                                                                  4000944
  1276+// If no position is passed to the procedure then the entry will be                                                 4000945
  1277+// appended to the end of the list (like <em>addLast</em>).                                                         4000946
  1278+//                                                                                                                  4000947
  1279+// @author Mihael Schmidt                                                                                           4000948
  1280+// @date   21.09.2008                                                                                               4000949
  1281+//                                                                                                                  4000950
  1282+// @param Pointer to the list                                                                                       4000951
  1283+// @param Double value                                                                                              4000952
  1284+// @param List position for the new value (optional)                                                                4000953
  1285+//                                                                                                                  4000954
  1286+// @return *on = entry added the list <br>                                                                          4000955
  1287+//         *off = error                                                                                             4000956
  1288+///                                                                                                                 4000957
  1289+dcl-pr list_addDouble ind extproc('list_addDouble');                                                                4000958
  1290+  list pointer const;                                                                                               4000959
  1291+  value float(8) const;                                                                                             4000960
  1292+  index uns(10) const options(*nopass);                                                                             4000961
  1293+end-pr;                                                                                                             4000962
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     26
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1294+                                                                                                                    4000963
  1295+///                                                                                                                 4000964
  1296+// Add boolean list entry                                                                                           4000965
  1297+//                                                                                                                  4000966
  1298+// Adds a boolean entry to the list. If the position is outside the list                                            4000967
  1299+// the procedure returns <em>*off</em>. The current entry of the list at                                            4000968
  1300+// that position will be pushed one position down the list.                                                         4000969
  1301+//                                                                                                                  4000970
  1302+// <br><br>                                                                                                         4000971
  1303+//                                                                                                                  4000972
  1304+// If no position is passed to the procedure then the entry will be                                                 4000973
  1305+// appended to the end of the list (like <em>addLast</em>).                                                         4000974
  1306+//                                                                                                                  4000975
  1307+// @author Mihael Schmidt                                                                                           4000976
  1308+// @date   21.09.2008                                                                                               4000977
  1309+//                                                                                                                  4000978
  1310+// @param Pointer to the list                                                                                       4000979
  1311+// @param Boolean value                                                                                             4000980
  1312+// @param List position for the new value (optional)                                                                4000981
  1313+//                                                                                                                  4000982
  1314+// @return *on = entry added the list <br>                                                                          4000983
  1315+//         *off = error                                                                                             4000984
  1316+///                                                                                                                 4000985
  1317+dcl-pr list_addBoolean ind extproc('list_addBoolean');                                                              4000986
  1318+  list pointer const;                                                                                               4000987
  1319+  value ind const;                                                                                                  4000988
  1320+  index uns(10) const options(*nopass);                                                                             4000989
  1321+end-pr;                                                                                                             4000990
  1322+                                                                                                                    4000991
  1323+///                                                                                                                 4000992
  1324+// Add packed decimal list entry                                                                                    4000993
  1325+//                                                                                                                  4000994
  1326+// Adds a packed decimal entry to the list. If the position is outside the list                                     4000995
  1327+// the procedure returns <em>*off</em>. The current entry of the list at                                            4000996
  1328+// that position will be pushed one position down the list.                                                         4000997
  1329+//                                                                                                                  4000998
  1330+// <br><br>                                                                                                         4000999
  1331+//                                                                                                                  4001000
  1332+// If no position is passed to the procedure then the entry will be                                                 4001001
  1333+// appended to the end of the list (like <em>addLast</em>).                                                         4001002
  1334+//                                                                                                                  4001003
  1335+// @author Mihael Schmidt                                                                                           4001004
  1336+// @date   21.09.2008                                                                                               4001005
  1337+//                                                                                                                  4001006
  1338+// @param Pointer to the list                                                                                       4001007
  1339+// @param Packed decimal value                                                                                      4001008
  1340+// @param List position for the new value (optional)                                                                4001009
  1341+//                                                                                                                  4001010
  1342+// @return *on = entry added the list <br>                                                                          4001011
  1343+//         *off = error                                                                                             4001012
  1344+///                                                                                                                 4001013
  1345+dcl-pr list_addDecimal ind extproc('list_addDecimal');                                                              4001014
  1346+  list pointer const;                                                                                               4001015
  1347+  value packed(15 : 5) const;                                                                                       4001016
  1348+  index uns(10) const options(*nopass);                                                                             4001017
  1349+end-pr;                                                                                                             4001018
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     27
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1350+                                                                                                                    4001019
  1351+///                                                                                                                 4001020
  1352+// Add date list entry                                                                                              4001021
  1353+//                                                                                                                  4001022
  1354+// Adds a date entry to the list. If the position is outside the list                                               4001023
  1355+// the procedure returns <em>*off</em>. The current entry of the list at                                            4001024
  1356+// that position will be pushed one position down the list.                                                         4001025
  1357+//                                                                                                                  4001026
  1358+// <br><br>                                                                                                         4001027
  1359+//                                                                                                                  4001028
  1360+// If no position is passed to the procedure then the entry will be                                                 4001029
  1361+// appended to the end of the list (like <em>addLast</em>).                                                         4001030
  1362+//                                                                                                                  4001031
  1363+// @author Mihael Schmidt                                                                                           4001032
  1364+// @date   21.09.2008                                                                                               4001033
  1365+//                                                                                                                  4001034
  1366+// @param Pointer to the list                                                                                       4001035
  1367+// @param Date value                                                                                                4001036
  1368+// @param List position for the new value (optional)                                                                4001037
  1369+//                                                                                                                  4001038
  1370+// @return *on = entry added the list <br>                                                                          4001039
  1371+//         *off = error                                                                                             4001040
  1372+///                                                                                                                 4001041
  1373+dcl-pr list_addDate ind extproc('list_addDate');                                                                    4001042
  1374+  list pointer const;                                                                                               4001043
  1375+  value date const;                                                                                                 4001044
  1376+  index uns(10) const options(*nopass);                                                                             4001045
  1377+end-pr;                                                                                                             4001046
  1378+                                                                                                                    4001047
  1379+///                                                                                                                 4001048
  1380+// Get character entry                                                                                              4001049
  1381+//                                                                                                                  4001050
  1382+// Returns a character list entry specified by the passed index.                                                    4001051
  1383+//                                                                                                                  4001052
  1384+// @author Mihael Schmidt                                                                                           4001053
  1385+// @date   21.09.2008                                                                                               4001054
  1386+//                                                                                                                  4001055
  1387+// @param Pointer to the list                                                                                       4001056
  1388+// @param List position                                                                                             4001057
  1389+//                                                                                                                  4001058
  1390+// @return Character string of the specified position                                                               4001059
  1391+///                                                                                                                 4001060
  1392+dcl-pr list_getString char(65535) extproc('list_getString');                                                        4001061
  1393+  list pointer const;                                                                                               4001062
  1394+  index uns(10) const;                                                                                              4001063
  1395+end-pr;                                                                                                             4001064
  1396+                                                                                                                    4001065
  1397+///                                                                                                                 4001066
  1398+// Get integer entry                                                                                                4001067
  1399+//                                                                                                                  4001068
  1400+// Returns an integer list entry specified by the passed index.                                                     4001069
  1401+//                                                                                                                  4001070
  1402+// @author Mihael Schmidt                                                                                           4001071
  1403+// @date   21.09.2008                                                                                               4001072
  1404+//                                                                                                                  4001073
  1405+// @param Pointer to the list                                                                                       4001074
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     28
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1406+// @param List position                                                                                             4001075
  1407+//                                                                                                                  4001076
  1408+// @return Integer value of the specified position                                                                  4001077
  1409+///                                                                                                                 4001078
  1410+dcl-pr list_getInteger int(10) extproc('list_getInteger');                                                          4001079
  1411+  list pointer const;                                                                                               4001080
  1412+  index uns(10) const;                                                                                              4001081
  1413+end-pr;                                                                                                             4001082
  1414+                                                                                                                    4001083
  1415+///                                                                                                                 4001084
  1416+// Get short entry                                                                                                  4001085
  1417+//                                                                                                                  4001086
  1418+// Returns a short list entry specified by the passed index.                                                        4001087
  1419+//                                                                                                                  4001088
  1420+// @author Mihael Schmidt                                                                                           4001089
  1421+// @date   21.09.2008                                                                                               4001090
  1422+//                                                                                                                  4001091
  1423+// @param Pointer to the list                                                                                       4001092
  1424+// @param List position                                                                                             4001093
  1425+//                                                                                                                  4001094
  1426+// @return Short value of the specified position                                                                    4001095
  1427+///                                                                                                                 4001096
  1428+dcl-pr list_getShort int(5) extproc('list_getShort');                                                               4001097
  1429+  list pointer const;                                                                                               4001098
  1430+  index uns(10) const;                                                                                              4001099
  1431+end-pr;                                                                                                             4001100
  1432+                                                                                                                    4001101
  1433+///                                                                                                                 4001102
  1434+// Get long entry                                                                                                   4001103
  1435+//                                                                                                                  4001104
  1436+// Returns a long list entry specified by the passed index.                                                         4001105
  1437+//                                                                                                                  4001106
  1438+// @author Mihael Schmidt                                                                                           4001107
  1439+// @date   21.09.2008                                                                                               4001108
  1440+//                                                                                                                  4001109
  1441+// @parem Pointer to the list                                                                                       4001110
  1442+// @param List position                                                                                             4001111
  1443+//                                                                                                                  4001112
  1444+// @return Long value of the specified position                                                                     4001113
  1445+///                                                                                                                 4001114
  1446+dcl-pr list_getLong int(20) extproc('list_getLong');                                                                4001115
  1447+  list pointer const;                                                                                               4001116
  1448+  index uns(10) const;                                                                                              4001117
  1449+end-pr;                                                                                                             4001118
  1450+                                                                                                                    4001119
  1451+///                                                                                                                 4001120
  1452+// Get float entry                                                                                                  4001121
  1453+//                                                                                                                  4001122
  1454+// Returns a float list entry specified by the passed index.                                                        4001123
  1455+//                                                                                                                  4001124
  1456+// @author Mihael Schmidt                                                                                           4001125
  1457+// @date   21.09.2008                                                                                               4001126
  1458+//                                                                                                                  4001127
  1459+// @param Pointer to the list                                                                                       4001128
  1460+// @param List position                                                                                             4001129
  1461+//                                                                                                                  4001130
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     29
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1462+// @return Float value of the specified position                                                                    4001131
  1463+///                                                                                                                 4001132
  1464+dcl-pr list_getFloat float(4) extproc('list_getFloat');                                                             4001133
  1465+  list pointer const;                                                                                               4001134
  1466+  index uns(10) const;                                                                                              4001135
  1467+end-pr;                                                                                                             4001136
  1468+                                                                                                                    4001137
  1469+///                                                                                                                 4001138
  1470+// Get double entry                                                                                                 4001139
  1471+//                                                                                                                  4001140
  1472+// Returns a double list entry specified by the passed index.                                                       4001141
  1473+//                                                                                                                  4001142
  1474+// @author Mihael Schmidt                                                                                           4001143
  1475+// @date   21.09.2008                                                                                               4001144
  1476+//                                                                                                                  4001145
  1477+// @param Pointer to the list                                                                                       4001146
  1478+// @param List position                                                                                             4001147
  1479+//                                                                                                                  4001148
  1480+// @return Double value of the specified position                                                                   4001149
  1481+///                                                                                                                 4001150
  1482+dcl-pr list_getDouble float(8) extproc('list_getDouble');                                                           4001151
  1483+  list pointer const;                                                                                               4001152
  1484+  index uns(10) const;                                                                                              4001153
  1485+end-pr;                                                                                                             4001154
  1486+                                                                                                                    4001155
  1487+///                                                                                                                 4001156
  1488+// Get boolean entry                                                                                                4001157
  1489+//                                                                                                                  4001158
  1490+// Returns a boolean list entry specified by the passed index.                                                      4001159
  1491+//                                                                                                                  4001160
  1492+// @author Mihael Schmidt                                                                                           4001161
  1493+// @date   21.09.2008                                                                                               4001162
  1494+//                                                                                                                  4001163
  1495+// @param Pointer to the list                                                                                       4001164
  1496+// @param List position                                                                                             4001165
  1497+//                                                                                                                  4001166
  1498+// @return Boolean value of the specified position                                                                  4001167
  1499+///                                                                                                                 4001168
  1500+dcl-pr list_getBoolean ind extproc('list_getBoolean');                                                              4001169
  1501+  list pointer const;                                                                                               4001170
  1502+  index uns(10) const;                                                                                              4001171
  1503+end-pr;                                                                                                             4001172
  1504+                                                                                                                    4001173
  1505+///                                                                                                                 4001174
  1506+// Get packed decimal entry                                                                                         4001175
  1507+//                                                                                                                  4001176
  1508+// Returns a packed decimal list entry specified by the passed index.                                               4001177
  1509+//                                                                                                                  4001178
  1510+// @author Mihael Schmidt                                                                                           4001179
  1511+// @date   21.09.2008                                                                                               4001180
  1512+//                                                                                                                  4001181
  1513+// @param Pointer to the list                                                                                       4001182
  1514+// @param List position                                                                                             4001183
  1515+//                                                                                                                  4001184
  1516+// @return Packed decimal value of the specified position                                                           4001185
  1517+///                                                                                                                 4001186
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     30
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1518+dcl-pr list_getDecimal packed(15 : 5) extproc('list_getDecimal');                                                   4001187
  1519+  list pointer const;                                                                                               4001188
  1520+  index uns(10) const;                                                                                              4001189
  1521+end-pr;                                                                                                             4001190
  1522+                                                                                                                    4001191
  1523+///                                                                                                                 4001192
  1524+// Get date entry                                                                                                   4001193
  1525+//                                                                                                                  4001194
  1526+// Returns a date list entry specified by the passed index.                                                         4001195
  1527+//                                                                                                                  4001196
  1528+// @author Mihael Schmidt                                                                                           4001197
  1529+// @date   21.09.2008                                                                                               4001198
  1530+//                                                                                                                  4001199
  1531+// @param Pointer to the list                                                                                       4001200
  1532+// @param List position                                                                                             4001201
  1533+//                                                                                                                  4001202
  1534+// @return Date value of the specified position                                                                     4001203
  1535+///                                                                                                                 4001204
  1536+dcl-pr list_getDate date extproc('list_getDate');                                                                   4001205
  1537+  list pointer const;                                                                                               4001206
  1538+  index uns(10) const;                                                                                              4001207
  1539+end-pr;                                                                                                             4001208
  1540+                                                                                                                    4001209
  1541+///                                                                                                                 4001210
  1542+// Sort list                                                                                                        4001211
  1543+//                                                                                                                  4001212
  1544+// Sorts the list with the passed procedure.                                                                        4001213
  1545+//                                                                                                                  4001214
  1546+// <br>                                                                                                             4001215
  1547+//                                                                                                                  4001216
  1548+// The compare procedure compares two values of the list and returns                                                4001217
  1549+// <ul>                                                                                                             4001218
  1550+//   <li>0 if the entries are equal</li>                                                                            4001219
  1551+//   <li>&lt; 0 if the first entry should be placed above the second entry</li>                                     4001220
  1552+//   <li>&gt; 0 if the second entry should be placed above the first entry</li>                                     4001221
  1553+// </ul>                                                                                                            4001222
  1554+//                                                                                                                  4001223
  1555+// <div>                                                                                                            4001224
  1556+// dcl-pr compare int(10); <br>                                                                                     4001225
  1557+// &nbsp;&nbsp;  value1 pointer const; <br>                                                                         4001226
  1558+// &nbsp;&nbsp;  length1 int(10) const; <br>                                                                        4001227
  1559+// &nbsp;&nbsp;  value2 pointer const; <br>                                                                         4001228
  1560+// &nbsp;&nbsp;  length2 int(10) const; <br>                                                                        4001229
  1561+// end-pr;                                                                                                          4001230
  1562+// </div>                                                                                                           4001231
  1563+//                                                                                                                  4001232
  1564+// A value passed to the compare function can also be <code>*null</code>.                                           4001233
  1565+//                                                                                                                  4001234
  1566+// @param Pointer to the list                                                                                       4001235
  1567+// @param Procedure pointer for comparing values to the sort the list                                               4001236
  1568+///                                                                                                                 4001237
  1569+dcl-pr list_sort extproc('list_sort');                                                                              4001238
  1570+  list pointer const;                                                                                               4001239
  1571+  compareProcedure pointer(*proc) const options(*nopass);                                                           4001240
  1572+end-pr;                                                                                                             4001241
  1573+                                                                                                                    4001242
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     31
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1574+///                                                                                                                 4001243
  1575+// Remove range of elements                                                                                         4001244
  1576+//                                                                                                                  4001245
  1577+// Removes a number of elements from the list.                                                                      4001246
  1578+//                                                                                                                  4001247
  1579+// @param Pointer to the list                                                                                       4001248
  1580+// @param Starting index                                                                                            4001249
  1581+// @param Number of elements to remove                                                                              4001250
  1582+//                                                                                                                  4001251
  1583+// @throws CPF9898 Position out of bounds                                                                           4001252
  1584+///                                                                                                                 4001253
  1585+dcl-pr list_removeRange extproc('list_removeRange');                                                                4001254
  1586+  list pointer const;                                                                                               4001255
  1587+  index uns(10) const;                                                                                              4001256
  1588+  numberElements uns(10) const;                                                                                     4001257
  1589+end-pr;                                                                                                             4001258
  1590+                                                                                                                    4001259
  1591+///                                                                                                                 4001260
  1592+// Merge lists                                                                                                      4001261
  1593+//                                                                                                                  4001262
  1594+// Merges the elements of second list with the first list. Elements which                                           4001263
  1595+// are already in the first list are not added by default (see third parameter).                                    4001264
  1596+//                                                                                                                  4001265
  1597+// @author Mihael Schmidt                                                                                           4001266
  1598+// @date   15.12.2009                                                                                               4001267
  1599+//                                                                                                                  4001268
  1600+// @param Destination list                                                                                          4001269
  1601+// @param Source list                                                                                               4001270
  1602+// @param Skip duplicates (default: *off)                                                                           4001271
  1603+///                                                                                                                 4001272
  1604+dcl-pr list_merge extproc('list_merge');                                                                            4001273
  1605+  destList pointer const;                                                                                           4001274
  1606+  sourceList pointer const;                                                                                         4001275
  1607+  skipDuplicates ind const options(*nopass);                                                                        4001276
  1608+end-pr;                                                                                                             4001277
  1609+                                                                                                                    4001278
  1610+/endif                                                                                                              4001279
  1611+                                                                                                                    4001280
  1612+/copy 'llist_so_h.rpgle'                                                                                            4001281
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  llist_so_+                                                   *                     5
        * External name  . . . . . . :  /home/mihael/include/llist/llist_so_h.rpgle                  *                     5
        * Last change  . . . . . . . :  03/29/20  08:30:06                                           *                     5
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1613+**FREE                                                                                                              5000001
  1614+                                                                                                                    5000002
  1615+///                                                                                                                 5000003
  1616+// Linked List : Sorting Algorithms                                                                                 5000004
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     32
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1617+//                                                                                                                  5000005
  1618+// @author Mihael Schmidt                                                                                           5000006
  1619+// @date   2009-02-17                                                                                               5000007
  1620+// @project Linked List                                                                                             5000008
  1621+///                                                                                                                 5000009
  1622+                                                                                                                    5000010
  1623+/if not defined(LLIST_SORT)                                                                                         5000011
  1624+/define LLIST_SORT                                                                                                  5000012
  1625+                                                                                                                    5000013
  1626+//------------------------------------------------------------------------------                                    5000014
  1627+//                          The MIT License (MIT)                                                                   5000015
  1628+//                                                                                                                  5000016
  1629+// Copyright (c) 2017 Mihael Schmidt                                                                                5000017
  1630+//                                                                                                                  5000018
  1631+// Permission is hereby granted, free of charge, to any person obtaining a copy                                     5000019
  1632+// of this software and associated documentation files (the "Software"), to deal                                    5000020
  1633+// in the Software without restriction, including without limitation the rights                                     5000021
  1634+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                        5000022
  1635+// copies of the Software, and to permit persons to whom the Software is                                            5000023
  1636+// furnished to do so, subject to the following conditions:                                                         5000024
  1637+//                                                                                                                  5000025
  1638+// The above copyright notice and this permission notice shall be included in                                       5000026
  1639+// all copies or substantial portions of the Software.                                                              5000027
  1640+//                                                                                                                  5000028
  1641+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                       5000029
  1642+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                         5000030
  1643+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                      5000031
  1644+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                           5000032
  1645+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                    5000033
  1646+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                    5000034
  1647+// SOFTWARE.                                                                                                        5000035
  1648+//------------------------------------------------------------------------------                                    5000036
  1649+                                                                                                                    5000037
  1650+                                                                                                                    5000038
  1651+///                                                                                                                 5000039
  1652+// Insertion sort                                                                                                   5000040
  1653+//                                                                                                                  5000041
  1654+// The list will be sorted inline. If no compare procedure has been passed the                                      5000042
  1655+// list will by sorted by bytes using <em>memcmp</em>.                                                              5000043
  1656+//                                                                                                                  5000044
  1657+// @author Mihael Schmidt                                                                                           5000045
  1658+// @date   2009-02-17                                                                                               5000046
  1659+//                                                                                                                  5000047
  1660+// @param Pointer to the list                                                                                       5000048
  1661+// @param Pointer to the compare procedure (optional)                                                               5000049
  1662+///                                                                                                                 5000050
  1663+dcl-pr list_sort_insertionSort extproc('list_sort_insertionSort');                                                  5000051
  1664+  list pointer const;                                                                                               5000052
  1665+  compare pointer(*proc) const options(*nopass);                                                                    5000053
  1666+end-pr;                                                                                                             5000054
  1667+                                                                                                                    5000055
  1668+/endif                                                                                                              5000056
  1669 /include 'message/message_h.rpgle'                                                                                   000037
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     33
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  message_h+                                                   *                     6
        * External name  . . . . . . :  /home/mihael/include/message/message_h.rpgle                 *                     6
        * Last change  . . . . . . . :  04/14/21  19:21:26                                           *                     6
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1670+**FREE                                                                                                              6000001
  1671+                                                                                                                    6000002
  1672+/if not defined (MESSAGE)                                                                                           6000003
  1673+/define MESSAGE                                                                                                     6000004
  1674+                                                                                                                    6000005
  1675+///                                                                                                                 6000006
  1676+// Messages                                                                                                         6000007
  1677+//                                                                                                                  6000008
  1678+// Wrapper for OS message API for making it easier to send and receive                                              6000009
  1679+// program messages.                                                                                                6000010
  1680+//                                                                                                                  6000011
  1681+// This module has been split up from the RPGUnit framework so that other                                           6000012
  1682+// applications can also use it.                                                                                    6000013
  1683+//                                                                                                                  6000014
  1684+// Refactored by Mihael Schmidt.                                                                                    6000015
  1685+//                                                                                                                  6000016
  1686+// @link https://bitbucket.org/m1hael/message Project Website                                                       6000017
  1687+// @link http://rpgunit.sourceforge.net RPGUnit                                                                     6000018
  1688+//                                                                                                                  6000019
  1689+// @project Message                                                                                                 6000020
  1690+///                                                                                                                 6000021
  1691+                                                                                                                    6000022
  1692+//                                                                                                                  6000023
  1693+// Constants                                                                                                        6000024
  1694+//                                                                                                                  6000025
  1695+                                                                                                                    6000026
  1696+// Call stack levels.                                                                                               6000027
  1697+dcl-c MESSAGE_ONE_CALL_STACK_LEVEL_ABOVE 1;                                                                         6000028
  1698+dcl-c MESSAGE_TWO_CALL_STACK_LEVEL_ABOVE 2;                                                                         6000029
  1699+                                                                                                                    6000030
  1700+// To resend the last new escape message                                                                            6000031
  1701+dcl-c MESSAGE_LAST_NEW_ESCAPE_MESSAGE const(*blank);                                                                6000032
  1702+                                                                                                                    6000033
  1703+// Call stack entry (current call stack entry)                                                                      6000034
  1704+dcl-c MESSAGE_CURRENT_CALL_STACK_ENTRY '*';                                                                         6000035
  1705+// Control boundary                                                                                                 6000036
  1706+dcl-c MESSAGE_CONTROL_BOUNDARY '*CTLBDY';                                                                           6000037
  1707+                                                                                                                    6000038
  1708+                                                                                                                    6000039
  1709+//----------------------------------------------------------------------                                            6000040
  1710+// Message Data Structures (Templates)                                                                              6000041
  1711+//----------------------------------------------------------------------                                            6000042
  1712+dcl-ds messageInfo_t qualified template;                                                                            6000043
  1713+  messageId char(7);                                                                                                6000044
  1714+  message char(256);                                                                                                6000045
  1715+  // Sending Program Name                                                                                           6000046
  1716+  programName char(12);                                                                                             6000047
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     34
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1717+  // Sending Procedure Name                                                                                         6000048
  1718+  procedureName char(256);                                                                                          6000049
  1719+  // Sending Statement Number                                                                                       6000050
  1720+  statement char(10);                                                                                               6000051
  1721+end-ds;                                                                                                             6000052
  1722+                                                                                                                    6000053
  1723+// Program Message                                                                                                  6000054
  1724+dcl-ds message_t qualified template;                                                                                6000055
  1725+  id char(7);                                                                                                       6000056
  1726+  text varchar(254);                                                                                                6000057
  1727+  replacementData varchar(254);                                                                                     6000058
  1728+  sender likeds(messageSender_t);                                                                                   6000059
  1729+end-ds;                                                                                                             6000060
  1730+                                                                                                                    6000061
  1731+// Program Message Sender                                                                                           6000062
  1732+dcl-ds messageSender_t qualified template;                                                                          6000063
  1733+  programName char(12);                                                                                             6000064
  1734+  procedureName char(256);                                                                                          6000065
  1735+  statement char(6);                                                                                                6000066
  1736+end-ds;                                                                                                             6000067
  1737+                                                                                                                    6000068
  1738+                                                                                                                    6000069
  1739+//-------------------------------------------------------------------------------------------------                 6000070
  1740+// Message Prototypes                                                                                               6000071
  1741+//-------------------------------------------------------------------------------------------------                 6000072
  1742+                                                                                                                    6000073
  1743+///                                                                                                                 6000074
  1744+// Receive exception message                                                                                        6000075
  1745+//                                                                                                                  6000076
  1746+// @return message info                                                                                             6000077
  1747+///                                                                                                                 6000078
  1748+dcl-pr message_receiveMessageInfo likeds(messageInfo_t) extproc(*dclcase) end-pr;                                   6000079
  1749+                                                                                                                    6000080
  1750+///                                                                                                                 6000081
  1751+// Receive a program message replacement data                                                                       6000082
  1752+//                                                                                                                  6000083
  1753+// @param message type (*ANY, *COMP, *EXCP, ...)                                                                    6000084
  1754+// @return message data                                                                                             6000085
  1755+///                                                                                                                 6000086
  1756+dcl-pr message_receiveMessageData char(256) extproc(*dclcase);                                                      6000087
  1757+  type char(10) const;                                                                                              6000088
  1758+end-pr;                                                                                                             6000089
  1759+                                                                                                                    6000090
  1760+///                                                                                                                 6000091
  1761+// Receive a program message text                                                                                   6000092
  1762+//                                                                                                                  6000093
  1763+// @param message type (*ANY, *COMP, *EXCP, ...)                                                                    6000094
  1764+// @return message text                                                                                             6000095
  1765+///                                                                                                                 6000096
  1766+dcl-pr message_receiveMessageText char(256) extproc(*dclcase);                                                      6000097
  1767+  type char(10) const;                                                                                              6000098
  1768+end-pr;                                                                                                             6000099
  1769+                                                                                                                    6000100
  1770+///                                                                                                                 6000101
  1771+// Receive a program message                                                                                        6000102
  1772+//                                                                                                                  6000103
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     35
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1773+// If the message was sent to a procedure above in the call stack,                                                  6000104
  1774+// indicate how many level above it is with the callStackLevelAbove                                                 6000105
  1775+// parameter.                                                                                                       6000106
  1776+//                                                                                                                  6000107
  1777+// @param message type (*ANY, *COMP, *EXCP, ...)                                                                    6000108
  1778+// @param call stack level above the current stack entry                                                            6000109
  1779+// @param message key (*TOP, ...)                                                                                   6000110
  1780+// @return message                                                                                                  6000111
  1781+///                                                                                                                 6000112
  1782+dcl-pr message_receiveMessage likeds(message_t) extproc(*dclcase);                                                  6000113
  1783+  type char(10) const;                                                                                              6000114
  1784+  callStackLevelAbove int(10) const options(*omit : *nopass);                                                       6000115
  1785+  messageKey char(4) const options(*nopass);                                                                        6000116
  1786+end-pr;                                                                                                             6000117
  1787+                                                                                                                    6000118
  1788+///                                                                                                                 6000119
  1789+// Resend an escape message                                                                                         6000120
  1790+//                                                                                                                  6000121
  1791+// Resend an escape message that was monitored in a monitor block.                                                  6000122
  1792+// See API <a href="https://www.ibm.com/docs/en/i/7.4?topic=ssw_ibm_i_74/apis/QMHRSNEM.htm">                        6000123
  1793+// QMHRSNEM - Resend Escape Message</a>.                                                                            6000124
  1794+//                                                                                                                  6000125
  1795+// @param message key                                                                                               6000126
  1796+// @param error code                                                                                                6000127
  1797+///                                                                                                                 6000128
  1798+dcl-pr message_resendEscapeMessage extpgm('QMHRSNEM');                                                              6000129
  1799+  messageKey char(4) const;                                                                                         6000130
  1800+  errorCode char(32565) const options(*varsize) noopt;                                                              6000131
  1801+end-pr;                                                                                                             6000132
  1802+                                                                                                                    6000133
  1803+///                                                                                                                 6000134
  1804+// Send completion message                                                                                          6000135
  1805+//                                                                                                                  6000136
  1806+// @param message                                                                                                   6000137
  1807+// @param call stack level above the current stack entry                                                            6000138
  1808+///                                                                                                                 6000139
  1809+dcl-pr message_sendCompletionMessage extproc(*dclcase);                                                             6000140
  1810+  message char(256) const;                                                                                          6000141
  1811+  callStackLevelAbove int(10) const options(*nopass);                                                               6000142
  1812+end-pr;                                                                                                             6000143
  1813+                                                                                                                    6000144
  1814+///                                                                                                                 6000145
  1815+// Send escape message                                                                                              6000146
  1816+//                                                                                                                  6000147
  1817+// @param message                                                                                                   6000148
  1818+// @param call stack level above the current stack entry                                                            6000149
  1819+///                                                                                                                 6000150
  1820+dcl-pr message_sendEscapeMessage extproc(*dclcase);                                                                 6000151
  1821+  message char(256) const;                                                                                          6000152
  1822+  callStackLevel int(10) const options(*nopass);                                                                    6000153
  1823+end-pr;                                                                                                             6000154
  1824+                                                                                                                    6000155
  1825+///                                                                                                                 6000156
  1826+// Send escape message to caller                                                                                    6000157
  1827+//                                                                                                                  6000158
  1828+// Send an escape message to the procedure's caller.                                                                6000159
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     36
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1829+//                                                                                                                  6000160
  1830+// @param message                                                                                                   6000161
  1831+///                                                                                                                 6000162
  1832+dcl-pr message_sendEscapeMessageToCaller extproc(*dclcase);                                                         6000163
  1833+  message char(256) const;                                                                                          6000164
  1834+end-pr;                                                                                                             6000165
  1835+                                                                                                                    6000166
  1836+///                                                                                                                 6000167
  1837+// Send escape message above control boundary                                                                       6000168
  1838+//                                                                                                                  6000169
  1839+// Send an escape message to the call stack entry just above the control boundary.                                  6000170
  1840+// Useful to terminate a program.                                                                                   6000171
  1841+//                                                                                                                  6000172
  1842+// @param message                                                                                                   6000173
  1843+///                                                                                                                 6000174
  1844+dcl-pr message_sendEscapeMessageAboveControlBody extproc(*dclcase);                                                 6000175
  1845+  message char(256) const;                                                                                          6000176
  1846+end-pr;                                                                                                             6000177
  1847+                                                                                                                    6000178
  1848+///                                                                                                                 6000179
  1849+// Send info message                                                                                                6000180
  1850+//                                                                                                                  6000181
  1851+// Send an information message.                                                                                     6000182
  1852+//                                                                                                                  6000183
  1853+// @param message                                                                                                   6000184
  1854+// @param call stack level above the current stack entry                                                            6000185
  1855+///                                                                                                                 6000186
  1856+dcl-pr message_sendInfoMessage extproc(*dclcase);                                                                   6000187
  1857+  message char(256) const;                                                                                          6000188
  1858+  callStackLevelAbove int(10) const options(*nopass);                                                               6000189
  1859+end-pr;                                                                                                             6000190
  1860+                                                                                                                    6000191
  1861+///                                                                                                                 6000192
  1862+// Send status message                                                                                              6000193
  1863+//                                                                                                                  6000194
  1864+// @param message                                                                                                   6000195
  1865+///                                                                                                                 6000196
  1866+dcl-pr message_sendStatusMessage extproc(*dclcase);                                                                 6000197
  1867+  message char(256) const;                                                                                          6000198
  1868+end-pr;                                                                                                             6000199
  1869+                                                                                                                    6000200
  1870+///                                                                                                                 6000201
  1871+// Send info message                                                                                                6000202
  1872+//                                                                                                                  6000203
  1873+// Send an information message.                                                                                     6000204
  1874+//                                                                                                                  6000205
  1875+// @param message                                                                                                   6000206
  1876+///                                                                                                                 6000207
  1877+dcl-pr message_info extproc(*dclcase);                                                                              6000208
  1878+  message char(256) const;                                                                                          6000209
  1879+end-pr;                                                                                                             6000210
  1880+                                                                                                                    6000211
  1881+///                                                                                                                 6000212
  1882+// Send status message                                                                                              6000213
  1883+//                                                                                                                  6000214
  1884+// @param message                                                                                                   6000215
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     37
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1885+///                                                                                                                 6000216
  1886+dcl-pr message_status extproc(*dclcase);                                                                            6000217
  1887+  message char(256) const;                                                                                          6000218
  1888+end-pr;                                                                                                             6000219
  1889+                                                                                                                    6000220
  1890+///                                                                                                                 6000221
  1891+// Send completion message                                                                                          6000222
  1892+//                                                                                                                  6000223
  1893+// @param message                                                                                                   6000224
  1894+///                                                                                                                 6000225
  1895+dcl-pr message_completion extproc(*dclcase);                                                                        6000226
  1896+  message char(256) const;                                                                                          6000227
  1897+end-pr;                                                                                                             6000228
  1898+                                                                                                                    6000229
  1899+///                                                                                                                 6000230
  1900+// Send escape message above control boundary                                                                       6000231
  1901+//                                                                                                                  6000232
  1902+// Send an escape message to the call stack entry just above the control boundary.                                  6000233
  1903+// Useful to terminate a program.                                                                                   6000234
  1904+//                                                                                                                  6000235
  1905+// @param message                                                                                                   6000236
  1906+// @param call stack level above the current stack entry                                                            6000237
  1907+///                                                                                                                 6000238
  1908+dcl-pr message_escape extproc(*dclcase);                                                                            6000239
  1909+  message char(256) const;                                                                                          6000240
  1910+  callStackLevel int(10) const options(*nopass);                                                                    6000241
  1911+end-pr;                                                                                                             6000242
  1912+                                                                                                                    6000243
  1913+///                                                                                                                 6000244
  1914+// Send info message from message file                                                                              6000245
  1915+//                                                                                                                  6000246
  1916+// Sends specified message from the message file as an info message.                                                6000247
  1917+//                                                                                                                  6000248
  1918+// @param library (default *LIBL)                                                                                   6000249
  1919+// @param message file name                                                                                         6000250
  1920+// @param message Id                                                                                                6000251
  1921+// @param message (optional)                                                                                        6000252
  1922+// @param call stack level above the current stack entry                                                            6000253
  1923+///                                                                                                                 6000254
  1924+dcl-pr message_file_info extproc(*dclcase);                                                                         6000255
  1925+  library char(10) const options(*omit);                                                                            6000256
  1926+  msgfile char(10) const;                                                                                           6000257
  1927+  messageId char(7) const;                                                                                          6000258
  1928+  message char(1024) const options(*omit : *nopass);                                                                6000259
  1929+  callStackLevelAbove int(10) const options(*nopass);                                                               6000260
  1930+end-pr;                                                                                                             6000261
  1931+                                                                                                                    6000262
  1932+///                                                                                                                 6000263
  1933+// Send escape message from message file                                                                            6000264
  1934+//                                                                                                                  6000265
  1935+// Sends specified message from the message file as an escape message.                                              6000266
  1936+//                                                                                                                  6000267
  1937+// @param library (default *LIBL)                                                                                   6000268
  1938+// @param message file name                                                                                         6000269
  1939+// @param message Id                                                                                                6000270
  1940+// @param message (optional)                                                                                        6000271
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     38
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1941+// @param call stack level above the current stack entry                                                            6000272
  1942+///                                                                                                                 6000273
  1943+dcl-pr message_file_escape extproc(*dclcase);                                                                       6000274
  1944+  library char(10) const options(*omit);                                                                            6000275
  1945+  msgfile char(10) const;                                                                                           6000276
  1946+  messageId char(7) const;                                                                                          6000277
  1947+  message char(1024) const options(*omit : *nopass);                                                                6000278
  1948+  callStackLevelAbove int(10) const options(*nopass);                                                               6000279
  1949+end-pr;                                                                                                             6000280
  1950+                                                                                                                    6000281
  1951+///                                                                                                                 6000282
  1952+// Send diagnostic message                                                                                          6000283
  1953+//                                                                                                                  6000284
  1954+// @param message                                                                                                   6000285
  1955+///                                                                                                                 6000286
  1956+dcl-pr message_diagnostic extproc(*dclcase);                                                                        6000287
  1957+  message char(256) const;                                                                                          6000288
  1958+end-pr;                                                                                                             6000289
  1959+                                                                                                                    6000290
  1960+/endif                                                                                                              6000291
  1961 /include 'mimetype.rpginc'                                                                                           000038
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  mimetype.+                                                   *                     7
        * External name  . . . . . . :  ../include/mimetype.rpginc                                   *                     7
        * Last change  . . . . . . . :  05/20/21  09:15:17                                           *                     7
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1962+**FREE                                                                                                              7000001
  1963+                                                                                                                    7000002
  1964+/if defined (STOMP_MIMETYPE)                                                                                        7000003
            LINES EXCLUDED: 1
  1965+/endif                                                                                                              7000005
  1966+                                                                                                                    7000006
  1967+/define STOMP_MIMETYPE                                                                                              7000007
  1968+                                                                                                                    7000008
  1969+                                                                                                                    7000009
  1970+dcl-ds stomp_mime_t qualified template;                                                                             7000010
  1971+  type varchar(100);                                                                                                7000011
  1972+  subtype varchar(100);                                                                                             7000012
  1973+  charset varchar(100);                                                                                             7000013
  1974+end-ds;                                                                                                             7000014
  1975+                                                                                                                    7000015
  1976+                                                                                                                    7000016
  1977+dcl-pr stomp_mime_parse likeds(stomp_mime_t) extproc(*dclcase);                                                     7000017
  1978+  mimeType char(100) const;                                                                                         7000018
  1979+end-pr;                                                                                                             7000019
  1980+                                                                                                                    7000020
  1981+dcl-pr stomp_mime_toString varchar(1000) extproc(*dclcase);                                                         7000021
  1982+  mime likeds(stomp_mime_t) const;                                                                                  7000022
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     39
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1983+end-pr;                                                                                                             7000023
  1984+                                                                                                                    7000024
  1985+dcl-pr stomp_mime_charsetToCcsid int(10) extproc(*dclcase);                                                         7000025
  1986+  charset varchar(100) const;                                                                                       7000026
  1987+end-pr;                                                                                                             7000027
  1988 /include 'qusec.rpginc'                                                                                              000039
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  qusec.rpg+                                                   *                     8
        * External name  . . . . . . :  ../include/qusec.rpginc                                      *                     8
        * Last change  . . . . . . . :  05/20/21  19:39:58                                           *                     8
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1989+**FREE                                                                                                              8000001
  1990+                                                                                                                    8000002
  1991+/if not defined (QUSEC_T)                                                                                           8000003
  1992+/define QUSEC_T                                                                                                     8000004
  1993+                                                                                                                    8000005
  1994+dcl-ds qusec_t qualified template;                                                                                  8000006
  1995+  bytesProvided int(10);                                                                                            8000007
  1996+  bytesAvailable int(10);                                                                                           8000008
  1997+  exceptionId char(7);                                                                                              8000009
  1998+  reserved char(1);                                                                                                 8000010
  1999+end-ds;                                                                                                             8000011
  2000+                                                                                                                    8000012
  2001+/endif                                                                                                              8000013
  2002 /include 'stomp_h.rpginc'                                                                                            000040
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stomp_h.r+                                                   *                     9
        * External name  . . . . . . :  ../include/stomp_h.rpginc                                    *                     9
        * Last change  . . . . . . . :  06/01/21  19:40:10                                           *                     9
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2003+**FREE                                                                                                              9000001
  2004+                                                                                                                    9000002
  2005+/if defined(STOMP_H)                                                                                                9000003
            LINES EXCLUDED: 1
  2006+/endif                                                                                                              9000005
  2007+                                                                                                                    9000006
  2008+/define STOMP_H                                                                                                     9000007
  2009+                                                                                                                    9000008
  2010+                                                                                                                    9000009
  2011+///                                                                                                                 9000010
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     40
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2012+// STOMP Client : Main Module                                                                                       9000011
  2013+//                                                                                                                  9000012
  2014+// STOMP is a simple text protocol for transporting messages. It can be                                             9000013
  2015+// used to talk to a messaging system like ActiveMQ or RabbitMQ. For                                                9000014
  2016+// further details on STOMP see https://stomp.github.io.                                                            9000015
  2017+// <br><br>                                                                                                         9000016
  2018+// The networking is done via plain socket programming. The sockets will                                            9000017
  2019+// act in non-blocking mode.                                                                                        9000018
  2020+// <br><br>                                                                                                         9000019
  2021+// A typical workflow of a stomp session sending a message looks like this:                                         9000020
  2022+// <ol>                                                                                                             9000021
  2023+//   <li>create stomp client instance (stomp_create)</li>                                                           9000022
  2024+//   <li>open socket connection (stomp_open)</li>                                                                   9000023
  2025+//   <li>connect to/register at messaging system (stomp_command_connect)</li>                                       9000024
  2026+//   <li>send message(s) (stomp_command_send)</li>                                                                  9000025
  2027+//   <li>disconnect from messaging system (stomp_command_disconnect)</li>                                           9000026
  2028+//   <li>close socket connection (stomp_close)</li>                                                                 9000027
  2029+//   <li>clean up resources (stomp_finalize)</li>                                                                   9000028
  2030+// </ol>                                                                                                            9000029
  2031+//                                                                                                                  9000030
  2032+// @author Mihael Schmidt                                                                                           9000031
  2033+// @date   21.05.2021                                                                                               9000032
  2034+// @project STOMP                                                                                                   9000033
  2035+// @version 2.0                                                                                                     9000034
  2036+// @link https://stomp.github.io                                                                                    9000035
  2037+// @link https://bitbucket.org/m1hael/stomp STOMP client                                                            9000036
  2038+///                                                                                                                 9000037
  2039+                                                                                                                    9000038
  2040+                                                                                                                    9000039
  2041+//                          The MIT License (MIT)                                                                   9000040
  2042+//                                                                                                                  9000041
  2043+// Copyright (c) 2021 Mihael Schmidt                                                                                9000042
  2044+//                                                                                                                  9000043
  2045+// Permission is hereby granted, free of charge, to any person obtaining a copy                                     9000044
  2046+// of this software and associated documentation files (the "Software"), to deal                                    9000045
  2047+// in the Software without restriction, including without limitation the rights                                     9000046
  2048+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                        9000047
  2049+// copies of the Software, and to permit persons to whom the Software is                                            9000048
  2050+// furnished to do so, subject to the following conditions:                                                         9000049
  2051+//                                                                                                                  9000050
  2052+// The above copyright notice and this permission notice shall be included in                                       9000051
  2053+// all copies or substantial portions of the Software.                                                              9000052
  2054+//                                                                                                                  9000053
  2055+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                       9000054
  2056+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                         9000055
  2057+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                      9000056
  2058+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                           9000057
  2059+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                    9000058
  2060+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                    9000059
  2061+// SOFTWARE.                                                                                                        9000060
  2062+                                                                                                                    9000061
  2063+                                                                                                                    9000062
  2064+//                                                                                                                  9000063
  2065+// Templates                                                                                                        9000064
  2066+//                                                                                                                  9000065
  2067+dcl-s stomp_sessionid_t char(100) template;                                                                         9000066
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     41
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2068+dcl-s stomp_receiptid_t varchar(50) template;                                                                       9000067
  2069+                                                                                                                    9000068
  2070+                                                                                                                    9000069
  2071+//                                                                                                                  9000070
  2072+// Constants                                                                                                        9000071
  2073+//                                                                                                                  9000072
  2074+dcl-c STOMP_ACK_MODE_AUTO %ucs2('auto');                                                                            9000073
  2075+dcl-c STOMP_ACK_MODE_CLIENT %ucs2('client');                                                                        9000074
  2076+dcl-c STOMP_ACK_MODE_CLIENT_INDIVIDUAL %ucs2('client-individual');                                                  9000075
  2077+dcl-c STOMP_OPTION_TIMEOUT 1;                                                                                       9000076
  2078+dcl-c STOMP_OPTION_CLIENT_ID 2;                                                                                     9000077
  2079+dcl-c STOMP_OPTION_ACK 3;                                                                                           9000078
  2080+dcl-c STOMP_OPTION_PERSISTENT 4;                                                                                    9000079
  2081+dcl-c STOMP_OPTION_DURABLE_SUBSCRIBER 5;                                                                            9000080
  2082+dcl-c STOMP_OPTION_CONTENT_TYPE 6;                                                                                  9000081
  2083+dcl-c STOMP_OPTION_CHARSET 7;                                                                                       9000082
  2084+dcl-c STOMP_OPTION_VIRTUAL_HOST 8;                                                                                  9000083
  2085+dcl-c STOMP_MIME_BINARY %ucs2('application/octet-stream');                                                          9000084
  2086+dcl-c STOMP_MIME_TEXT %ucs2('text/plain');                                                                          9000085
  2087+dcl-c STOMP_MIME_HTML %ucs2('text/html');                                                                           9000086
  2088+dcl-c STOMP_MIME_XML %ucs2('application/xml;charset=utf-8');                                                        9000087
  2089+dcl-c STOMP_MIME_JSON %ucs2('application/json;charset=utf-8');                                                      9000088
  2090+dcl-c STOMP_MAX_FRAME_SIZE 1000000;                                                                                 9000089
  2091+dcl-c STOMP_HEARTBEAT_NONE 0;                                                                                       9000090
  2092+                                                                                                                    9000091
  2093+                                                                                                                    9000092
  2094+///                                                                                                                 9000093
  2095+// Create STOMP client instance                                                                                     9000094
  2096+//                                                                                                                  9000095
  2097+// Creates a STOMP client instance.                                                                                 9000096
  2098+//                                                                                                                  9000097
  2099+// @param Hostname or IP (messaging system)                                                                         9000098
  2100+// @param Port                                                                                                      9000099
  2101+//                                                                                                                  9000100
  2102+// @return Pointer to client                                                                                        9000101
  2103+//                                                                                                                  9000102
  2104+// @info The caller must make sure to free all allocated resource                                                   9000103
  2105+//       of the client with the procedure <em>stomp_finalize()</em>.                                                9000104
  2106+///                                                                                                                 9000105
  2107+dcl-pr stomp_create pointer extproc('stomp_create');                                                                9000106
  2108+  host varchar(255) const;                                                                                          9000107
  2109+  port int(10) const;                                                                                               9000108
  2110+end-pr;                                                                                                             9000109
  2111+                                                                                                                    9000110
  2112+///                                                                                                                 9000111
  2113+// Open socket connection                                                                                           9000112
  2114+//                                                                                                                  9000113
  2115+// This procedure just opens a socket connection to the server. It                                                  9000114
  2116+// does not communicate with the message queuing system                                                             9000115
  2117+// (means it does not send any STOMP frames).                                                                       9000116
  2118+//                                                                                                                  9000117
  2119+// @param Client                                                                                                    9000118
  2120+///                                                                                                                 9000119
  2121+dcl-pr stomp_open extproc('stomp_open');                                                                            9000120
  2122+  conn pointer const;                                                                                               9000121
  2123+end-pr;                                                                                                             9000122
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     42
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2124+                                                                                                                    9000123
  2125+///                                                                                                                 9000124
  2126+// Close socket connection                                                                                          9000125
  2127+//                                                                                                                  9000126
  2128+// Closes the network socket. This procedure does not                                                               9000127
  2129+// send a disconnect frame to the message queuing system.                                                           9000128
  2130+//                                                                                                                  9000129
  2131+// @param Client                                                                                                    9000130
  2132+///                                                                                                                 9000131
  2133+dcl-pr stomp_close extproc('stomp_close');                                                                          9000132
  2134+  conn pointer const;                                                                                               9000133
  2135+end-pr;                                                                                                             9000134
  2136+                                                                                                                    9000135
  2137+///                                                                                                                 9000136
  2138+// Dispose client                                                                                                   9000137
  2139+//                                                                                                                  9000138
  2140+// Frees all allocated resources. Any open socket will be closed.                                                   9000139
  2141+// Any allocated resource from a set extension will also be freed.                                                  9000140
  2142+//                                                                                                                  9000141
  2143+// @param Client                                                                                                    9000142
  2144+///                                                                                                                 9000143
  2145+dcl-pr stomp_finalize extproc('stomp_finalize');                                                                    9000144
  2146+  conn pointer;                                                                                                     9000145
  2147+end-pr;                                                                                                             9000146
  2148+                                                                                                                    9000147
  2149+///                                                                                                                 9000148
  2150+// Send frame                                                                                                       9000149
  2151+//                                                                                                                  9000150
  2152+// Sends the passed frame to the connected system. The socket connection                                            9000151
  2153+// must have been established (stomp_open) before sending any frames.                                               9000152
  2154+// <br><br>                                                                                                         9000153
  2155+// If the client is configured for receipts (stomp_useReceipts) then every                                          9000154
  2156+// frame (except the CONNECT frame) will get a <em>receipt</em> header with                                         9000155
  2157+// the timestamp as a value. This procedure will wait until the correct                                             9000156
  2158+// receipt has been received. Any frames in between will be buffered and                                            9000157
  2159+// returned in the correct order by the next call to <em>stomp_receiveFrame()</em>.                                 9000158
  2160+//                                                                                                                  9000159
  2161+// @param Client                                                                                                    9000160
  2162+// @param Frame                                                                                                     9000161
  2163+///                                                                                                                 9000162
  2164+dcl-pr stomp_sendFrame extproc('stomp_sendFrame');                                                                  9000163
  2165+  conn pointer const;                                                                                               9000164
  2166+  frame pointer const;                                                                                              9000165
  2167+end-pr;                                                                                                             9000166
  2168+                                                                                                                    9000167
  2169+///                                                                                                                 9000168
  2170+// Receive frame                                                                                                    9000169
  2171+//                                                                                                                  9000170
  2172+// Receive a frame from the message system. The next incoming socket data                                           9000171
  2173+// will be passed to the frame parser and the resulting frame is returned                                           9000172
  2174+// to the caller. The socket connection must have been established                                                  9000173
  2175+// (stomp_open) before receiving any frames.                                                                        9000174
  2176+// If no frame is received over the socket connection in the timeout time                                           9000175
  2177+// then *null will be returned.                                                                                     9000176
  2178+// <br><br>                                                                                                         9000177
  2179+// Any buffered frame will be returned by this procedure before trying to                                           9000178
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     43
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2180+// receive a frame over the socket connection.                                                                      9000179
  2181+//                                                                                                                  9000180
  2182+// @param Client                                                                                                    9000181
  2183+//                                                                                                                  9000182
  2184+// @return Pointer to frame or *null if no frame could be received in time                                          9000183
  2185+//                                                                                                                  9000184
  2186+// @info The call must make sure to free any resources allocated by the frame                                       9000185
  2187+//       with <em>stomp_frame_finalize()</em>.                                                                      9000186
  2188+//                                                                                                                  9000187
  2189+// @info If ack mode is "client" or "client-individual" then the application                                        9000188
  2190+//       must send an ACK frame (stomp_command_ack) if it processed the frame                                       9000189
  2191+//       successfully or a NACK frame (stomp_command_nack) if the frame could                                       9000190
  2192+//       not be processed. On ack mode "auto" (default) the message queueing                                        9000191
  2193+//       system removes message from the queue as soon as it is send to the                                         9000192
  2194+//       client.                                                                                                    9000193
  2195+///                                                                                                                 9000194
  2196+dcl-pr stomp_receiveFrame pointer extproc('stomp_receiveFrame');                                                    9000195
  2197+  conn pointer const;                                                                                               9000196
  2198+end-pr;                                                                                                             9000197
  2199+                                                                                                                    9000198
  2200+///                                                                                                                 9000199
  2201+// Set timeout                                                                                                      9000200
  2202+//                                                                                                                  9000201
  2203+// Sets the timeout for the socket operations (receive).                                                            9000202
  2204+//                                                                                                                  9000203
  2205+// @param Client                                                                                                    9000204
  2206+// @param Timeout (in ms)                                                                                           9000205
  2207+///                                                                                                                 9000206
  2208+dcl-pr stomp_setTimeout extproc('stomp_setTimeout');                                                                9000207
  2209+  conn pointer const;                                                                                               9000208
  2210+  mseconds int(10) const;                                                                                           9000209
  2211+end-pr;                                                                                                             9000210
  2212+                                                                                                                    9000211
  2213+///                                                                                                                 9000212
  2214+// Set virtual host                                                                                                 9000213
  2215+//                                                                                                                  9000214
  2216+// Sets the virtual host. This is an optional connect header.                                                       9000215
  2217+//                                                                                                                  9000216
  2218+// @param Client                                                                                                    9000217
  2219+// @param Virtual Host                                                                                              9000218
  2220+///                                                                                                                 9000219
  2221+dcl-pr stomp_setVirtualHost extproc('stomp_setVirtualHost');                                                        9000220
  2222+  conn pointer const;                                                                                               9000221
  2223+  virtualHost varchar(100) const;                                                                                   9000222
  2224+end-pr;                                                                                                             9000223
  2225+                                                                                                                    9000224
  2226+///                                                                                                                 9000225
  2227+// Set client id                                                                                                    9000226
  2228+//                                                                                                                  9000227
  2229+// Sets the client id. This value is needed for a durable topic subscription.                                       9000228
  2230+// This id must be unique within the whole system.                                                                  9000229
  2231+//                                                                                                                  9000230
  2232+// @param Client                                                                                                    9000231
  2233+// @param Client id                                                                                                 9000232
  2234+///                                                                                                                 9000233
  2235+dcl-pr stomp_setClientId extproc('stomp_setClientId');                                                              9000234
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     44
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2236+  conn pointer const;                                                                                               9000235
  2237+  clientId varchar(100) const;                                                                                      9000236
  2238+end-pr;                                                                                                             9000237
  2239+                                                                                                                    9000238
  2240+                                                                                                                    9000239
  2241+///                                                                                                                 9000240
  2242+// Set content type                                                                                                 9000241
  2243+//                                                                                                                  9000242
  2244+// Sets the content type which will be added to every message (SEND frame) sent                                     9000243
  2245+// to the server. This can be overwritten on the stomp_command_send call if                                         9000244
  2246+// necessary.                                                                                                       9000245
  2247+//                                                                                                                  9000246
  2248+// @param Client                                                                                                    9000247
  2249+// @param Content type                                                                                              9000248
  2250+///                                                                                                                 9000249
  2251+dcl-pr stomp_setContentType extproc(*dclcase);                                                                      9000250
  2252+  conn pointer const;                                                                                               9000251
  2253+  contentType varchar(100) const;                                                                                   9000252
  2254+end-pr;                                                                                                             9000253
  2255+                                                                                                                    9000254
  2256+                                                                                                                    9000255
  2257+///                                                                                                                 9000256
  2258+// Set ack mode                                                                                                     9000257
  2259+//                                                                                                                  9000258
  2260+// The successful receiving of a message from the messaging system can                                              9000259
  2261+// either be automatically acknowledged or manually. If the client is                                               9000260
  2262+// configured for ack mode <em>auto</em> then the server assumes that                                               9000261
  2263+// every sent message from the server is also received by the client.                                               9000262
  2264+// The client does not need to do anything. If the client is configured                                             9000263
  2265+// for ack mode <em>client</em> then every received message must be                                                 9000264
  2266+// acknowledged by the client by sending in ACK frame. In ack mode                                                  9000265
  2267+// <em>client</em> every not acknowledged frame will be sent again.                                                 9000266
  2268+// <br><br>                                                                                                         9000267
  2269+// Default is ack mode <em>auto</em>.                                                                               9000268
  2270+//                                                                                                                  9000269
  2271+// @param Client                                                                                                    9000270
  2272+// @param Ack mode (STOMP_ACK_MODE_AUTO, STOMP_ACK_MODE_CLIENT, STOMP_ACK_MODE_CLIENT_INDIVIDUAL)                   9000271
  2273+///                                                                                                                 9000272
  2274+dcl-pr stomp_setAckMode extproc('stomp_setAckMode');                                                                9000273
  2275+  conn pointer const;                                                                                               9000274
  2276+  mode varchar(100) const;                                                                                          9000275
  2277+end-pr;                                                                                                             9000276
  2278+                                                                                                                    9000277
  2279+///                                                                                                                 9000278
  2280+// Get session id                                                                                                   9000279
  2281+//                                                                                                                  9000280
  2282+// Returns the session id.                                                                                          9000281
  2283+//                                                                                                                  9000282
  2284+// @param Client                                                                                                    9000283
  2285+//                                                                                                                  9000284
  2286+// @return Session or *blank if no session id has been set                                                          9000285
  2287+///                                                                                                                 9000286
  2288+dcl-pr stomp_getSessionId like(stomp_sessionid_t) extproc('stomp_getSessionId');                                    9000287
  2289+  conn pointer const;                                                                                               9000288
  2290+end-pr;                                                                                                             9000289
  2291+                                                                                                                    9000290
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     45
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2292+///                                                                                                                 9000291
  2293+// @brief Set durable subscriber name                                                                               9000292
  2294+//                                                                                                                  9000293
  2295+// This value is needed for a durable topic subscription at the messaging system.                                   9000294
  2296+//                                                                                                                  9000295
  2297+// @param Client                                                                                                    9000296
  2298+// @param Durable subscriber name                                                                                   9000297
  2299+///                                                                                                                 9000298
  2300+dcl-pr stomp_setDurableSubscriberName extproc('stomp_setDurableSubscriberName');                                    9000299
  2301+  conn pointer const;                                                                                               9000300
  2302+  name varchar(100) const;                                                                                          9000301
  2303+end-pr;                                                                                                             9000302
  2304+                                                                                                                    9000303
  2305+///                                                                                                                 9000304
  2306+// Set messages persistent                                                                                          9000305
  2307+//                                                                                                                  9000306
  2308+// Configures the client to send persistent messages. Only messages with                                            9000307
  2309+// the header <em>persistent</em> will be sent to all durable topic subscribers.                                    9000308
  2310+//                                                                                                                  9000309
  2311+// @param Client                                                                                                    9000310
  2312+// @param Persistent messages                                                                                       9000311
  2313+///                                                                                                                 9000312
  2314+dcl-pr stomp_setPersistMessages extproc('stomp_setPersistMessages');                                                9000313
  2315+  conn pointer const;                                                                                               9000314
  2316+  value ind const;                                                                                                  9000315
  2317+end-pr;                                                                                                             9000316
  2318+                                                                                                                    9000317
  2319+///                                                                                                                 9000318
  2320+// Get extension                                                                                                    9000319
  2321+//                                                                                                                  9000320
  2322+// Returns previously set extension.                                                                                9000321
  2323+//                                                                                                                  9000322
  2324+// @param Client                                                                                                    9000323
  2325+//                                                                                                                  9000324
  2326+// @return Extension or *null if no extension has been set                                                          9000325
  2327+///                                                                                                                 9000326
  2328+dcl-pr stomp_getExtension pointer extproc('stomp_getExtension');                                                    9000327
  2329+  conn pointer const;                                                                                               9000328
  2330+end-pr;                                                                                                             9000329
  2331+                                                                                                                    9000330
  2332+///                                                                                                                 9000331
  2333+// Set extension                                                                                                    9000332
  2334+//                                                                                                                  9000333
  2335+// Sets the extension to be used by the client. Any previously set extension                                        9000334
  2336+// will be removed and the allocated resources freed.                                                               9000335
  2337+//                                                                                                                  9000336
  2338+// @param Client                                                                                                    9000337
  2339+// @param Extension                                                                                                 9000338
  2340+///                                                                                                                 9000339
  2341+dcl-pr stomp_setExtension extproc('stomp_setExtension');                                                            9000340
  2342+  conn pointer const;                                                                                               9000341
  2343+  extension pointer const;                                                                                          9000342
  2344+end-pr;                                                                                                             9000343
  2345+                                                                                                                    9000344
  2346+///                                                                                                                 9000345
  2347+// Set usage of receipts                                                                                            9000346
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     46
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2348+//                                                                                                                  9000347
  2349+// Configures if the client asks for server receipts for every                                                      9000348
  2350+// sent frame (except CONNECT).                                                                                     9000349
  2351+//                                                                                                                  9000350
  2352+// @param Client                                                                                                    9000351
  2353+// @param Value *on/*off                                                                                            9000352
  2354+///                                                                                                                 9000353
  2355+dcl-pr stomp_useReceipts extproc('stomp_useReceipts');                                                              9000354
  2356+  conn pointer const;                                                                                               9000355
  2357+  value ind const;                                                                                                  9000356
  2358+end-pr;                                                                                                             9000357
  2359+                                                                                                                    9000358
  2360+///                                                                                                                 9000359
  2361+// Receipt usage                                                                                                    9000360
  2362+//                                                                                                                  9000361
  2363+// Returns if the client asks for server receipts for                                                               9000362
  2364+// sent frames.                                                                                                     9000363
  2365+//                                                                                                                  9000364
  2366+// @param Client                                                                                                    9000365
  2367+//                                                                                                                  9000366
  2368+// @return *on = ask server for receipts <br>                                                                       9000367
  2369+//         *off = don't ask server for receipts                                                                     9000368
  2370+///                                                                                                                 9000369
  2371+dcl-pr stomp_isUsingReceipts ind extproc('stomp_isUsingReceipts');                                                  9000370
  2372+  const pointer const;                                                                                              9000371
  2373+end-pr;                                                                                                             9000372
  2374+                                                                                                                    9000373
  2375+///                                                                                                                 9000374
  2376+// Get option value                                                                                                 9000375
  2377+//                                                                                                                  9000376
  2378+// Returns the option value for the passed configuration option.                                                    9000377
  2379+//                                                                                                                  9000378
  2380+// @param Client                                                                                                    9000379
  2381+// @param Configuration option                                                                                      9000380
  2382+//                                                                                                                  9000381
  2383+// @return Pointer to value or *null if the client doesn't have this option                                         9000382
  2384+///                                                                                                                 9000383
  2385+dcl-pr stomp_getOptionValue pointer extproc('stomp_getOptionValue');                                                9000384
  2386+  conn pointer const;                                                                                               9000385
  2387+  option int(10) const;                                                                                             9000386
  2388+end-pr;                                                                                                             9000387
  2389+                                                                                                                    9000388
  2390+///                                                                                                                 9000389
  2391+// Check client configuration option                                                                                9000390
  2392+//                                                                                                                  9000391
  2393+// Checks if the client is configured for the passed option.                                                        9000392
  2394+//                                                                                                                  9000393
  2395+// @param Client                                                                                                    9000394
  2396+// @param Option                                                                                                    9000395
  2397+//                                                                                                                  9000396
  2398+// @return *on = client is configured for passed option <br>                                                        9000397
  2399+//         *off = client has no configuration for passed option                                                     9000398
  2400+///                                                                                                                 9000399
  2401+dcl-pr stomp_hasOption ind extproc('stomp_hasOption');                                                              9000400
  2402+  conn pointer const;                                                                                               9000401
  2403+  option int(10) const;                                                                                             9000402
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     47
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2404+end-pr;                                                                                                             9000403
  2405+                                                                                                                    9000404
  2406+///                                                                                                                 9000405
  2407+// Set session id                                                                                                   9000406
  2408+//                                                                                                                  9000407
  2409+// Sets the session id.                                                                                             9000408
  2410+//                                                                                                                  9000409
  2411+// @param Client                                                                                                    9000410
  2412+// @param Session id                                                                                                9000411
  2413+///                                                                                                                 9000412
  2414+dcl-pr stomp_setSessionId extproc('stomp_setSessionId');                                                            9000413
  2415+  conn pointer const;                                                                                               9000414
  2416+  session like(stomp_sessionid_t) const;                                                                            9000415
  2417+end-pr;                                                                                                             9000416
  2418+                                                                                                                    9000417
  2419+///                                                                                                                 9000418
  2420+// Add open receipt                                                                                                 9000419
  2421+//                                                                                                                  9000420
  2422+// Adds a receipt to the list of open receipts.                                                                     9000421
  2423+//                                                                                                                  9000422
  2424+// @param Client                                                                                                    9000423
  2425+// @param Receipt id                                                                                                9000424
  2426+///                                                                                                                 9000425
  2427+dcl-pr stomp_addOpenReceipt extproc('stomp_addOpenReceipt');                                                        9000426
  2428+  conn pointer const;                                                                                               9000427
  2429+  receipt like(stomp_receiptid_t) const;                                                                            9000428
  2430+end-pr;                                                                                                             9000429
  2431+                                                                                                                    9000430
  2432+///                                                                                                                 9000431
  2433+// Get number of open receipts                                                                                      9000432
  2434+//                                                                                                                  9000433
  2435+// Returns the number of open receipts.                                                                             9000434
  2436+//                                                                                                                  9000435
  2437+// @param Client                                                                                                    9000436
  2438+//                                                                                                                  9000437
  2439+// @return Number of open receipts                                                                                  9000438
  2440+///                                                                                                                 9000439
  2441+dcl-pr stomp_getNumberOfOpenReceipts int(10) extproc('stomp_getNumberOfOpenReceipts');                              9000440
  2442+  conn pointer const;                                                                                               9000441
  2443+end-pr;                                                                                                             9000442
  2444+                                                                                                                    9000443
  2445+dcl-pr stomp_setTransactionId extproc(*dclcase);                                                                    9000444
  2446+  client pointer const;                                                                                             9000445
  2447+  transactionId varchar(100) const;                                                                                 9000446
  2448+end-pr;                                                                                                             9000447
  2449+                                                                                                                    9000448
  2450+///                                                                                                                 9000449
  2451+// Get Transaction Id                                                                                               9000450
  2452+//                                                                                                                  9000451
  2453+// Returns the currently used transaction id. If the id is *blank then no transaction                               9000452
  2454+// is currently being used.                                                                                         9000453
  2455+//                                                                                                                  9000454
  2456+// @param Client                                                                                                    9000455
  2457+// @return Transaction Id                                                                                           9000456
  2458+///                                                                                                                 9000457
  2459+dcl-pr stomp_getTransactionId varchar(100) extproc(*dclcase);                                                       9000458
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     48
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2460+  client pointer const;                                                                                             9000459
  2461+end-pr;                                                                                                             9000460
  2462+                                                                                                                    9000461
  2463+///                                                                                                                 9000462
  2464+// Set Server Heart-beat                                                                                            9000463
  2465+//                                                                                                                  9000464
  2466+// Sets the server heart-beat. 0 (zero) means no heart-beat.                                                        9000465
  2467+//                                                                                                                  9000466
  2468+// @param Client                                                                                                    9000467
  2469+// @param Heartbeat interval (in ms)                                                                                9000468
  2470+///                                                                                                                 9000469
  2471+dcl-pr stomp_setHeartbeatServer extproc(*dclcase);                                                                  9000470
  2472+  client pointer const;                                                                                             9000471
  2473+  heartbeatValue uns(10) const;                                                                                     9000472
  2474+end-pr;                                                                                                             9000473
  2475+                                                                                                                    9000474
  2476+///                                                                                                                 9000475
  2477+// Get Server Heart-beat                                                                                            9000476
  2478+//                                                                                                                  9000477
  2479+// Gets the server heart-beat. 0 (zero) means no heart-beat.                                                        9000478
  2480+//                                                                                                                  9000479
  2481+// @param Client                                                                                                    9000480
  2482+// @return Heartbeat interval (in ms)                                                                               9000481
  2483+///                                                                                                                 9000482
  2484+dcl-pr stomp_getHeartbeatServer uns(10) extproc(*dclcase);                                                          9000483
  2485+  client pointer const;                                                                                             9000484
  2486+end-pr;                                                                                                             9000485
  2487 /include 'stomplog.rpginc'                                                                                           000041
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stomplog.+                                                   *                    10
        * External name  . . . . . . :  ../include/stomplog.rpginc                                   *                    10
        * Last change  . . . . . . . :  05/20/21  19:00:50                                           *                    10
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2488+**FREE                                                                                                             10000001
  2489+                                                                                                                   10000002
  2490+/if defined (STOMP_LOG)                                                                                            10000003
            LINES EXCLUDED: 1
  2491+/endif                                                                                                             10000005
  2492+                                                                                                                   10000006
  2493+/define STOMP_LOG                                                                                                  10000007
  2494+                                                                                                                   10000008
  2495+dcl-pr stomp_log_create pointer extproc(*dclcase);                                                                 10000009
  2496+  name varchar(100) const;                                                                                         10000010
  2497+end-pr;                                                                                                            10000011
  2498+                                                                                                                   10000012
  2499+dcl-pr stomp_log_dispose extproc(*dclcase);                                                                        10000013
  2500+  logger pointer;                                                                                                  10000014
  2501+end-pr;                                                                                                            10000015
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     49
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2502+                                                                                                                   10000016
  2503+dcl-pr stomp_log extproc(*dclcase);                                                                                10000017
  2504+  logger pointer const;                                                                                            10000018
  2505+  message varchar(1000) const;                                                                                     10000019
  2506+end-pr;                                                                                                            10000020
  2507 /include 'stompframe.rpginc'                                                                                         000042
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stompfram+                                                   *                    11
        * External name  . . . . . . :  ../include/stompframe.rpginc                                 *                    11
        * Last change  . . . . . . . :  05/21/21  09:02:59                                           *                    11
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2508+**FREE                                                                                                             11000001
  2509+                                                                                                                   11000002
  2510+/if defined(STOMP_FRAME_H)                                                                                         11000003
            LINES EXCLUDED: 1
  2511+/endif                                                                                                             11000005
  2512+                                                                                                                   11000006
  2513+/define STOMP_FRAME_H                                                                                              11000007
  2514+                                                                                                                   11000008
  2515+///                                                                                                                11000009
  2516+// STOMP : Frame Module                                                                                            11000010
  2517+//                                                                                                                 11000011
  2518+// This module provides procedures for creating and querying a stomp frame.                                        11000012
  2519+// <br><br>                                                                                                        11000013
  2520+// Log entries will be written via the logger <em>rpgnextgen.stomp.frame</em>.                                     11000014
  2521+// There is no appender configured for this logger. Feel free to add log appenders                                 11000015
  2522+// for this logger.                                                                                                11000016
  2523+//                                                                                                                 11000017
  2524+// @author Mihael Schmidt                                                                                          11000018
  2525+// @date   26.07.2017                                                                                              11000019
  2526+// @project STOMP                                                                                                  11000020
  2527+///                                                                                                                11000021
  2528+                                                                                                                   11000022
  2529+//                          The MIT License (MIT)                                                                  11000023
  2530+//                                                                                                                 11000024
  2531+// Copyright (c) 2017 Mihael Schmidt                                                                               11000025
  2532+//                                                                                                                 11000026
  2533+// Permission is hereby granted, free of charge, to any person obtaining a copy                                    11000027
  2534+// of this software and associated documentation files (the "Software"), to deal                                   11000028
  2535+// in the Software without restriction, including without limitation the rights                                    11000029
  2536+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                       11000030
  2537+// copies of the Software, and to permit persons to whom the Software is                                           11000031
  2538+// furnished to do so, subject to the following conditions:                                                        11000032
  2539+//                                                                                                                 11000033
  2540+// The above copyright notice and this permission notice shall be included in                                      11000034
  2541+// all copies or substantial portions of the Software.                                                             11000035
  2542+//                                                                                                                 11000036
  2543+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                      11000037
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     50
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2544+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                        11000038
  2545+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                     11000039
  2546+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                          11000040
  2547+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                   11000041
  2548+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                   11000042
  2549+// SOFTWARE.                                                                                                       11000043
  2550+                                                                                                                   11000044
  2551+                                                                                                                   11000045
  2552+//                                                                                                                 11000046
  2553+// Templates                                                                                                       11000047
  2554+//                                                                                                                 11000048
  2555+dcl-s stomp_frame_header_key varchar(100) template;                                                                11000049
  2556+dcl-s stomp_frame_header_value varchar(1000) template;                                                             11000050
  2557+dcl-s stomp_frame_command varchar(20) template;                                                                    11000051
  2558+dcl-c STOMP_FRAME_HEADER_VALUE_LENGTH 1000;                                                                        11000052
  2559+dcl-c STOMP_FRAME_BODY_LENGTH 65535;                                                                               11000053
  2560+                                                                                                                   11000054
  2561+dcl-ds stomp_frame_header_t qualified template;                                                                    11000055
  2562+  key like(stomp_frame_header_key);                                                                                11000056
  2563+  value like(stomp_frame_header_value);                                                                            11000057
  2564+end-ds;                                                                                                            11000058
  2565+                                                                                                                   11000059
  2566+                                                                                                                   11000060
  2567+/include 'stomputil.rpginc'                                                                                        11000061
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stomputil+                                                   *                    12
        * External name  . . . . . . :  ../include/stomputil.rpginc                                  *                    12
        * Last change  . . . . . . . :  06/05/21  16:04:40                                           *                    12
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2568+**FREE                                                                                                             12000001
  2569+                                                                                                                   12000002
  2570+/if defined (STOMP_UTIL_H)                                                                                         12000003
            LINES EXCLUDED: 1
  2571+/endif                                                                                                             12000005
  2572+                                                                                                                   12000006
  2573+/define STOMP_UTIL_H                                                                                               12000007
  2574+                                                                                                                   12000008
  2575+//                          The MIT License (MIT)                                                                  12000009
  2576+//                                                                                                                 12000010
  2577+// Copyright (c) 2021 Mihael Schmidt                                                                               12000011
  2578+//                                                                                                                 12000012
  2579+// Permission is hereby granted, free of charge, to any person obtaining a copy                                    12000013
  2580+// of this software and associated documentation files (the "Software"), to deal                                   12000014
  2581+// in the Software without restriction, including without limitation the rights                                    12000015
  2582+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                       12000016
  2583+// copies of the Software, and to permit persons to whom the Software is                                           12000017
  2584+// furnished to do so, subject to the following conditions:                                                        12000018
  2585+//                                                                                                                 12000019
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     51
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2586+// The above copyright notice and this permission notice shall be included in                                      12000020
  2587+// all copies or substantial portions of the Software.                                                             12000021
  2588+//                                                                                                                 12000022
  2589+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                      12000023
  2590+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                        12000024
  2591+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                     12000025
  2592+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                          12000026
  2593+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                   12000027
  2594+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                   12000028
  2595+// SOFTWARE.                                                                                                       12000029
  2596+                                                                                                                   12000030
  2597+                                                                                                                   12000031
  2598+/include 'stompframe.rpginc'                                                                                       12000032
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stompfram+                                                   *                    13
        * External name  . . . . . . :  ../include/stompframe.rpginc                                 *                    13
        * Last change  . . . . . . . :  05/21/21  09:02:59                                           *                    13
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2599+**FREE                                                                                                             13000001
  2600+                                                                                                                   13000002
  2601+/if defined(STOMP_FRAME_H)                                                                                         13000003
  2602+/eof                                                                                                               13000004
  2603+                                                                                                                   12000033
  2604+                                                                                                                   12000034
  2605+dcl-ds stomp_util_buffer_t qualified template;                                                                     12000035
  2606+  data pointer;                                                                                                    12000036
  2607+  length uns(10);                                                                                                  12000037
  2608+end-ds;                                                                                                            12000038
  2609+                                                                                                                   12000039
  2610+dcl-pr stomp_util_buffer_create likeds(stomp_util_buffer_t) extproc(*dclcase);                                     12000040
  2611+  size uns(10) const;                                                                                              12000041
  2612+  data pointer const options(*nopass);                                                                             12000042
  2613+end-pr;                                                                                                            12000043
  2614+                                                                                                                   12000044
  2615+dcl-pr stomp_util_buffer_dispose extproc(*dclcase);                                                                12000045
  2616+  buffer likeds(stomp_util_buffer_t);                                                                              12000046
  2617+end-pr;                                                                                                            12000047
  2618+                                                                                                                   12000048
  2619+dcl-pr stomp_util_convert likeds(stomp_util_buffer_t) extproc(*dclcase);                                           12000049
  2620+  data pointer const;                                                                                              12000050
  2621+  length uns(10) const;                                                                                            12000051
  2622+  toCcsid int(10) const;                                                                                           12000052
  2623+  fromCcsid int(10) const options(*nopass);                                                                        12000053
  2624+end-pr;                                                                                                            12000054
  2625+                                                                                                                   12000055
  2626+dcl-pr stomp_util_hasBinaryContent ind extproc(*dclcase);                                                          12000056
  2627+  frame pointer const;                                                                                             12000057
  2628+end-pr;                                                                                                            12000058
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     52
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2629+                                                                                                                   12000059
  2630+dcl-pr stomp_util_getExplicitCharset varchar(100) extproc(*dclcase);                                               12000060
  2631+  frame pointer const;                                                                                             12000061
  2632+end-pr;                                                                                                            12000062
  2633+                                                                                                                   11000062
  2634+                                                                                                                   11000063
  2635+//                                                                                                                 11000064
  2636+// Prototypes                                                                                                      11000065
  2637+//                                                                                                                 11000066
  2638+                                                                                                                   11000067
  2639+///                                                                                                                11000068
  2640+// Create stomp frame                                                                                              11000069
  2641+//                                                                                                                 11000070
  2642+// Creates a stomp frame and if the parameters are passed also initializes it.                                     11000071
  2643+//                                                                                                                 11000072
  2644+// @param Stomp command (optional)                                                                                 11000073
  2645+// @param Frame body text (optional)                                                                               11000074
  2646+//                                                                                                                 11000075
  2647+// @info The resources allocated with this frame must be released by the caller                                    11000076
  2648+//       with the <em>stomp_frame_finalize</em> procedure.                                                         11000077
  2649+///                                                                                                                11000078
  2650+dcl-pr stomp_frame_create pointer extproc(*dclcase);                                                               11000079
  2651+  command like(stomp_frame_command) const options(*nopass);                                                        11000080
  2652+  body varchar(65335) const options(*nopass);                                                                      11000081
  2653+end-pr;                                                                                                            11000082
  2654+                                                                                                                   11000083
  2655+///                                                                                                                11000084
  2656+// Finalize stomp frame                                                                                            11000085
  2657+//                                                                                                                 11000086
  2658+// Releases all resources allocated to the frame.                                                                  11000087
  2659+//                                                                                                                 11000088
  2660+// @param Frame                                                                                                    11000089
  2661+///                                                                                                                11000090
  2662+dcl-pr stomp_frame_finalize extproc(*dclcase);                                                                     11000091
  2663+  frame pointer;                                                                                                   11000092
  2664+end-pr;                                                                                                            11000093
  2665+                                                                                                                   11000094
  2666+///                                                                                                                11000095
  2667+// Set stomp frame header value                                                                                    11000096
  2668+//                                                                                                                 11000097
  2669+// Sets a header (key and value) on the passed stomp frame.                                                        11000098
  2670+//                                                                                                                 11000099
  2671+// @info If this header already exists its value will be appended to the list of                                   11000100
  2672+//       headers. STOMP Spec 1.2 supports multiple headers with the same key.                                      11000101
  2673+//                                                                                                                 11000102
  2674+// @param Frame                                                                                                    11000103
  2675+// @param Key                                                                                                      11000104
  2676+// @param Value                                                                                                    11000105
  2677+///                                                                                                                11000106
  2678+dcl-pr stomp_frame_setHeader extproc(*dclcase);                                                                    11000107
  2679+  frame pointer const;                                                                                             11000108
  2680+  key like(stomp_frame_header_key) const;                                                                          11000109
  2681+  value like(stomp_frame_header_value) const;                                                                      11000110
  2682+end-pr;                                                                                                            11000111
  2683+                                                                                                                   11000112
  2684+///                                                                                                                11000113
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     53
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2685+// Get stomp frame header value                                                                                    11000114
  2686+//                                                                                                                 11000115
  2687+// Returns the value from the passed header of the stomp frame.                                                    11000116
  2688+//                                                                                                                 11000117
  2689+// @param Frame                                                                                                    11000118
  2690+// @param Stomp frame header (key)                                                                                 11000119
  2691+//                                                                                                                 11000120
  2692+// @return Value                                                                                                   11000121
  2693+//                                                                                                                 11000122
  2694+// @throws CPF9898 Header not found in stomp frame                                                                 11000123
  2695+///                                                                                                                11000124
  2696+dcl-pr stomp_frame_getHeader like(stomp_frame_header_value) extproc(*dclcase);                                     11000125
  2697+  frame pointer const;                                                                                             11000126
  2698+  key like(stomp_frame_header_key) const;                                                                          11000127
  2699+end-pr;                                                                                                            11000128
  2700+                                                                                                                   11000129
  2701+///                                                                                                                11000130
  2702+// List stomp frame headers                                                                                        11000131
  2703+//                                                                                                                 11000132
  2704+// Returns a list of stomp frame headers. Each entry of the list is a data                                         11000133
  2705+// structure (stomp_frame_header_t).                                                                               11000134
  2706+//                                                                                                                 11000135
  2707+// @param Frame                                                                                                    11000136
  2708+// @return List with headers                                                                                       11000137
  2709+//                                                                                                                 11000138
  2710+// @info The caller of this procedure must make sure to free the                                                   11000139
  2711+//       allocated resources of the returned list with <em>list_dispose(list)</em>.                                11000140
  2712+///                                                                                                                11000141
  2713+dcl-pr stomp_frame_listHeaders pointer extproc(*dclcase);                                                          11000142
  2714+  frame pointer const;                                                                                             11000143
  2715+end-pr;                                                                                                            11000144
  2716+                                                                                                                   11000145
  2717+///                                                                                                                11000146
  2718+// Remove stomp frame header                                                                                       11000147
  2719+//                                                                                                                 11000148
  2720+// Removes any occurence of the header from the passed stomp frame.                                                11000149
  2721+// <br>                                                                                                            11000150
  2722+// If the header does not exist this procedure does nothing.                                                       11000151
  2723+//                                                                                                                 11000152
  2724+// @param Frame                                                                                                    11000153
  2725+// @param Stomp frame header (key)                                                                                 11000154
  2726+///                                                                                                                11000155
  2727+dcl-pr stomp_frame_removeHeader extproc(*dclcase);                                                                 11000156
  2728+  frame pointer const;                                                                                             11000157
  2729+  key like(stomp_frame_header_key) const;                                                                          11000158
  2730+end-pr;                                                                                                            11000159
  2731+                                                                                                                   11000160
  2732+///                                                                                                                11000161
  2733+// Set command                                                                                                     11000162
  2734+//                                                                                                                 11000163
  2735+// Sets the command in the stomp frame.                                                                            11000164
  2736+//                                                                                                                 11000165
  2737+// @param Frame                                                                                                    11000166
  2738+// @param Command                                                                                                  11000167
  2739+//                                                                                                                 11000168
  2740+// @throws CPF9898 Invalid stomp command                                                                           11000169
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     54
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2741+///                                                                                                                11000170
  2742+dcl-pr stomp_frame_setCommand extproc(*dclcase);                                                                   11000171
  2743+  frame pointer const;                                                                                             11000172
  2744+  command like(stomp_frame_command) const;                                                                         11000173
  2745+end-pr;                                                                                                            11000174
  2746+                                                                                                                   11000175
  2747+///                                                                                                                11000176
  2748+// Get command                                                                                                     11000177
  2749+//                                                                                                                 11000178
  2750+// Returns the command of this stomp frame.                                                                        11000179
  2751+//                                                                                                                 11000180
  2752+// @param Frame                                                                                                    11000181
  2753+//                                                                                                                 11000182
  2754+// @return Command (is *blank if not set yet)                                                                      11000183
  2755+///                                                                                                                11000184
  2756+dcl-pr stomp_frame_getCommand like(stomp_frame_command) extproc(*dclcase);                                         11000185
  2757+  frame pointer const;                                                                                             11000186
  2758+end-pr;                                                                                                            11000187
  2759+                                                                                                                   11000188
  2760+///                                                                                                                11000189
  2761+// Set body/content                                                                                                11000190
  2762+//                                                                                                                 11000191
  2763+// Sets the body/content of this frame.                                                                            11000192
  2764+//                                                                                                                 11000193
  2765+// @param Frame                                                                                                    11000194
  2766+// @param Content                                                                                                  11000195
  2767+// @param Content length                                                                                           11000196
  2768+//                                                                                                                 11000197
  2769+// @info If this frame already contains a content the old content will be                                          11000198
  2770+//       replaced by the new one.                                                                                  11000199
  2771+//                                                                                                                 11000200
  2772+// @info If no content length has been passed then it will be assumed that the                                     11000201
  2773+//       content is null-terminated.                                                                               11000202
  2774+///                                                                                                                11000203
  2775+dcl-pr stomp_frame_setBody extproc(*dclcase);                                                                      11000204
  2776+  frame pointer const;                                                                                             11000205
  2777+  body pointer const options(*string);                                                                             11000206
  2778+  length uns(10) const options(*nopass);                                                                           11000207
  2779+end-pr;                                                                                                            11000208
  2780+                                                                                                                   11000209
  2781+///                                                                                                                11000210
  2782+// Return message body                                                                                             11000211
  2783+//                                                                                                                 11000212
  2784+// Returns a pointer to the body text of this frame.                                                               11000213
  2785+// The string is null-terminated.                                                                                  11000214
  2786+//                                                                                                                 11000215
  2787+// @param Frame                                                                                                    11000216
  2788+//                                                                                                                 11000217
  2789+// @return Buffer containing message body                                                                          11000218
  2790+//                                                                                                                 11000219
  2791+// @warning Don't call <em>stomp_util_buffer_dispose</em> on this buffer.                                          11000220
  2792+//          The resources from this buffer will automatically be freed when                                        11000221
  2793+//          disposing the frame.                                                                                   11000222
  2794+///                                                                                                                11000223
  2795+dcl-pr stomp_frame_getBody likeds(stomp_util_buffer_t) extproc(*dclcase);                                          11000224
  2796+  frame pointer const;                                                                                             11000225
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     55
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2797+end-pr;                                                                                                            11000226
  2798+                                                                                                                   11000227
  2799+                                                                                                                   11000228
  2800+///                                                                                                                11000229
  2801+// Serialize frame                                                                                                 11000230
  2802+//                                                                                                                 11000231
  2803+// Returns the frame in a serialized format which adheres to the STOMP Spec 1.2.                                   11000232
  2804+//                                                                                                                 11000233
  2805+// @param Frame                                                                                                    11000234
  2806+// @return Serialized content (stomp_util_buffer_t)                                                                11000235
  2807+//                                                                                                                 11000236
  2808+// @info The resources of the returned value must be freed by the caller by                                        11000237
  2809+//       calling <em>stomp_util_buffer_dispose</em>.                                                               11000238
  2810+//                                                                                                                 11000239
  2811+// @throws CPF9898 Stomp frame is not valid                                                                        11000240
  2812+///                                                                                                                11000241
  2813+dcl-pr stomp_frame_serialize likeds(stomp_util_buffer_t) extproc(*dclcase);                                        11000242
  2814+  frame pointer const;                                                                                             11000243
  2815+end-pr;                                                                                                            11000244
  2816+                                                                                                                   11000245
  2817+                                                                                                                   11000246
  2818+///                                                                                                                11000247
  2819+// Check if frame contains header                                                                                  11000248
  2820+//                                                                                                                 11000249
  2821+// Checks if the frame contains the header.                                                                        11000250
  2822+//                                                                                                                 11000251
  2823+// @param Frame                                                                                                    11000252
  2824+// @param Header (key)                                                                                             11000253
  2825+//                                                                                                                 11000254
  2826+// @return *on = frame contains header otherwise *off                                                              11000255
  2827+///                                                                                                                11000256
  2828+dcl-pr stomp_frame_containsHeader ind extproc(*dclcase);                                                           11000257
  2829+  frame pointer const;                                                                                             11000258
  2830+  key like(stomp_frame_header_key) const;                                                                          11000259
  2831+end-pr;                                                                                                            11000260
  2832+                                                                                                                   11000261
  2833+///                                                                                                                11000262
  2834+// Dump frame to job log                                                                                           11000263
  2835+//                                                                                                                 11000264
  2836+// Writes the frame in a serialized format (see stomp_frame_toString) to the                                       11000265
  2837+// job log.                                                                                                        11000266
  2838+//                                                                                                                 11000267
  2839+// @param Frame                                                                                                    11000268
  2840+///                                                                                                                11000269
  2841+dcl-pr stomp_frame_dump extproc(*dclcase);                                                                         11000270
  2842+  frame pointer const;                                                                                             11000271
  2843+end-pr;                                                                                                            11000272
  2844+                                                                                                                   11000273
  2845+///                                                                                                                11000274
  2846+// Get frame body as string                                                                                        11000275
  2847+//                                                                                                                 11000276
  2848+// Returns the body of the frame as a string in the job ccsid.                                                     11000277
  2849+//                                                                                                                 11000278
  2850+// @param Frame                                                                                                    11000279
  2851+// @return Frame body                                                                                              11000280
  2852+///                                                                                                                11000281
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     56
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2853+dcl-pr stomp_frame_toString varchar(1000000) rtnparm extproc(*dclcase);                                            11000282
  2854+  frame pointer const;                                                                                             11000283
  2855+end-pr;                                                                                                            11000284
  2856 /include 'stomputil.rpginc'                                                                                          000043
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stomputil+                                                   *                    14
        * External name  . . . . . . :  ../include/stomputil.rpginc                                  *                    14
        * Last change  . . . . . . . :  06/05/21  16:04:40                                           *                    14
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2857+**FREE                                                                                                             14000001
  2858+                                                                                                                   14000002
  2859+/if defined (STOMP_UTIL_H)                                                                                         14000003
  2860+/eof                                                                                                               14000004
  2861 /include 'unicode.rpginc'                                                                                            000044
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  unicode.r+                                                   *                    15
        * External name  . . . . . . :  ../include/unicode.rpginc                                    *                    15
        * Last change  . . . . . . . :  08/21/18  16:21:24                                           *                    15
        *--------------------------------------------------------------------------------------------*
  2862+ /if not defined (UNICODE_CONSTANTS)                                                                               15000001
  2863+ /define UNICODE_CONSTANTS                                                                                         15000002
  2864+                                                                                                                   15000003
  2865+D UNICODE_SLASH...                                                                                                 15000004
  2866+D                 C                   u'002F'                                                                      15000005
  2867+D UNICODE_BACKSLASH...                                                                                             15000006
  2868+D                 C                   u'005C'                                                                      15000007
  2869+D UNICODE_APOSTROPHE...                                                                                            15000008
  2870+D                 C                   u'0027'                                                                      15000009
  2871+D UNICODE_DOUBLE_QUOTE...                                                                                          15000010
  2872+D                 C                   u'0022'                                                                      15000011
  2873+D UNICODE_LEFT_CURLY_BRACE...                                                                                      15000012
  2874+D                 C                   u'007B'                                                                      15000013
  2875+D UNICODE_RIGHT_CURLY_BRACE...                                                                                     15000014
  2876+D                 C                   u'007D'                                                                      15000015
  2877+D UNICODE_LEFT_BRACKET...                                                                                          15000016
  2878+D                 C                   u'005B'                                                                      15000017
  2879+D UNICODE_RIGHT_BRACKET...                                                                                         15000018
  2880+D                 C                   u'005D'                                                                      15000019
  2881+D UNICODE_LEFT_BRACE...                                                                                            15000020
  2882+D                 C                   u'0028'                                                                      15000021
  2883+D UNICODE_RIGHT_BRACE...                                                                                           15000022
  2884+D                 C                   u'0029'                                                                      15000023
  2885+D UNICODE_COLON...                                                                                                 15000024
  2886+D                 C                   u'003A'                                                                      15000025
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     57
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
  2887+D UNICODE_SEMICOLON...                                                                                             15000026
  2888+D                 C                   u'003B'                                                                      15000027
  2889+D UNICODE_COMMA...                                                                                                 15000028
  2890+D                 C                   u'002C'                                                                      15000029
  2891+D UNICODE_DOT...                                                                                                   15000030
  2892+D                 C                   u'002E'                                                                      15000031
  2893+D UNICODE_EQUAL...                                                                                                 15000032
  2894+D                 C                   u'003D'                                                                      15000033
  2895+                                                                                                                   15000034
  2896+ /endif                                                                                                            15000035
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2897                                                                                                                      000045
  2898                                                                                                                      000046
  2899 dcl-s commands char(20) dim(15) ctdata;                                                                              000047
  2900                                                                                                                      000048
  2901 dcl-s logger pointer;                                                                                                000049
  2902                                                                                                                      000050
  2903 // in UTF-8 and UCS-2                                                                                                000051
  2904 dcl-c CR u'000D';                                                                                                    000052
  2905 dcl-c LF u'000A';                                                                                                    000053
  2906                                                                                                                      000054
  2907 dcl-ds stomp_frame_t qualified template;                                                                             000055
  2908   command like(stomp_frame_command);                                                                                 000056
  2909   headers pointer;                                                                                                   000057
  2910   body pointer;                                                                                                      000058
  2911   bodyLength uns(10);                                                                                                000059
  2912 end-ds;                                                                                                              000060
  2913                                                                                                                      000061
  2914                                                                                                                      000062
  2915 dcl-proc stomp_frame_init export;                                                                                    000063
  2916   dcl-pi *n int(10) end-pi;                                                                                          000064
  2917                                                                                                                      000065
  2918   dcl-ds errorCode likeds(qusec_t) inz;                                                                              000066
  2919                                                                                                                      000067
  2920   logger = stomp_log_create('stomp.frame');                                                                          000068
  2921                                                                                                                      000069
  2922   cee4rage2(%paddr(stomp_frame_exitHandler) : errorCode);                                                            000070
  2923                                                                                                                      000071
  2924   return 0;                                                                                                          000072
  2925 end-proc;                                                                                                            000073
  2926                                                                                                                      000074
  2927                                                                                                                      000075
  2928 dcl-proc stomp_frame_exitHandler;                                                                                    000076
  2929   dcl-pi *n;                                                                                                         000077
  2930     activationGroupMark uns(20);                                                                                     000078
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     58
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2931     reason uns(10);                                                                                                  000079
  2932     resultCode uns(10);                                                                                              000080
  2933     userResultCode uns(10);                                                                                          000081
  2934   end-pi;                                                                                                            000082
  2935                                                                                                                      000083
  2936   stomp_log_dispose(logger);                                                                                         000084
  2937 end-proc;                                                                                                            000085
  2938                                                                                                                      000086
  2939                                                                                                                      000087
  2940 dcl-proc stomp_frame_create export;                                                                                  000088
  2941   dcl-pi *N pointer;                                                                                                 000089
  2942     command like(stomp_frame_command) const options(*nopass);                                                        000090
  2943     pContent varchar(65335) const options(*nopass);                                                                  000091
  2944   end-pi;                                                                                                            000092
  2945                                                                                                                      000093
  2946   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000094
  2947   dcl-s content varchar(65535);                                                                                      000095
  2948                                                                                                                      000096
  2949   framePtr = %alloc(%size(stomp_frame_t));                                                                           000097
  2950                                                                                                                      000098
  2951   clear frame;                                                                                                       000099
  2952   frame.headers = list_create();                                                                                     000100
  2953                                                                                                                      000101
  2954   if (%parms() >= 1); // set command                                                                 B01             000102
  2955     stomp_frame_setCommand(framePtr : command);                                                       01             000103
  2956   endif;                                                                                             E01             000104
  2957                                                                                                                      000105
  2958   if (%parms() >= 2);                                                                                B01             000106
  2959     // content will be stored null-terminated                                                                        000107
  2960     content = pContent;                                                                               01             000108
  2961     frame.body = %alloc(%len(content) + 1);                                                           01             000109
  2962     frame.bodyLength = %len(content);                                                                 01             000110
  2963     memcpy(frame.body : %addr(content : *DATA) : %len(content));                                      01             000111
  2964     memset(frame.body + frame.bodyLength : 0 : 1);                                                    01             000112
  2965   endif;                                                                                             E01             000113
  2966                                                                                                                      000114
  2967   stomp_log(logger : 'create frame');                                                                                000115
  2968                                                                                                                      000116
  2969   return framePtr;                                                                                                   000117
  2970 end-proc;                                                                                                            000118
  2971                                                                                                                      000119
  2972                                                                                                                      000120
  2973 dcl-proc stomp_frame_finalize export;                                                                                000121
  2974   dcl-pi *N;                                                                                                         000122
  2975     framePtr pointer;                                                                                                000123
  2976   end-pi;                                                                                                            000124
  2977                                                                                                                      000125
  2978   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000126
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     59
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2979                                                                                                                      000127
  2980   if (framePtr = *null);                                                                             B01             000128
  2981     return;                                                                                           01             000129
  2982   endif;                                                                                             E01             000130
  2983                                                                                                                      000131
  2984   if (frame.body <> *null);                                                                          B01             000132
  2985     dealloc frame.body;                                                                               01             000133
  2986   endif;                                                                                             E01             000134
  2987                                                                                                                      000135
  2988   if (frame.headers <> *null);                                                                       B01             000136
  2989     list_dispose(frame.headers);                                                                      01             000137
  2990   endif;                                                                                             E01             000138
  2991                                                                                                                      000139
  2992   stomp_log(logger : 'frame disposed');                                                                              000140
  2993                                                                                                                      000141
  2994   dealloc(n) framePtr;                                                                                               000142
  2995 end-proc;                                                                                                            000143
  2996                                                                                                                      000144
  2997                                                                                                                      000145
  2998 dcl-proc stomp_frame_setHeader export;                                                                               000146
  2999   dcl-pi *N;                                                                                                         000147
  3000     framePtr pointer const;                                                                                          000148
  3001     key like(stomp_frame_header_key) const;                                                                          000149
  3002     value like(stomp_frame_header_value) const;                                                                      000150
  3003   end-pi;                                                                                                            000151
  3004                                                                                                                      000152
  3005   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000153
  3006   dcl-ds header likeds(stomp_frame_header_t) inz;                                                                    000154
  3007                                                                                                                      000155
  3008   header.key = key;                                                                                                  000156
  3009   header.value = value;                                                                                              000157
  3010   list_addFirst(frame.headers : %addr(header) : %size(header));                                                      000158
  3011                                                                                                                      000159
  3012   stomp_log(logger : 'set header: ' + key + ' - ' + value);                                                          000160
  3013 end-proc;                                                                                                            000161
  3014                                                                                                                      000162
  3015                                                                                                                      000163
  3016 dcl-proc stomp_frame_removeHeader export;                                                                            000164
  3017   dcl-pi *N;                                                                                                         000165
  3018     framePtr pointer const;                                                                                          000166
  3019     key like(stomp_frame_header_key) const;                                                                          000167
  3020   end-pi;                                                                                                            000168
  3021                                                                                                                      000169
  3022   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000170
  3023   dcl-ds header likeds(stomp_frame_header_t) based(ptr);                                                             000171
  3024   dcl-s i int(10);                                                                                                   000172
  3025   dcl-s x int(10) inz(-1);                                                                                           000173
  3026   dcl-s running ind inz(*on);                                                                                        000174
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     60
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3027                                                                                                                      000175
  3028   dow (running);                                                                                     B01             000176
  3029     reset i;                                                                                          01             000177
  3030     reset x;                                                                                          01             000178
  3031                                                                                                                      000179
  3032     ptr = list_iterate(frame.headers);                                                                01             000180
  3033     dow (ptr <> *null);                                                                              B02             000181
  3034       if (header.key = key);                                                                         B03             000182
  3035         x = i;                                                                                        03             000183
  3036         leave;                                                                                        03             000184
  3037       endif;                                                                                         E03             000185
  3038                                                                                                                      000186
  3039       ptr = list_iterate(frame.headers);                                                              02             000187
  3040     enddo;                                                                                           E02             000188
  3041                                                                                                                      000189
  3042     list_resetIteration(frame.headers);                                                               01             000190
  3043                                                                                                                      000191
  3044     if (x >= 0);                                                                                     B02             000192
  3045       list_remove(frame.headers : x);                                                                 02             000193
  3046       stomp_log(logger : 'removed header: ' + %trimr(key));                                           02             000194
  3047     else;                                                                                            X02             000195
  3048       running = *off;                                                                                 02             000196
  3049     endif;                                                                                           E02             000197
  3050   enddo;                                                                                             E01             000198
  3051                                                                                                                      000199
  3052 end-proc;                                                                                                            000200
  3053                                                                                                                      000201
  3054                                                                                                                      000202
  3055 dcl-proc stomp_frame_getHeader export;                                                                               000203
  3056   dcl-pi *N like(stomp_frame_header_value);                                                                          000204
  3057     framePtr pointer const;                                                                                          000205
  3058     key like(stomp_frame_header_key) const;                                                                          000206
  3059   end-pi;                                                                                                            000207
  3060                                                                                                                      000208
  3061   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000209
  3062   dcl-ds header likeds(stomp_frame_header_t) based(ptr);                                                             000210
  3063                                                                                                                      000211
  3064   ptr = list_iterate(frame.headers);                                                                                 000212
  3065   dow (ptr <> *null);                                                                                B01             000213
  3066     if (header.key = key);                                                                           B02             000214
  3067       // Only the first header for that key counts.                                                                  000215
  3068       //                                                                                                             000216
  3069       // From the Spec 1.2:                                                                                          000217
  3070       // > If a client or a server receives repeated frame header entries, only                                      000218
  3071       // > the first header entry SHOULD be used as the value of header entry.                                       000219
  3072       list_resetIteration(frame.headers);                                                             02             000220
  3073       return header.value;                                                                            02             000221
  3074     endif;                                                                                           E02             000222
  3075                                                                                                                      000223
  3076     ptr = list_iterate(frame.headers);                                                                01             000224
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     61
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3077   enddo;                                                                                             E01             000225
  3078                                                                                                                      000226
  3079   return *blank;                                                                                                     000227
  3080 end-proc;                                                                                                            000228
  3081                                                                                                                      000229
  3082                                                                                                                      000230
  3083 dcl-proc stomp_frame_containsHeader export;                                                                          000231
  3084   dcl-pi *N ind;                                                                                                     000232
  3085     framePtr pointer const;                                                                                          000233
  3086     key like(stomp_frame_header_key) const;                                                                          000234
  3087   end-pi;                                                                                                            000235
  3088                                                                                                                      000236
  3089   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000237
  3090   dcl-ds header likeds(stomp_frame_header_t) based(ptr);                                                             000238
  3091                                                                                                                      000239
  3092   ptr = list_iterate(frame.headers);                                                                                 000240
  3093   dow (ptr <> *null);                                                                                B01             000241
  3094     if (header.key = key);                                                                           B02             000242
  3095       list_resetIteration(frame.headers);                                                             02             000243
  3096       return *on;                                                                                     02             000244
  3097     endif;                                                                                           E02             000245
  3098                                                                                                                      000246
  3099     ptr = list_iterate(frame.headers);                                                                01             000247
  3100   enddo;                                                                                             E01             000248
  3101                                                                                                                      000249
  3102   return *off;                                                                                                       000250
  3103 end-proc;                                                                                                            000251
  3104                                                                                                                      000252
  3105                                                                                                                      000253
  3106 dcl-proc stomp_frame_listHeaders export;                                                                             000254
  3107   dcl-pi *N pointer;                                                                                                 000255
  3108     framePtr pointer const;                                                                                          000256
  3109   end-pi;                                                                                                            000257
  3110                                                                                                                      000258
  3111   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000259
  3112                                                                                                                      000260
  3113   return list_copy(frame.headers);                                                                                   000261
  3114 end-proc;                                                                                                            000262
  3115                                                                                                                      000263
  3116                                                                                                                      000264
  3117 dcl-proc stomp_frame_setCommand export;                                                                              000265
  3118   dcl-pi *N;                                                                                                         000266
  3119      framePtr pointer const;                                                                                         000267
  3120      command like(stomp_frame_command) const;                                                                        000268
  3121   end-pi;                                                                                                            000269
  3122                                                                                                                      000270
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     62
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3123   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000271
  3124                                                                                                                      000272
  3125   if (%lookup(command : commands) = 0);                                                              B01             000273
  3126     message_escape('Invalid STOMP command: ' + command);                                              01             000274
  3127   endif;                                                                                             E01             000275
  3128                                                                                                                      000276
  3129   frame.command = command;                                                                                           000277
  3130 end-proc;                                                                                                            000278
  3131                                                                                                                      000279
  3132                                                                                                                      000280
  3133 dcl-proc stomp_frame_getCommand export;                                                                              000281
  3134   dcl-pi *N like(stomp_frame_command);                                                                               000282
  3135     framePtr pointer const;                                                                                          000283
  3136   end-pi;                                                                                                            000284
  3137                                                                                                                      000285
  3138   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000286
  3139                                                                                                                      000287
  3140   return frame.command;                                                                                              000288
  3141 end-proc;                                                                                                            000289
  3142                                                                                                                      000290
  3143                                                                                                                      000291
  3144 dcl-proc stomp_frame_setBody export;                                                                                 000292
  3145   dcl-pi *N;                                                                                                         000293
  3146     framePtr pointer const;                                                                                          000294
  3147     body pointer const options(*string);                                                                             000295
  3148     length uns(10) const options(*nopass);                                                                           000296
  3149   end-pi;                                                                                                            000297
  3150                                                                                                                      000298
  3151   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000299
  3152                                                                                                                      000300
  3153   if (%parms >= 3);                                                                                  B01             000301
  3154     frame.bodyLength = length;                                                                        01             000302
  3155   else;                                                                                              X01             000303
  3156     frame.bodyLength = strlen(body);                                                                  01             000304
  3157   endif;                                                                                             E01             000305
  3158                                                                                                                      000306
  3159   if (frame.body = *null);                                                                           B01             000307
  3160     frame.body = %alloc(frame.bodyLength + 1);                                                        01             000308
  3161   else;                                                                                              X01             000309
  3162     frame.body = %realloc(frame.body : frame.bodyLength + 1);                                         01             000310
  3163   endif;                                                                                             E01             000311
  3164                                                                                                                      000312
  3165   memcpy(frame.body : body : frame.bodyLength);                                                                      000313
  3166   memset(frame.body + frame.bodyLength : 0 : 1);                                                                     000314
  3167                                                                                                                      000315
  3168   stomp_log(logger : 'set body: ' + %str(body : 1000));                                                              000316
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     63
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3169 end-proc;                                                                                                            000317
  3170                                                                                                                      000318
  3171                                                                                                                      000319
  3172 dcl-proc stomp_frame_getBody export;                                                                                 000320
  3173   dcl-pi *N likeds(stomp_util_buffer_t);                                                                             000321
  3174     framePtr pointer const;                                                                                          000322
  3175   end-pi;                                                                                                            000323
  3176                                                                                                                      000324
  3177   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000325
  3178   dcl-ds buffer likeds(stomp_util_buffer_t);                                                                         000326
  3179                                                                                                                      000327
  3180   buffer.data = frame.body;                                                                                          000328
  3181   buffer.length = frame.bodyLength;                                                                                  000329
  3182                                                                                                                      000330
  3183   return buffer;                                                                                                     000331
  3184 end-proc;                                                                                                            000332
  3185                                                                                                                      000333
  3186                                                                                                                      000334
  3187 dcl-proc stomp_frame_toString export;                                                                                000335
  3188   dcl-pi *n varchar(STOMP_MAX_FRAME_SIZE) rtnparm;                                                                   000336
  3189     framePtr pointer const;                                                                                          000337
  3190   end-pi;                                                                                                            000338
  3191                                                                                                                      000339
  3192   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000340
  3193                                                                                                                      000341
  3194   if (frame.bodyLength > 0);                                                                         B01             000342
  3195     return %str(frame.body : frame.bodyLength);                                                       01             000343
  3196   else;                                                                                              X01             000344
  3197     return '';                                                                                        01             000345
  3198   endif;                                                                                             E01             000346
  3199 end-proc;                                                                                                            000347
  3200                                                                                                                      000348
  3201                                                                                                                      000349
  3202 dcl-proc stomp_frame_serialize export;                                                                               000350
  3203   dcl-pi *N likeds(stomp_util_buffer_t);                                                                             000351
  3204     framePtr pointer const;                                                                                          000352
  3205   end-pi;                                                                                                            000353
  3206                                                                                                                      000354
  3207   dcl-ds serialized likeds(stomp_util_buffer_t) inz;                                                                 000355
  3208   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000356
  3209   dcl-s sPtr pointer;                                                                                                000357
  3210   dcl-s buffer varchar(1103) ccsid(*utf8);                                                                           000358
  3211   dcl-ds header likeds(stomp_frame_header_t) based(headerPtr);                                                       000359
  3212   dcl-s utf8data varchar(STOMP_MAX_FRAME_SIZE) ccsid(*utf8);                                                         000360
  3213   dcl-s data char(STOMP_MAX_FRAME_SIZE) based(frame.body);                                                           000361
  3214   dcl-s charset varchar(100);                                                                                        000362
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     64
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3215   dcl-s ccsid int(10);                                                                                               000363
  3216   dcl-ds convBuffer likeds(stomp_util_buffer_t) inz;                                                                 000364
  3217   dcl-s isBinaryContent ind inz(*off);                                                                               000365
  3218                                                                                                                      000366
  3219   if (not isValidFrame(framePtr));                                                                   B01             000367
  3220     message_escape('STOMP frame is not valid');                                                       01             000368
  3221   endif;                                                                                             E01             000369
  3222                                                                                                                      000370
  3223                                                                                                                      000371
  3224   // convert content/body                                                                                            000372
  3225   if (frame.body <> *null);                                                                          B01             000373
  3226     if (frame.command = 'SEND' or frame.command = 'MESSAGE' or frame.command = 'ERROR');             B02             000374
  3227                                                                                                                      000375
  3228       charset = stomp_util_getExplicitCharset(framePtr);                                              02             000376
  3229                                                                                                                      000377
  3230       if (stomp_util_hasBinaryContent(framePtr));                                                    B03             000378
  3231         // no conversion => copy raw bytes                                                                           000379
  3232         isBinaryContent = *on;                                                                        03             000380
  3233         stomp_frame_setHeader(framePtr : 'content-length' : %char(frame.bodyLength));                 03             000381
  3234       elseif (charset <> *blank);                                                                    X03             000382
  3235         // convert to charset                                                                                        000383
  3236         ccsid = stomp_mime_charsetToCcsid(charset);                                                   03             000384
  3237         if (ccsid = 0);                                                                              B04             000385
  3238           ccsid = 1208; // fallback to utf-8                                                          04             000386
  3239         endif;                                                                                       E04             000387
  3240                                                                                                                      000388
  3241         convBuffer = stomp_util_convert(frame.body : frame.bodyLength : ccsid);                       03             000389
  3242         stomp_frame_setHeader(framePtr : 'content-length' : %char(convBuffer.length));                03             000390
  3243       else;                                                                                          X03             000391
  3244         // convert to UTF8                                                                                           000392
  3245         utf8data = %subst(data : 1 : frame.bodyLength);                                               03             000393
  3246         convBuffer = stomp_util_buffer_create(%len(utf8data) : %addr(utf8data : *data));              03             000394
  3247         stomp_frame_setHeader(framePtr : 'content-length' : %char(convBuffer.length));                03             000395
  3248       endif;                                                                                         E03             000396
  3249                                                                                                                      000397
  3250     endif;                                                                                           E02             000398
  3251   endif;                                                                                             E01             000399
  3252                                                                                                                      000400
  3253                                                                                                                      000401
  3254   serialized.data = %alloc(STOMP_MAX_FRAME_SIZE);                                                                    000402
  3255   memset(serialized.data : 0 : STOMP_MAX_FRAME_SIZE);                                                                000403
  3256                                                                                                                      000404
  3257   // add command                                                                                                     000405
  3258   sPtr = serialized.data;                                                                                            000406
  3259   buffer = frame.command + CR + LF;                                                                                  000407
  3260   memcpy(sPtr : %addr(buffer : *data) : %len(buffer));                                                               000408
  3261   serialized.length = %len(buffer);                                                                                  000409
  3262                                                                                                                      000410
  3263   // add headers                                                                                                     000411
  3264   headerPtr = list_iterate(frame.headers);                                                                           000412
  3265   dow (headerPtr <> *null);                                                                          B01             000413
  3266     sPtr = serialized.data + serialized.length;                                                       01             000414
  3267     buffer = header.key + UNICODE_COLON + header.value + CR + LF;                                     01             000415
  3268     memcpy(sPtr : %addr(buffer : *data) : %len(buffer));                                              01             000416
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     65
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3269     serialized.length += %len(buffer);                                                                01             000417
  3270                                                                                                                      000418
  3271     headerPtr = list_iterate(frame.headers);                                                          01             000419
  3272   enddo;                                                                                             E01             000420
  3273                                                                                                                      000421
  3274   // add CRLF => seperator between header and body                                                                   000422
  3275   sPtr = serialized.data + serialized.length;                                                                        000423
  3276   buffer = CR + LF;                                                                                                  000424
  3277   memcpy(sPtr : %addr(buffer : *data) : %len(buffer));                                                               000425
  3278   serialized.length += %len(buffer);                                                                                 000426
  3279                                                                                                                      000427
  3280   // add body to buffer                                                                                              000428
  3281   if (frame.body <> *null);                                                                          B01             000429
  3282     if (frame.command = 'SEND' or frame.command = 'MESSAGE' or frame.command = 'ERROR');             B02             000430
  3283       if (isBinaryContent);                                                                          B03             000431
  3284         sPtr = serialized.data + serialized.length;                                                   03             000432
  3285         memcpy(sPtr : frame.body : frame.bodyLength);                                                 03             000433
  3286         serialized.length += frame.bodyLength;                                                        03             000434
  3287       elseif (convBuffer.length > 0);                                                                X03             000435
  3288         sPtr = serialized.data + serialized.length;                                                   03             000436
  3289         memcpy(sPtr : convBuffer.data : convBuffer.length);                                           03             000437
  3290         serialized.length += convBuffer.length;                                                       03             000438
  3291       endif;                                                                                         E03             000439
  3292     endif;                                                                                           E02             000440
  3293   endif;                                                                                             E01             000441
  3294                                                                                                                      000442
  3295   // add terminating null                                                                                            000443
  3296   sPtr = serialized.data + serialized.length;                                                                        000444
  3297   memset(sPtr : 0 : 1);                                                                                              000445
  3298   serialized.length += 1;                                                                                            000446
  3299                                                                                                                      000447
  3300   return serialized;                                                                                                 000448
  3301                                                                                                                      000449
  3302   on-exit;                                                                                                           000450
  3303     stomp_util_buffer_dispose(convBuffer);                                                                           000451
  3304 end-proc;                                                                                                            000452
  3305                                                                                                                      000453
  3306                                                                                                                      000454
  3307 ///                                                                                                                  000455
  3308 // Dump frame to job log                                                                                             000456
  3309 //                                                                                                                   000457
  3310 // Outputs the passed frame as an INFO message to the job log.                                                       000458
  3311 //                                                                                                                   000459
  3312 // @param Frame                                                                                                      000460
  3313 ///                                                                                                                  000461
  3314 dcl-proc stomp_frame_dump export;                                                                                    000462
  3315   dcl-pi *N;                                                                                                         000463
  3316     frame pointer const;                                                                                             000464
  3317   end-pi;                                                                                                            000465
  3318                                                                                                                      000466
  3319   dcl-ds buffer likeds(stomp_util_buffer_t);                                                                         000467
  3320                                                                                                                      000468
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     66
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3321   buffer = stomp_frame_serialize(frame);                                                                             000469
  3322                                                                                                                      000470
  3323   message_info('FRAMEDUMP: ' + %str(buffer.data : buffer.length));                                                   000471
  3324                                                                                                                      000472
  3325   stomp_util_buffer_dispose(buffer);                                                                                 000473
  3326 end-proc;                                                                                                            000474
  3327                                                                                                                      000475
  3328                                                                                                                      000476
  3329 ///                                                                                                                  000477
  3330 // Validate frame                                                                                                    000478
  3331 //                                                                                                                   000479
  3332 // Checks if this frame is a valid stomp frame.                                                                      000480
  3333 //                                                                                                                   000481
  3334 // @param Frame                                                                                                      000482
  3335 //                                                                                                                   000483
  3336 // @return *on = valid stomp frame <br>                                                                              000484
  3337 //         *off = invalid stomp frame                                                                                000485
  3338 ///                                                                                                                  000486
  3339 dcl-proc isValidFrame;                                                                                               000487
  3340   dcl-pi *N ind;                                                                                                     000488
  3341     framePtr pointer const;                                                                                          000489
  3342   end-pi;                                                                                                            000490
  3343                                                                                                                      000491
  3344   dcl-ds frame likeds(stomp_frame_t) based(framePtr);                                                                000492
  3345                                                                                                                      000493
  3346   if (frame.command = *blank);                                                                       B01             000494
  3347     return *off;                                                                                      01             000495
  3348   endif;                                                                                             E01             000496
  3349                                                                                                                      000497
  3350   // check if it is a valid command                                                                                  000498
  3351   if (%lookup(frame.command : commands) = 0); // 0 = not found                                       B01             000499
  3352     return *off;                                                                                      01             000500
  3353   endif;                                                                                             E01             000501
  3354                                                                                                                      000502
  3355   return *on;                                                                                                        000503
  3356 end-proc;                                                                                                            000504
  3357                                                                                                                      000505
       * * * * *   E N D   O F   S O U R C E   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     67
          A d d i t i o n a l   D i a g n o s t i c   M e s s a g e s
 Msg id  Sv Number Seq     Message text
*RNF5409 00   2963 000111  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   2964 000112  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   3010 000158  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   3045 000193  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   3165 000313  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   3166 000314  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   3255 000403  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   3260 000408  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   3268 000416  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   3277 000425  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   3285 000433  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   3289 000437  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   3297 000445  The prototyped call returns a value which is lost when
                           CALLP is used.
 * * * * *   E N D   O F   A D D I T I O N A L   D I A G N O S T I C   M E S S A G E S   * * * * *
                            / C o p y   M e m b e r s
Line   Src  RPG name   <-------- External name -------> CCSID  <- Last change ->
Number Id              Library    File       Member            Date     Time
    34    1 ilecee.rp+ ../include/ilecee.rpginc           850  05/20/21 19:17:09
    46    2 libc_h.rp+ ../include/libc_h.rpgle            850  08/21/18 18:21:24
    49    3 QUSEC      QSYSINC    QRPGLESRC  QUSEC         37  02/17/19 10:02:41
   331    4 llist_h.r+ /home/mihael/include/llist/llis+   923  03/29/20 08:30:06
  1612    5 llist_so_+ /home/mihael/include/llist/llis+   923  03/29/20 08:30:06
  1669    6 message_h+ /home/mihael/include/message/me+   819  04/14/21 19:21:26
  1961    7 mimetype.+ ../include/mimetype.rpginc         850  05/20/21 09:15:17
  1988    8 qusec.rpg+ ../include/qusec.rpginc            850  05/20/21 19:39:58
  2002    9 stomp_h.r+ ../include/stomp_h.rpginc          850  06/01/21 19:40:10
  2487   10 stomplog.+ ../include/stomplog.rpginc         850  05/20/21 19:00:50
  2507   11 stompfram+ ../include/stompframe.rpginc       850  05/21/21 09:02:59
  2567   12 stomputil+ ../include/stomputil.rpginc        850  06/05/21 16:04:40
  2598   13 stompfram+ ../include/stompframe.rpginc       850  05/21/21 09:02:59
  2856   14 stomputil+ ../include/stomputil.rpginc        850  06/05/21 16:04:40
  2861   15 unicode.r+ ../include/unicode.rpginc          850  08/21/18 16:21:24
         * * * * *   E N D   O F   / C O P Y   M E M B E R S   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     68
Line   <---------------------- Data Records -------------------------------------------------------------->      Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10      Date   Id  Number
                       C o m p i l e   T i m e   D a t a
  3358 **CTDATA commands                                                                                                    000506
        *--------------------------------------------------------------------*
        * Array . . . : COMMANDS                                             *
        *--------------------------------------------------------------------*
  3359 CONNECT                                                                                                              000507
  3360 SEND                                                                                                                 000508
  3361 SUBSCRIBE                                                                                                            000509
  3362 UNSUBSCRIBE                                                                                                          000510
  3363 BEGIN                                                                                                                000511
  3364 COMMIT                                                                                                               000512
  3365 ABORT                                                                                                                000513
  3366 ACK                                                                                                                  000514
  3367 NACK                                                                                                                 000515
  3368 DISCONNECT                                                                                                           000516
  3369 CONNECTED                                                                                                            000517
  3370 MESSAGE                                                                                                              000518
  3371 RECEIPT                                                                                                              000519
  3372 ERROR                                                                                                                000520
  3373 STOMP                                                                                                                000521
    * * * * *   E N D   O F   C O M P I L E   T I M E   D A T A   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     69
                          C r o s s   R e f e r e n c e
      File and Record References:
         File              Device             References (D=Defined)
           Record
         No references in the source.
      Global Field References:
         Field             Attributes         References (D=Defined M=Modified)
*RNF7031 BSEARCH           *(16)                 261D
                           PROTOTYPE
*RNF7031 CASECONVERT       PROTOTYPE             193D
         CEE4RAGE2         PROTOTYPE              42D   2922M
*RNF7031 CEILING           F(8)                  232D
                           PROTOTYPE
         COMMANDS(15)      A(20)                2899D   3125    3351    3358M
         CR                CONST                2904D   3259    3267    3276
*RNF7031 ERRNO             *(16)                 271D
                           PROTOTYPE
*RNF7031 F_DUPFD           CONST                 285D
*RNF7031 F_GETFL           CONST                 286D
*RNF7031 F_GETOWN          CONST                 288D
*RNF7031 F_SETFL           CONST                 287D
*RNF7031 F_SETOWN          CONST                 289D
*RNF7031 FASYNC            CONST                 296D
*RNF7031 FCNTL             I(10,0)               323D
                           PROTOTYPE
*RNF7031 FLOOR             F(8)                  235D
                           PROTOTYPE
*RNF7031 FNDELAY           CONST                 295D
         ISVALIDFRAME      N(1)                   30D   3219    3339
                           PROTOTYPE
         LF                CONST                2905D   3259    3267    3276
*RNF7031 LIST_ABORTITERATION...
                           PROTOTYPE             799D
*RNF7031 LIST_ADD          N(1)                  494D
                           PROTOTYPE
*RNF7031 LIST_ADDALL       N(1)                  554D
                           PROTOTYPE
*RNF7031 LIST_ADDBOOLEAN   N(1)                 1317D
                           PROTOTYPE
*RNF7031 LIST_ADDDATE      N(1)                 1373D
                           PROTOTYPE
*RNF7031 LIST_ADDDECIMAL   N(1)                 1345D
                           PROTOTYPE
*RNF7031 LIST_ADDDOUBLE    N(1)                 1289D
                           PROTOTYPE
         LIST_ADDFIRST     N(1)                  514D   3010M
                           PROTOTYPE
*RNF7031 LIST_ADDFLOAT     N(1)                 1261D
                           PROTOTYPE
*RNF7031 LIST_ADDINTEGER   N(1)                 1177D
                           PROTOTYPE
*RNF7031 LIST_ADDLAST      N(1)                  533D
                           PROTOTYPE
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     70
*RNF7031 LIST_ADDLONG      N(1)                 1205D
                           PROTOTYPE
*RNF7031 LIST_ADDSHORT     N(1)                 1233D
                           PROTOTYPE
*RNF7031 LIST_ADDSTRING    N(1)                 1149D
                           PROTOTYPE
*RNF7031 LIST_CLEAR        N(1)                  630D
                           PROTOTYPE
*RNF7031 LIST_CONTAINS     N(1)                  833D
                           PROTOTYPE
         LIST_COPY         *(16)                1102D   3113
                           PROTOTYPE
         LIST_CREATE       *(16)                 449D   2952
                           PROTOTYPE
         LIST_DISPOSE      PROTOTYPE             466D   2989M
*RNF7031 LIST_FOREACH      PROTOTYPE            1015D
*RNF7031 LIST_FREQUENCY    U(10,0)              1121D
                           PROTOTYPE
*RNF7031 LIST_GET          *(16)                 690D
                           PROTOTYPE
*RNF7031 LIST_GETBOOLEAN   N(1)                 1500D
                           PROTOTYPE
*RNF7031 LIST_GETDATE      D(10*ISO-)           1536D
                           PROTOTYPE
*RNF7031 LIST_GETDECIMAL   P(15,5)              1518D
                           PROTOTYPE
*RNF7031 LIST_GETDOUBLE    F(8)                 1482D
                           PROTOTYPE
*RNF7031 LIST_GETFIRST     *(16)                 708D
                           PROTOTYPE
*RNF7031 LIST_GETFLOAT     F(4)                 1464D
                           PROTOTYPE
*RNF7031 LIST_GETINTEGER   I(10,0)              1410D
                           PROTOTYPE
*RNF7031 LIST_GETLAST      *(16)                 725D
                           PROTOTYPE
*RNF7031 LIST_GETLONG      I(20,0)              1446D
                           PROTOTYPE
*RNF7031 LIST_GETNEXT      *(16)                 746D
                           PROTOTYPE
*RNF7031 LIST_GETPREV      *(16)                 782D
                           PROTOTYPE
*RNF7031 LIST_GETSHORT     I(5,0)               1428D
                           PROTOTYPE
*RNF7031 LIST_GETSTRING    A(65535)             1392D
                           PROTOTYPE
*RNF7031 LIST_INDEXOF      I(10,0)               854D
                           PROTOTYPE
*RNF7031 LIST_ISEMPTY      N(1)                  647D
                           PROTOTYPE
         LIST_ITERATE      *(16)                 764D   3032    3039    3064
                           PROTOTYPE            3076    3092    3099    3264
                                                3271
*RNF7031 LIST_LASTINDEXOF  I(10,0)               875D
                           PROTOTYPE
*RNF7031 LIST_MERGE        PROTOTYPE            1604D
         LIST_REMOVE       N(1)                  578D   3045M
                           PROTOTYPE
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     71
*RNF7031 LIST_REMOVEFIRST  N(1)                  596D
                           PROTOTYPE
*RNF7031 LIST_REMOVELAST   N(1)                  613D
                           PROTOTYPE
*RNF7031 LIST_REMOVERANGE  PROTOTYPE            1585D
*RNF7031 LIST_REPLACE      N(1)                  668D
                           PROTOTYPE
         LIST_RESETITERATION...
                           PROTOTYPE             814D   3042M   3072M   3095M
*RNF7031 LIST_REVERSE      PROTOTYPE            1086D
*RNF7031 LIST_ROTATE       PROTOTYPE             969D
*RNF7031 LIST_SIZE         U(10,0)               916D
                           PROTOTYPE
*RNF7031 LIST_SORT         PROTOTYPE            1569D
*RNF7031 LIST_SORT_INSERTIONSORT...
                           PROTOTYPE            1663D
*RNF7031 LIST_SPLIT        *(16)                1073D
                           PROTOTYPE
*RNF7031 LIST_SUBLIST      *(16)                 934D
                           PROTOTYPE
*RNF7031 LIST_SWAP         N(1)                  985D
                           PROTOTYPE
*RNF7031 LIST_TOCHARARRAY  PROTOTYPE             897D
*RNF7031 LIST_TOSTRING     A(65535)             1047D
                           VARYING(2)
                           PROTOTYPE
         LOGGER            *(16)                2901D   2920M   2936    2967
                                                2992    3012    3046    3168
*RNF7031 MEMCMP            I(10,0)               219D
                           PROTOTYPE
         MEMCPY            *(16)                 204D   2963M   3165M   3260M
                           PROTOTYPE            3268M   3277M   3285M   3289M
*RNF7031 MEMICMP           I(10,0)               224D
                           PROTOTYPE
*RNF7031 MEMMOVE           *(16)                 214D
                           PROTOTYPE
         MEMSET            *(16)                 209D   2964M   3166M   3255M
                           PROTOTYPE            3297M
*RNF7031 MESSAGE_COMPLETION...
                           PROTOTYPE            1895D
*RNF7031 MESSAGE_CONTROL_BOUNDARY...
                           CONST                1706D
*RNF7031 MESSAGE_CURRENT_CALL_STACK_ENTRY...
                           CONST                1704D
*RNF7031 MESSAGE_DIAGNOSTIC...
                           PROTOTYPE            1956D
         MESSAGE_ESCAPE    PROTOTYPE            1908D   3126M   3220M
*RNF7031 MESSAGE_FILE_ESCAPE...
                           PROTOTYPE            1943D
*RNF7031 MESSAGE_FILE_INFO PROTOTYPE            1924D
         MESSAGE_INFO      PROTOTYPE            1877D   3323M
*RNF7031 MESSAGE_LAST_NEW_ESCAPE_MESSAGE...
                           CONST                1701D
*RNF7031 MESSAGE_ONE_CALL_STACK_LEVEL_ABOVE...
                           CONST                1697D
*RNF7031 MESSAGE_RECEIVEMESSAGE...
                           DS(793)              1782D
                           PROTOTYPE
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     72
*RNF7031 MESSAGE_RECEIVEMESSAGEDATA...
                           A(256)               1756D
                           PROTOTYPE
*RNF7031 MESSAGE_RECEIVEMESSAGEINFO...
                           DS(541)              1748D
                           PROTOTYPE
*RNF7031 MESSAGE_RECEIVEMESSAGETEXT...
                           A(256)               1766D
                           PROTOTYPE
*RNF7031 MESSAGE_RESENDESCAPEMESSAGE...
                           PROTOTYPE            1798D
*RNF7031 MESSAGE_SENDCOMPLETIONMESSAGE...
                           PROTOTYPE            1809D
*RNF7031 MESSAGE_SENDESCAPEMESSAGE...
                           PROTOTYPE            1820D
*RNF7031 MESSAGE_SENDESCAPEMESSAGEABOVECONTROLBODY...
                           PROTOTYPE            1844D
*RNF7031 MESSAGE_SENDESCAPEMESSAGETOCALLER...
                           PROTOTYPE            1832D
*RNF7031 MESSAGE_SENDINFOMESSAGE...
                           PROTOTYPE            1856D
*RNF7031 MESSAGE_SENDSTATUSMESSAGE...
                           PROTOTYPE            1866D
*RNF7031 MESSAGE_STATUS    PROTOTYPE            1886D
         MESSAGE_T         DS(793)              1724D   1782
                           TEMPLATE
*RNF7031   ID              A(7)                 1725D
*RNF7031   REPLACEMENTDATA A(254)               1727D
                           VARYING(2)
*RNF7031   SENDER          DS(274)              1728D
*RNF7031   TEXT            A(254)               1726D
                           VARYING(2)
*RNF7031 MESSAGE_TWO_CALL_STACK_LEVEL_ABOVE...
                           CONST                1698D
         MESSAGEINFO_T     DS(541)              1712D   1748
                           TEMPLATE
*RNF7031   MESSAGE         A(256)               1714D
*RNF7031   MESSAGEID       A(7)                 1713D
*RNF7031   PROCEDURENAME   A(256)               1718D
*RNF7031   PROGRAMNAME     A(12)                1716D
*RNF7031   STATEMENT       A(10)                1720D
         MESSAGESENDER_T   DS(274)              1728    1732D
                           TEMPLATE
*RNF7031   PROCEDURENAME   A(256)               1734D
*RNF7031   PROGRAMNAME     A(12)                1733D
*RNF7031   STATEMENT       A(6)                 1735D
*RNF7031 O_NDELAY          CONST                 294D
*RNF7031 O_NONBLOCK        CONST                 293D
*RNF7031 QSORT             *(16)                 255D
                           PROTOTYPE
*RNF7031 QUSBAVL           I(10,0)                99D
*RNF7031 QUSBAVL14         I(10,0)               114D
*RNF7031 QUSBPRV           I(10,0)                97D
*RNF7031 QUSBPRV00         I(10,0)               112D
*RNF7031 QUSCCSID11        I(10,0)               120D
*RNF7031 QUSC0200          DS(32)                108D
         QUSEC             DS(16)                 95D    199
         QUSEC_T           DS(16)               1994D   2918
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     73
                           TEMPLATE
*RNF7031   BYTESAVAILABLE  I(10,0)              1996D
*RNF7031   BYTESPROVIDED   I(10,0)              1995D
*RNF7031   EXCEPTIONID     A(7)                 1997D
*RNF7031   RESERVED        A(1)                 1998D
*RNF7031 QUSEI             A(7)                  101D
*RNF7031 QUSEI00           A(7)                  116D
*RNF7031 QUSERVED          A(1)                  103D
*RNF7031 QUSERVED39        A(1)                  118D
*RNF7031 QUSK01            I(10,0)               110D
*RNF7031 QUSLED01          I(10,0)               124D
*RNF7031 QUSOED01          I(10,0)               122D
*RNF7031 RAND              I(10,0)               253D
                           PROTOTYPE
*RNF7031 REQUESTCONTROLBLOCKLOWER...
                           DS(22)                179D
*RNF7031   CASE            I(10,0)               183D
*RNF7031   CCSID           I(10,0)               182D
*RNF7031   RES1            A(10)                 184D
*RNF7031   TYPE            I(10,0)               181D
         REQUESTCONTROLBLOCKUPPER...
                           DS(22)                186D    195
*RNF7031   CASE            I(10,0)               190D
*RNF7031   CCSID           I(10,0)               189D
*RNF7031   RES1            A(10)                 191D
*RNF7031   TYPE            I(10,0)               188D
*RNF7031 SRAND             PROTOTYPE             250D
*RNF7031 STOMP_ACK_MODE_AUTO...
                           CONST                2074D
*RNF7031 STOMP_ACK_MODE_CLIENT...
                           CONST                2075D
*RNF7031 STOMP_ACK_MODE_CLIENT_INDIVIDUAL...
                           CONST                2076D
*RNF7031 STOMP_ADDOPENRECEIPT...
                           PROTOTYPE            2427D
*RNF7031 STOMP_CLOSE       PROTOTYPE            2133D
*RNF7031 STOMP_CREATE      *(16)                2107D
                           PROTOTYPE
*RNF7031 STOMP_FINALIZE    PROTOTYPE            2145D
*RNF7031 STOMP_FRAME_BODY_LENGTH...
                           CONST                2559D
         STOMP_FRAME_COMMAND...
                           A(20)                2557D   2651    2744    2756
                           VARYING(2)           2908    2942    3120    3134
                           TEMPLATE
         STOMP_FRAME_CONTAINSHEADER...
                           N(1)                 2828D   3083
                           PROTOTYPE
         STOMP_FRAME_CREATE...
                           *(16)                2650D   2940
                           PROTOTYPE
         STOMP_FRAME_DUMP  PROTOTYPE            2841D   3314
         STOMP_FRAME_EXITHANDLER...
                           PROTOTYPE            2922    2928
         STOMP_FRAME_FINALIZE...
                           PROTOTYPE            2662D   2973
         STOMP_FRAME_GETBODY...
                           DS(20)               2795D   3172
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     74
                           PROTOTYPE
         STOMP_FRAME_GETCOMMAND...
                           A(20)                2756D   3133
                           VARYING(2)
                           PROTOTYPE
         STOMP_FRAME_GETHEADER...
                           A(1000)              2696D   3055
                           VARYING(2)
                           PROTOTYPE
         STOMP_FRAME_HEADER_KEY...
                           A(100)               2555D   2562    2680    2698
                           VARYING(2)           2729    2830    3001    3019
                           TEMPLATE             3058    3086
         STOMP_FRAME_HEADER_T...
                           DS(1104)             2561D   3006    3023    3062
                           TEMPLATE             3090    3211
*RNF7031   KEY             A(100)               2562D
                           VARYING(2)
*RNF7031   VALUE           A(1000)              2563D
                           VARYING(2)
         STOMP_FRAME_HEADER_VALUE...
                           A(1000)              2556D   2563    2681    2696
                           VARYING(2)           3002    3056
                           TEMPLATE
*RNF7031 STOMP_FRAME_HEADER_VALUE_LENGTH...
                           CONST                2558D
         STOMP_FRAME_INIT  I(10,0)                28D   2915
                           PROTOTYPE
         STOMP_FRAME_LISTHEADERS...
                           *(16)                2713D   3106
                           PROTOTYPE
         STOMP_FRAME_REMOVEHEADER...
                           PROTOTYPE            2727D   3016
         STOMP_FRAME_SERIALIZE...
                           DS(20)               2813D   3202    3321
                           PROTOTYPE
         STOMP_FRAME_SETBODY...
                           PROTOTYPE            2775D   3144
         STOMP_FRAME_SETCOMMAND...
                           PROTOTYPE            2742D   2955M   3117
         STOMP_FRAME_SETHEADER...
                           PROTOTYPE            2678D   2998    3233M   3242M
                                                3247M
         STOMP_FRAME_T     DS(68)               2907D   2946    2949    2978
                           TEMPLATE             3005    3022    3061    3089
                                                3111    3123    3138    3151
                                                3177    3192    3208    3344
*RNF7031   BODY            *(16)                2910D
*RNF7031   BODYLENGTH      U(10,0)              2911D
*RNF7031   COMMAND         A(20)                2908D
                           VARYING(2)
*RNF7031   HEADERS         *(16)                2909D
         STOMP_FRAME_TOSTRING...
                           A(1000000)           2853D   3187
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           PROTOTYPE
*RNF7031 STOMP_GETEXTENSION...
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     75
                           *(16)                2328D
                           PROTOTYPE
*RNF7031 STOMP_GETHEARTBEATSERVER...
                           U(10,0)              2484D
                           PROTOTYPE
*RNF7031 STOMP_GETNUMBEROFOPENRECEIPTS...
                           I(10,0)              2441D
                           PROTOTYPE
*RNF7031 STOMP_GETOPTIONVALUE...
                           *(16)                2385D
                           PROTOTYPE
*RNF7031 STOMP_GETSESSIONID...
                           A(100)               2288D
                           PROTOTYPE
*RNF7031 STOMP_GETTRANSACTIONID...
                           A(100)               2459D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 STOMP_HASOPTION   N(1)                 2401D
                           PROTOTYPE
*RNF7031 STOMP_HEARTBEAT_NONE...
                           CONST                2091D
*RNF7031 STOMP_ISUSINGRECEIPTS...
                           N(1)                 2371D
                           PROTOTYPE
         STOMP_LOG         PROTOTYPE            2503D   2967M   2992M   3012M
                                                3046M   3168M
         STOMP_LOG_CREATE  *(16)                2495D   2920
                           PROTOTYPE
         STOMP_LOG_DISPOSE PROTOTYPE            2499D   2936M
         STOMP_MAX_FRAME_SIZE...
                           CONST                2090D   3188    3212    3213
                                                3254    3255
*RNF7031 STOMP_MIME_BINARY CONST                2085D
         STOMP_MIME_CHARSETTOCCSID...
                           I(10,0)              1985D   3236
                           PROTOTYPE
*RNF7031 STOMP_MIME_HTML   CONST                2087D
*RNF7031 STOMP_MIME_JSON   CONST                2089D
*RNF7031 STOMP_MIME_PARSE  DS(306)              1977D
                           PROTOTYPE
         STOMP_MIME_T      DS(306)              1970D   1977    1982
                           TEMPLATE
*RNF7031   CHARSET         A(100)               1973D
                           VARYING(2)
*RNF7031   SUBTYPE         A(100)               1972D
                           VARYING(2)
*RNF7031   TYPE            A(100)               1971D
                           VARYING(2)
*RNF7031 STOMP_MIME_TEXT   CONST                2086D
*RNF7031 STOMP_MIME_TOSTRING...
                           A(1000)              1981D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 STOMP_MIME_XML    CONST                2088D
*RNF7031 STOMP_OPEN        PROTOTYPE            2121D
*RNF7031 STOMP_OPTION_ACK  CONST                2079D
*RNF7031 STOMP_OPTION_CHARSET...
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     76
                           CONST                2083D
*RNF7031 STOMP_OPTION_CLIENT_ID...
                           CONST                2078D
*RNF7031 STOMP_OPTION_CONTENT_TYPE...
                           CONST                2082D
*RNF7031 STOMP_OPTION_DURABLE_SUBSCRIBER...
                           CONST                2081D
*RNF7031 STOMP_OPTION_PERSISTENT...
                           CONST                2080D
*RNF7031 STOMP_OPTION_TIMEOUT...
                           CONST                2077D
*RNF7031 STOMP_OPTION_VIRTUAL_HOST...
                           CONST                2084D
         STOMP_RECEIPTID_T A(50)                2068D   2429
                           VARYING(2)
                           TEMPLATE
*RNF7031 STOMP_RECEIVEFRAME...
                           *(16)                2196D
                           PROTOTYPE
*RNF7031 STOMP_SENDFRAME   PROTOTYPE            2164D
         STOMP_SESSIONID_T A(100)               2067D   2288    2416
                           TEMPLATE
*RNF7031 STOMP_SETACKMODE  PROTOTYPE            2274D
*RNF7031 STOMP_SETCLIENTID PROTOTYPE            2235D
*RNF7031 STOMP_SETCONTENTTYPE...
                           PROTOTYPE            2251D
*RNF7031 STOMP_SETDURABLESUBSCRIBERNAME...
                           PROTOTYPE            2300D
*RNF7031 STOMP_SETEXTENSION...
                           PROTOTYPE            2341D
*RNF7031 STOMP_SETHEARTBEATSERVER...
                           PROTOTYPE            2471D
*RNF7031 STOMP_SETPERSISTMESSAGES...
                           PROTOTYPE            2314D
*RNF7031 STOMP_SETSESSIONID...
                           PROTOTYPE            2414D
*RNF7031 STOMP_SETTIMEOUT  PROTOTYPE            2208D
*RNF7031 STOMP_SETTRANSACTIONID...
                           PROTOTYPE            2445D
*RNF7031 STOMP_SETVIRTUALHOST...
                           PROTOTYPE            2221D
*RNF7031 STOMP_USERECEIPTS PROTOTYPE            2355D
         STOMP_UTIL_BUFFER_CREATE...
                           DS(20)               2610D   3246
                           PROTOTYPE
         STOMP_UTIL_BUFFER_DISPOSE...
                           PROTOTYPE            2615D   3303M   3325M
         STOMP_UTIL_BUFFER_T...
                           DS(20)               2605D   2610    2616    2619
                           TEMPLATE             2795    2813    3173    3178
                                                3203    3207    3216    3319
*RNF7031   DATA            *(16)                2606D
*RNF7031   LENGTH          U(10,0)              2607D
         STOMP_UTIL_CONVERT...
                           DS(20)               2619D   3241
                           PROTOTYPE
         STOMP_UTIL_GETEXPLICITCHARSET...
                           A(100)               2630D   3228
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     77
                           VARYING(2)
                           PROTOTYPE
         STOMP_UTIL_HASBINARYCONTENT...
                           N(1)                 2626D   3230
                           PROTOTYPE
*RNF7031 STRCASECMP        I(10,0)               162D
                           PROTOTYPE
*RNF7031 STRCMP            I(10,0)               149D
                           PROTOTYPE
*RNF7031 STRCMPI           I(10,0)               158D
                           PROTOTYPE
*RNF7031 STRCSPN           I(10,0)               175D
                           PROTOTYPE
*RNF7031 STRERR            *(16)                 273D
                           PROTOTYPE
*RNF7031 STRERROR          *(16)                 276D
                           PROTOTYPE
         STRLEN            U(10,0)               146D   3156
                           PROTOTYPE
*RNF7031 STRNCASECMP       I(10,0)               166D
                           PROTOTYPE
*RNF7031 STRNCMP           I(10,0)               153D
                           PROTOTYPE
*RNF7031 STRSTR            *(16)                 171D
                           PROTOTYPE
*RNF7031 STRTOK            *(16)                 142D
                           PROTOTYPE
*RNF7031 SYSTEM            I(10,0)               247D
                           PROTOTYPE
*RNF7031 TMPNAM            *(16)                 241D
                           PROTOTYPE
*RNF7031 TMPNAMIFS         *(16)                 244D
                           PROTOTYPE
*RNF7031 UNICODE_APOSTROPHE...
                           CONST                2869D
*RNF7031 UNICODE_BACKSLASH CONST                2867D
         UNICODE_COLON     CONST                2885D   3267
*RNF7031 UNICODE_COMMA     CONST                2889D
*RNF7031 UNICODE_DOT       CONST                2891D
*RNF7031 UNICODE_DOUBLE_QUOTE...
                           CONST                2871D
*RNF7031 UNICODE_EQUAL     CONST                2893D
*RNF7031 UNICODE_LEFT_BRACE...
                           CONST                2881D
*RNF7031 UNICODE_LEFT_BRACKET...
                           CONST                2877D
*RNF7031 UNICODE_LEFT_CURLY_BRACE...
                           CONST                2873D
*RNF7031 UNICODE_RIGHT_BRACE...
                           CONST                2883D
*RNF7031 UNICODE_RIGHT_BRACKET...
                           CONST                2879D
*RNF7031 UNICODE_RIGHT_CURLY_BRACE...
                           CONST                2875D
*RNF7031 UNICODE_SEMICOLON CONST                2887D
*RNF7031 UNICODE_SLASH     CONST                2865D
      Field References for subprocedure STOMP_FRAME_INIT
         Field             Attributes         References (D=Defined M=Modified)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     78
         ERRORCODE         DS(16)               2918D   2922
      Field References for subprocedure STOMP_FRAME_EXITHANDLER
         Field             Attributes         References (D=Defined M=Modified)
*RNF7031 ACTIVATIONGROUPMARK...
                           U(20,0)              2930D
                           BASED(_QRNL_PST+)
*RNF7031 REASON            U(10,0)              2931D
                           BASED(_QRNL_PST+)
*RNF7031 RESULTCODE        U(10,0)              2932D
                           BASED(_QRNL_PST+)
*RNF7031 USERRESULTCODE    U(10,0)              2933D
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_FRAME_CREATE
         Field             Attributes         References (D=Defined M=Modified)
         COMMAND           A(20)                2942D   2955
                           BASED(_QRNL_PST+)
                           VARYING(2)
         CONTENT           A(65535)             2947D   2960M   2961    2962
                           VARYING(2)           2963    2963
         FRAME             DS(68)               2946D   2951M   2952M   2961M
                           BASED(FRAMEPTR)      2962M   2963    2964    2964
           BODY            *(16)                2961    2963    2964
           BODYLENGTH      U(10,0)              2962    2964
           HEADERS         *(16)                2952
         FRAMEPTR          *(16)                2946    2949M   2955    2969
         PCONTENT          A(65335)             2943D   2960
                           BASED(_QRNL_PST+)
                           VARYING(2)
      Field References for subprocedure STOMP_FRAME_FINALIZE
         Field             Attributes         References (D=Defined M=Modified)
         FRAME             DS(68)               2978D   2984    2985M   2988
                           BASED(FRAMEPTR)      2989
           BODY            *(16)                2984    2985
           HEADERS         *(16)                2988    2989
         FRAMEPTR          *(16)                2975D   2978    2980    2994M
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_FRAME_SETHEADER
         Field             Attributes         References (D=Defined M=Modified)
         FRAME             DS(68)               3005D   3010
                           BASED(FRAMEPTR)
           HEADERS         *(16)                3010
         FRAMEPTR          *(16)                3000D   3005
                           BASED(_QRNL_PST+)
         HEADER            DS(1104)             3006D   3008M   3009M   3010
                                                3010
           KEY             A(100)               3008
                           VARYING(2)
           VALUE           A(1000)              3009
                           VARYING(2)
         KEY               A(100)               3001D   3008    3012
                           BASED(_QRNL_PST+)
                           VARYING(2)
         VALUE             A(1000)              3002D   3009    3012
                           BASED(_QRNL_PST+)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     79
                           VARYING(2)
      Field References for subprocedure STOMP_FRAME_REMOVEHEADER
         Field             Attributes         References (D=Defined M=Modified)
         FRAME             DS(68)               3022D   3032    3039    3042
                           BASED(FRAMEPTR)      3045
           HEADERS         *(16)                3032    3039    3042    3045
         FRAMEPTR          *(16)                3018D   3022
                           BASED(_QRNL_PST+)
         HEADER            DS(1104)             3023D   3034
                           BASED(PTR)
           KEY             A(100)               3034
                           VARYING(2)
         I                 I(10,0)              3024D   3029M   3035
         KEY               A(100)               3019D   3034    3046
                           BASED(_QRNL_PST+)
                           VARYING(2)
         PTR               *(16)                3023    3032M   3033    3039M
         RUNNING           N(1)                 3026D   3028    3048M
         X                 I(10,0)              3025D   3030M   3035M   3044
                                                3045
      Field References for subprocedure STOMP_FRAME_GETHEADER
         Field             Attributes         References (D=Defined M=Modified)
         FRAME             DS(68)               3061D   3064    3072    3076
                           BASED(FRAMEPTR)
           HEADERS         *(16)                3064    3072    3076
         FRAMEPTR          *(16)                3057D   3061
                           BASED(_QRNL_PST+)
         HEADER            DS(1104)             3062D   3066    3073
                           BASED(PTR)
           KEY             A(100)               3066
                           VARYING(2)
           VALUE           A(1000)              3073
                           VARYING(2)
         KEY               A(100)               3058D   3066
                           BASED(_QRNL_PST+)
                           VARYING(2)
         PTR               *(16)                3062    3064M   3065    3076M
      Field References for subprocedure STOMP_FRAME_CONTAINSHEADER
         Field             Attributes         References (D=Defined M=Modified)
         FRAME             DS(68)               3089D   3092    3095    3099
                           BASED(FRAMEPTR)
           HEADERS         *(16)                3092    3095    3099
         FRAMEPTR          *(16)                3085D   3089
                           BASED(_QRNL_PST+)
         HEADER            DS(1104)             3090D   3094
                           BASED(PTR)
           KEY             A(100)               3094
                           VARYING(2)
         KEY               A(100)               3086D   3094
                           BASED(_QRNL_PST+)
                           VARYING(2)
         PTR               *(16)                3090    3092M   3093    3099M
      Field References for subprocedure STOMP_FRAME_LISTHEADERS
         Field             Attributes         References (D=Defined M=Modified)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     80
         FRAME             DS(68)               3111D   3113
                           BASED(FRAMEPTR)
           HEADERS         *(16)                3113
         FRAMEPTR          *(16)                3108D   3111
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_FRAME_SETCOMMAND
         Field             Attributes         References (D=Defined M=Modified)
         COMMAND           A(20)                3120D   3125    3126    3129
                           BASED(_QRNL_PST+)
                           VARYING(2)
         FRAME             DS(68)               3123D   3129M
                           BASED(FRAMEPTR)
           COMMAND         A(20)                3129
                           VARYING(2)
         FRAMEPTR          *(16)                3119D   3123
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_FRAME_GETCOMMAND
         Field             Attributes         References (D=Defined M=Modified)
         FRAME             DS(68)               3138D   3140
                           BASED(FRAMEPTR)
           COMMAND         A(20)                3140
                           VARYING(2)
         FRAMEPTR          *(16)                3135D   3138
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_FRAME_SETBODY
         Field             Attributes         References (D=Defined M=Modified)
         BODY              *(16)                3147D   3156    3165    3168
                           BASED(_QRNL_PST+)
         FRAME             DS(68)               3151D   3154M   3156M   3159
                           BASED(FRAMEPTR)      3160M   3160    3162M   3162
                                                3162    3165    3165    3166
                                                3166
           BODY            *(16)                3159    3160    3162    3162
                                                3165    3166
           BODYLENGTH      U(10,0)              3154    3156    3160    3162
                                                3165    3166
         FRAMEPTR          *(16)                3146D   3151
                           BASED(_QRNL_PST+)
         LENGTH            U(10,0)              3148D   3154
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_FRAME_GETBODY
         Field             Attributes         References (D=Defined M=Modified)
         BUFFER            DS(20)               3178D   3180M   3181M   3183
           DATA            *(16)                3180
           LENGTH          U(10,0)              3181
         FRAME             DS(68)               3177D   3180    3181
                           BASED(FRAMEPTR)
           BODY            *(16)                3180
           BODYLENGTH      U(10,0)              3181
         FRAMEPTR          *(16)                3174D   3177
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_FRAME_TOSTRING
         Field             Attributes         References (D=Defined M=Modified)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     81
         FRAME             DS(68)               3192D   3194    3195    3195
                           BASED(FRAMEPTR)
           BODY            *(16)                3195
           BODYLENGTH      U(10,0)              3194    3195
         FRAMEPTR          *(16)                3189D   3192
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_FRAME_SERIALIZE
         Field             Attributes         References (D=Defined M=Modified)
         BUFFER            A(1103)              3210D   3259M   3260    3260
                           VARYING(2)           3261    3267M   3268    3268
                           CCSID(1208)          3269    3276M   3277    3277
                                                3278
         CCSID             I(10,0)              3215D   3236M   3237    3238M
                                                3241
         CHARSET           A(100)               3214D   3228M   3234    3236
                           VARYING(2)
         CONVBUFFER        DS(20)               3216D   3241M   3242    3246M
                                                3247    3287    3289    3289
                                                3290    3303
           DATA            *(16)                3289
           LENGTH          U(10,0)              3242    3247    3287    3289
                                                3290
         DATA              A(1000000)           3213D   3245
                           BASED(FRAME.BODY)
         FRAME             DS(68)               3208D   3213    3225    3226
                           BASED(FRAMEPTR)      3226    3226    3233    3241
                                                3241    3245    3259    3264
                                                3271    3281    3282    3282
                                                3282    3285    3285    3286
           BODY            *(16)                3213    3225    3241    3281
                                                3285
           BODYLENGTH      U(10,0)              3233    3241    3245    3285
                                                3286
           COMMAND         A(20)                3226    3226    3226    3259
                           VARYING(2)           3282    3282    3282
           HEADERS         *(16)                3264    3271
         FRAMEPTR          *(16)                3204D   3208    3219    3228
                           BASED(_QRNL_PST+)    3230    3233    3242    3247
         HEADER            DS(1104)             3211D   3267    3267
                           BASED(HEADERPTR)
           KEY             A(100)               3267
                           VARYING(2)
           VALUE           A(1000)              3267
                           VARYING(2)
         HEADERPTR         *(16)                3211    3264M   3265    3271M
         ISBINARYCONTENT   N(1)                 3217D   3232M   3283
         SERIALIZED        DS(20)               3207D   3254M   3255    3258
                                                3261M   3266    3266    3269M
                                                3275    3275    3278M   3284
                                                3284    3286M   3288    3288
                                                3290M   3296    3296    3298M
                                                3300
           DATA            *(16)                3254    3255    3258    3266
                                                3275    3284    3288    3296
           LENGTH          U(10,0)              3261    3266    3269    3275
                                                3278    3284    3286    3288
                                                3290    3296    3298
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     82
         SPTR              *(16)                3209D   3258M   3260    3266M
                                                3268    3275M   3277    3284M
                                                3285    3288M   3289    3296M
                                                3297
         UTF8DATA          A(1000000)           3212D   3245M   3246    3246
                           VARYING(4)
                           CCSID(1208)
      Field References for subprocedure STOMP_FRAME_DUMP
         Field             Attributes         References (D=Defined M=Modified)
         BUFFER            DS(20)               3319D   3321M   3323    3323
                                                3325
           DATA            *(16)                3323
           LENGTH          U(10,0)              3323
         FRAME             *(16)                3316D   3321
                           BASED(_QRNL_PST+)
      Field References for subprocedure ISVALIDFRAME
         Field             Attributes         References (D=Defined M=Modified)
         FRAME             DS(68)               3344D   3346    3351
                           BASED(FRAMEPTR)
           COMMAND         A(20)                3346    3351
                           VARYING(2)
         FRAMEPTR          *(16)                3341D   3344
                           BASED(_QRNL_PST+)
      Indicator References:
         Indicator                            References (D=Defined M=Modified)
       * * * * *   E N D   O F   C R O S S   R E F E R E N C E   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     83
                      E x t e r n a l   R e f e r e n c e s
      Statically bound procedures:
         Procedure                            References
         ceil                                    232
         rand                                    253
         floor                                   235
         srand                                   250
         qsort                                   255
         fcntl                                   323
         strtok                                  142
         strlen                                  146    3156
         strcmp                                  149
         strstr                                  171
         memcpy                                  204    2963    3165    3260
                                                3268    3277    3285    3289
         memset                                  209    2964    3166    3255
                                                3297
         memcmp                                  219
         tmpnam                                  241
         system                                  247
         strncmp                                 153
         strcmpi                                 158
         strcspn                                 175
         memmove                                 214
         bsearch                                 261
         __errno                                 271
         strerror                                273     276
         list_add                                494
         list_get                                690
         CEE4RAGE2                                42    2922
         __memicmp                               224
         list_size                               916
         list_swap                               985
         list_copy                              1102    3113
         list_sort                              1569
         stomp_log                                 0    2967    2992    3012
                                                3046    3168
         strcasecmp                              162
         list_clear                              630
         list_split                             1073
         list_merge                             1604
         stomp_open                             2121
         strncasecmp                             166
         list_create                             449    2952
         list_addAll                             554
         list_remove                             578    3045
         list_rotate                             969
         stomp_close                            2133
         list_dispose                            466    2989
         list_addLast                            533
         list_isEmpty                            647
         list_replace                            668
         list_getLast                            725
         list_getNext                            746
         list_iterate                            764    3032    3039    3064
                                                3076    3092    3099    3264
                                                3271
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     84
         list_getPrev                            782
         list_indexOf                            854
         list_sublist                            934
         list_foreach                           1015
         list_reverse                           1086
         list_addLong                           1205
         list_addDate                           1373
         list_getLong                           1446
         list_getDate                           1536
         message_info                              0    3323
         stomp_create                           2107
         _C_IFS_tmpnam                           244
         list_addFirst                           514    3010
         list_getFirst                           708
         list_contains                           833
         list_toString                          1047
         list_addShort                          1233
         list_addFloat                          1261
         list_getShort                          1428
         list_getFloat                          1464
         QlgConvertCase                          193
         list_frequency                         1121
         list_addString                         1149
         list_addDouble                         1289
         list_getString                         1392
         list_getDouble                         1482
         message_status                            0
         message_escape                            0    3126    3220
         stomp_finalize                         2145
         list_removeLast                         613
         list_addInteger                        1177
         list_addBoolean                        1317
         list_addDecimal                        1345
         list_getInteger                        1410
         list_getBoolean                        1500
         list_getDecimal                        1518
         stomp_sendFrame                        2164
         stomp_hasOption                        2401
         list_removeFirst                        596
         list_lastIndexOf                        875
         list_toCharArray                        897
         list_removeRange                       1585
         stomp_mime_parse                          0
         stomp_setTimeout                       2208
         stomp_setAckMode                       2274
         stomp_log_create                          0    2920
         message_file_info                         0
         stomp_setClientId                      2235
         stomp_useReceipts                      2355
         stomp_log_dispose                         0    2936
         message_completion                        0
         message_diagnostic                        0
         stomp_receiveFrame                     2196
         stomp_getSessionId                     2288
         stomp_getExtension                     2328
         stomp_setExtension                     2341
         stomp_setSessionId                     2414
         stomp_util_convert                        0    3241
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     85
         list_abortIteration                     799
         list_resetIteration                     814    3042    3072    3095
         message_file_escape                       0
         stomp_mime_toString                       0
         stomp_setVirtualHost                   2221
         stomp_setContentType                      0
         stomp_getOptionValue                   2385
         stomp_addOpenReceipt                   2427
         stomp_isUsingReceipts                  2371
         message_receiveMessage                    0
         stomp_setTransactionId                    0
         stomp_getTransactionId                    0
         list_sort_insertionSort                1663
         message_sendInfoMessage                   0
         stomp_setPersistMessages               2314
         stomp_setHeartbeatServer                  0
         stomp_getHeartbeatServer                  0
         stomp_util_buffer_create                  0    3246
         message_sendEscapeMessage                 0
         message_sendStatusMessage                 0
         stomp_mime_charsetToCcsid                 0    3236
         stomp_util_buffer_dispose                 0    3303    3325
         message_receiveMessageInfo                0
         message_receiveMessageData                0
         message_receiveMessageText                0
         stomp_util_hasBinaryContent               0    3230
         message_sendCompletionMessage             0
         stomp_getNumberOfOpenReceipts          2441
         stomp_util_getExplicitCharset             0    3228
         stomp_setDurableSubscriberName         2300
         message_sendEscapeMessageToCaller         0
         message_sendEscapeMessageAboveControlBody
                                                   0
      Imported fields:
         Field             Attributes         Defined
         No references in the source.
      Exported fields:
         Field             Attributes         Defined
         No references in the source.
   * * * * *   E N D   O F   E X T E R N A L   R E F E R E N C E S   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     86
                          M e s s a g e   S u m m a r y
 Msg id  Sv Number Message text
*RNF5409 00     13 The prototyped call returns a value which is lost when CALLP
                   is used.
*RNF7031 00    261 The name or indicator is not referenced.
       * * * * *   E N D   O F   M E S S A G E   S U M M A R Y   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMPFRAME         OPENSRC    06/05/21 16:13:13        Page     87
                            F i n a l   S u m m a r y
  Message Totals:
    Information  (00) . . . . . . . :      274
    Warning      (10) . . . . . . . :        0
    Error        (20) . . . . . . . :        0
    Severe Error (30+)  . . . . . . :        0
    ---------------------------------  -------
    Total . . . . . . . . . . . . . :      274
  Source Totals:
    Records . . . . . . . . . . . . :     3373
    Specifications  . . . . . . . . :      991
    Data records  . . . . . . . . . :       15
    Comments  . . . . . . . . . . . :     2246
         * * * * *   E N D   O F   F I N A L   S U M M A R Y   * * * * *
Module STOMPFRAME placed in library STOMP. 00 highest severity. Created on 06/05/21 at 16:13:14.
          * * * * *   E N D   O F   C O M P I L A T I O N   * * * * *

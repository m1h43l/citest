system -i "CHGATR OBJ('stomp.rpgmod') ATR(*CCSID) VALUE(850)"
CPFB414: Attributes changed for 1 objects.  0 objects not changed.
system -iK "CRTRPGMOD STOMP/stomp SRCSTMF('stomp.rpgmod') OPTION(*NOUNREF) OPTIMIZE(*FULL) DBGVIEW(*LIST) INCDIR('../include/' '/home/mihael/include') TGTRLS(*CURRENT) STGMDL(*INHERIT) TGTCCSID(273)"                    
CPD000D: Command QSYS/CRTRPGMOD not safe for a multithreaded job.
RNS9305: Module STOMP placed in library STOMP. 00 highest severity. Created on 05/23/21 at 10:14:32.
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page      1
  Command  . . . . . . . . . . . . :   CRTRPGMOD
    Issued by  . . . . . . . . . . :     MIHAEL
  Module . . . . . . . . . . . . . :   STOMP
    Library  . . . . . . . . . . . :     STOMP
  Text 'description' . . . . . . . :   *SRCMBRTXT
  Source stream file   . . . . . . :   stomp.rpgmod
    CCSID  . . . . . . . . . . . . :     850
  Target CCSID . . . . . . . . . . :   273
  Text 'description' . . . . . . . :
  Last Change  . . . . . . . . . . :   05/23/21  08:38:21
  Generation severity level  . . . :   10
  Compiler options . . . . . . . . :   *XREF      *GEN       *NOSECLVL  *SHOWCPY
                                       *EXPDDS    *EXT       *NOSHOWSKP *NOSRCSTMT
                                       *DEBUGIO   *NOUNREF   *NOEVENTF
  Debugging views  . . . . . . . . :   *LIST
  Debug encryption key . . . . . . :   *NONE
  Output . . . . . . . . . . . . . :   *PRINT
  Optimization level . . . . . . . :   *FULL
  Source listing indentation . . . :   *NONE
  Type conversion options  . . . . :   *NONE
  Sort sequence  . . . . . . . . . :   *HEX
  Language identifier  . . . . . . :   *JOBRUN
  Replace module . . . . . . . . . :   *YES
  Authority  . . . . . . . . . . . :   *LIBCRTAUT
  Truncate numeric . . . . . . . . :   *YES
  Fix numeric  . . . . . . . . . . :   *NONE
  Target release . . . . . . . . . :   *CURRENT
  Allow null values  . . . . . . . :   *NO
  Storage model . . .  . . . . . . :   *INHERIT
  Binding directory  . . . . . . . :   *NONE
  Define condition names . . . . . :   *NONE
  Enable performance collection  . :   *PEP
  Profiling data . . . . . . . . . :   *NOCOL
  Licensed Internal Code options . :
  Generate program interface . . . :   *NO
  Include directory  . . . . . . . :   ../include/
                                   :   /home/mihael/include
  Preprocessor options . . . . . . :   *NONE
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page      2
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
                          S o u r c e   L i s t i n g
     1 **FREE                                                                                                               000001
     2                                                                                                                      000002
     3 //                          The MIT License (MIT)                                                                    000003
     4 //                                                                                                                   000004
     5 // Copyright (c) 2021 Mihael Schmidt                                                                                 000005
     6 //                                                                                                                   000006
     7 // Permission is hereby granted, free of charge, to any person obtaining a copy                                      000007
     8 // of this software and associated documentation files (the "Software"), to deal                                     000008
     9 // in the Software without restriction, including without limitation the rights                                      000009
    10 // to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                         000010
    11 // copies of the Software, and to permit persons to whom the Software is                                             000011
    12 // furnished to do so, subject to the following conditions:                                                          000012
    13 //                                                                                                                   000013
    14 // The above copyright notice and this permission notice shall be included in                                        000014
    15 // all copies or substantial portions of the Software.                                                               000015
    16 //                                                                                                                   000016
    17 // THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                        000017
    18 // IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                          000018
    19 // FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                       000019
    20 // AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                            000020
    21 // LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                     000021
    22 // OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                     000022
    23 // SOFTWARE.                                                                                                         000023
    24                                                                                                                      000024
    25                                                                                                                      000025
    26 ctl-opt nomain;                                                                                                      000026
    27                                                                                                                      000027
    28                                                                                                                      000028
    29 //                                                                                                                   000029
    30 // Prototypes                                                                                                        000030
    31 //                                                                                                                   000031
    32 dcl-pr stomp_init int(10) extproc(*dclcase) end-pr;                                                                  000032
    33                                                                                                                      000033
    34 dcl-pr waitForReceipts extproc('waitForReceipts');                                                                   000034
    35   conn pointer const;                                                                                                000035
    36 end-pr;                                                                                                              000036
    37                                                                                                                      000037
    38                                                                                                                      000038
    39 /define SOCKET_UNIX98                                                                                                000039
    40                                                                                                                      000040
    41 /include 'errno_h.rpgle'                                                                                             000041
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  errno_h.r+                                                   *                     1
        * External name  . . . . . . :  ../include/errno_h.rpgle                                     *                     1
        * Last change  . . . . . . . :  08/21/18  18:21:24                                           *                     1
        *--------------------------------------------------------------------------------------------*
    42+/*-                                                                            +                                    1000001
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page      3
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    43+ * Copyright (c) 2001 Scott C. Klement                                         +                                    1000002
    44+ * All rights reserved.                                                        +                                    1000003
    45+ *                                                                             +                                    1000004
    46+ * Redistribution and use in source and binary forms, with or without          +                                    1000005
    47+ * modification, are permitted provided that the following conditions          +                                    1000006
    48+ * are met:                                                                    +                                    1000007
    49+ * 1. Redistributions of source code must retain the above copyright           +                                    1000008
    50+ *    notice, this list of conditions and the following disclaimer.            +                                    1000009
    51+ * 2. Redistributions in binary form must reproduce the above copyright        +                                    1000010
    52+ *    notice, this list of conditions and the following disclaimer in the      +                                    1000011
    53+ *    documentation and/or other materials provided with the distribution.     +                                    1000012
    54+ *                                                                             +                                    1000013
    55+ * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND      +                                    1000014
    56+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE       +                                    1000015
    57+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE  +                                    1000016
    58+ * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE     +                                    1000017
    59+ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL  +                                    1000018
    60+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS     +                                    1000019
    61+ * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)       +                                    1000020
    62+ * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  +                                    1000021
    63+ * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY   +                                    1000022
    64+ * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF      +                                    1000023
    65+ * SUCH DAMAGE.                                                                +                                    1000024
    66+ *                                                                             +                                    1000025
    67+ */                                                                            +                                    1000026
    68+                                                                                                                    1000027
    69+                                                                                                                    1000028
    70+ *-------------------------------------------------------------------                                               1000029
    71+ * error constant definitions                                                                                       1000030
    72+ *-------------------------------------------------------------------                                               1000031
    73+                                                                                                                    1000032
    74+ * these values come originally from file QCLE/H member ERRNO                                                       1000033
    75+                                                                                                                    1000034
    76+ * domain error in math function                                                                                    1000035
    77+D EDOM            C                   3001                                                                          1000036
    78+ * range error in math function                                                                                     1000037
    79+D ERANGE          C                   3002                                                                          1000038
    80+ * truncation on I/O operation                                                                                      1000039
    81+D ETRUNC          C                   3003                                                                          1000040
    82+ * file has not been opened                                                                                         1000041
    83+D ENOTOPEN        C                   3004                                                                          1000042
    84+ * file not opened for read                                                                                         1000043
    85+D ENOTREAD        C                   3005                                                                          1000044
    86+ * file opened for record I/O                                                                                       1000045
    87+D ERECIO          C                   3008                                                                          1000046
    88+ * file not opened for write                                                                                        1000047
    89+D ENOTWRITE       C                   3009                                                                          1000048
    90+ * stdin cannot be opened                                                                                           1000049
    91+D ESTDIN          C                   3010                                                                          1000050
    92+ * stdout cannot be opened                                                                                          1000051
    93+D ESTDOUT         C                   3011                                                                          1000052
    94+ * stderr cannot be opened                                                                                          1000053
    95+D ESTDERR         C                   3012                                                                          1000054
    96+ * bad offset to seek to                                                                                            1000055
    97+D EBADSEEK        C                   3013                                                                          1000056
    98+ * invalid file name specified                                                                                      1000057
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page      4
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    99+D EBADNAME        C                   3014                                                                          1000058
   100+ * invalid file mode specified                                                                                      1000059
   101+D EBADMODE        C                   3015                                                                          1000060
   102+ * invalid position specifier                                                                                       1000061
   103+D EBADPOS         C                   3017                                                                          1000062
   104+ * no record at specified position                                                                                  1000063
   105+D ENOPOS          C                   3018                                                                          1000064
   106+ * no ftell if more than 1 member                                                                                   1000065
   107+D ENUMMBRS        C                   3019                                                                          1000066
   108+ * no ftell if too many records                                                                                     1000067
   109+D ENUMRECS        C                   3020                                                                          1000068
   110+ * invalid function pointer                                                                                         1000069
   111+D EBADFUNC        C                   3022                                                                          1000070
   112+ * record not found                                                                                                 1000071
   113+D ENOREC          C                   3026                                                                          1000072
   114+ * message data invalid                                                                                             1000073
   115+D EBADDATA        C                   3028                                                                          1000074
   116+ * bad option on I/O function                                                                                       1000075
   117+D EBADOPT         C                   3040                                                                          1000076
   118+ * file not opened for update                                                                                       1000077
   119+D ENOTUPD         C                   3041                                                                          1000078
   120+ * file not opened for delete                                                                                       1000079
   121+D ENOTDLT         C                   3042                                                                          1000080
   122+ * padding occurred on write operation                                                                              1000081
   123+D EPAD            C                   3043                                                                          1000082
   124+ * bad key length option                                                                                            1000083
   125+D EBADKEYLN       C                   3044                                                                          1000084
   126+ * illegal write after read                                                                                         1000085
   127+D EPUTANDGET      C                   3080                                                                          1000086
   128+ * illegal read after write                                                                                         1000087
   129+D EGETANDPUT      C                   3081                                                                          1000088
   130+ * I/O exception non-recoverable error                                                                              1000089
   131+D EIOERROR        C                   3101                                                                          1000090
   132+ * I/O exception recoverable error                                                                                  1000091
   133+D EIORECERR       C                   3102                                                                          1000092
   134+                                                                                                                    1000093
   135+ * The following were taken from QSYSINC/SYS ERRNO:                                                                 1000094
   136+                                                                                                                    1000095
   137+ *  Permission denied.                                                                                              1000096
   138+D EACCES          C                   3401                                                                          1000097
   139+ *  Not a directory.                                                                                                1000098
   140+D ENOTDIR         C                   3403                                                                          1000099
   141+ *  No space available.                                                                                             1000100
   142+D ENOSPC          C                   3404                                                                          1000101
   143+ *  Improper link.                                                                                                  1000102
   144+D EXDEV           C                   3405                                                                          1000103
   145+ *  Operation would have caused the process                                                                         1000104
   146+D EWOULDBLOCK     C                   3406                                                                          1000105
   147+ *  Operation would have caused the process                                                                         1000106
   148+D EAGAIN          C                   3406                                                                          1000107
   149+ *  Interrupted function call.                                                                                      1000108
   150+D EINTR           C                   3407                                                                          1000109
   151+ *  The address used for an argument was no                                                                         1000110
   152+D EFAULT          C                   3408                                                                          1000111
   153+ *  Operation timed out                                                                                             1000112
   154+D ETIME           C                   3409                                                                          1000113
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page      5
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   155+ *  No such device or address                                                                                       1000114
   156+D ENXIO           C                   3415                                                                          1000115
   157+ *  Socket closed                                                                                                   1000116
   158+D ECLOSED         C                   3417                                                                          1000117
   159+ *  Address already in use.                                                                                         1000118
   160+D EADDRINUSE      C                   3420                                                                          1000119
   161+ *  Address not available.                                                                                          1000120
   162+D EADDRNOTAVAIL   C                   3421                                                                          1000121
   163+ *  The type of socket is not supported in                                                                          1000122
   164+D EAFNOSUPPORT    C                   3422                                                                          1000123
   165+ *  Operation already in progress.                                                                                  1000124
   166+D EALREADY        C                   3423                                                                          1000125
   167+ *  Connection ended abnormally.                                                                                    1000126
   168+D ECONNABORTED    C                   3424                                                                          1000127
   169+ *  A remote host refused an attempted conn                                                                         1000128
   170+D ECONNREFUSED    C                   3425                                                                          1000129
   171+ *  A connection with a remote socket was r                                                                         1000130
   172+D ECONNRESET      C                   3426                                                                          1000131
   173+ *  Operation requires destination address.                                                                         1000132
   174+D EDESTADDRREQ    C                   3427                                                                          1000133
   175+ *  A remote host is not available.                                                                                 1000134
   176+D EHOSTDOWN       C                   3428                                                                          1000135
   177+ *  A route to the remote host is not avail                                                                         1000136
   178+D EHOSTUNREACH    C                   3429                                                                          1000137
   179+ *  Operation in progress.                                                                                          1000138
   180+D EINPROGRESS     C                   3430                                                                          1000139
   181+ *  A connection has already been establish                                                                         1000140
   182+D EISCONN         C                   3431                                                                          1000141
   183+ *  Message size out of range.                                                                                      1000142
   184+D EMSGSIZE        C                   3432                                                                          1000143
   185+ *  The network is not currently available.                                                                         1000144
   186+D ENETDOWN        C                   3433                                                                          1000145
   187+ *  A socket is connected to a host that is                                                                         1000146
   188+D ENETRESET       C                   3434                                                                          1000147
   189+ *  Cannot reach the destination network.                                                                           1000148
   190+D ENETUNREACH     C                   3435                                                                          1000149
   191+ *  There is not enough buffer space for th                                                                         1000150
   192+D ENOBUFS         C                   3436                                                                          1000151
   193+ *  The protocol does not support the speci                                                                         1000152
   194+D ENOPROTOOPT     C                   3437                                                                          1000153
   195+ *  Requested operation requires a connecti                                                                         1000154
   196+D ENOTCONN        C                   3438                                                                          1000155
   197+ *  The specified descriptor does not refer                                                                         1000156
   198+D ENOTSOCK        C                   3439                                                                          1000157
   199+ *  Operation not supported.                                                                                        1000158
   200+D ENOTSUP         C                   3440                                                                          1000159
   201+ *  Operation not supported.                                                                                        1000160
   202+D EOPNOTSUPP      C                   3440                                                                          1000161
   203+ *  The socket protocol family is not suppo                                                                         1000162
   204+D EPFNOSUPPORT    C                   3441                                                                          1000163
   205+ *  No protocol of the specified type and d                                                                         1000164
   206+D EPROTONO...                                                                                                       1000165
   207+DSUPPORT          C                   3442                                                                          1000166
   208+ *  The socket type or protocols are not co                                                                         1000167
   209+D EPROTOTYPE      C                   3443                                                                          1000168
   210+ *  An error indication was sent by the pee                                                                         1000169
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page      6
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   211+D ERCVDERR        C                   3444                                                                          1000170
   212+ *  Cannot send data after a shutdown.                                                                              1000171
   213+D ESHUTDOWN       C                   3445                                                                          1000172
   214+ *  The specified socket type is not suppor                                                                         1000173
   215+D ESOCKTNO...                                                                                                       1000174
   216+D SUPPORT         C                   3446                                                                          1000175
   217+ *  A remote host did not respond within th                                                                         1000176
   218+D ETIMEDOUT       C                   3447                                                                          1000177
   219+ *  The protocol required to support the sp                                                                         1000178
   220+D EUNATCH         C                   3448                                                                          1000179
   221+ *  Descriptor not valid.                                                                                           1000180
   222+D EBADF           C                   3450                                                                          1000181
   223+ *  Too many open files for this process.                                                                           1000182
   224+D EMFILE          C                   3452                                                                          1000183
   225+ *  Too many open files in the system.                                                                              1000184
   226+D ENFILE          C                   3453                                                                          1000185
   227+ *  Broken pipe.                                                                                                    1000186
   228+D EPIPE           C                   3455                                                                          1000187
   229+ *  File exists.                                                                                                    1000188
   230+D EEXIST          C                   3457                                                                          1000189
   231+ *  Resource deadlock avoided.                                                                                      1000190
   232+D EDEADLK         C                   3459                                                                          1000191
   233+ *  Storage allocation request failed.                                                                              1000192
   234+D ENOMEM          C                   3460                                                                          1000193
   235+ *  The synchronization object no longer ex                                                                         1000194
   236+D EOWNERTERM      C                   3462                                                                          1000195
   237+ * The synchronization object was destroyed                                                                         1000196
   238+D EDESTROYED      C                   3463                                                                          1000197
   239+ *  Operation terminated.                                                                                           1000198
   240+D ETERM           C                   3464                                                                          1000199
   241+ *  Maximum link count for a file was excee                                                                         1000200
   242+D EMLINK          C                   3468                                                                          1000201
   243+ *  Seek request not supported for object.                                                                          1000202
   244+D ESPIPE          C                   3469                                                                          1000203
   245+ *  Function not implemented.                                                                                       1000204
   246+D ENOSYS          C                   3470                                                                          1000205
   247+ *  Specified target is a directory.                                                                                1000206
   248+D EISDIR          C                   3471                                                                          1000207
   249+ *  Read-only file system.                                                                                          1000208
   250+D EROFS           C                   3472                                                                          1000209
   251+ *  Unknown system state.                                                                                           1000210
   252+D EUNKNOWN        C                   3474                                                                          1000211
   253+ *  Iterator is invalid.                                                                                            1000212
   254+D EITERBAD        C                   3475                                                                          1000213
   255+ *  A damaged object was encountered.                                                                               1000214
   256+D EDAMAGE         C                   3484                                                                          1000215
   257+ *  A loop exists in the symbolic links.                                                                            1000216
   258+D ELOOP           C                   3485                                                                          1000217
   259+ *  A path name is too long.                                                                                        1000218
   260+D ENAMETOOLONG    C                   3486                                                                          1000219
   261+ *  No locks available                                                                                              1000220
   262+D ENOLCK          C                   3487                                                                          1000221
   263+ *  Directory not empty.                                                                                            1000222
   264+D ENOTEMPTY       C                   3488                                                                          1000223
   265+ *  System resources not available to compl                                                                         1000224
   266+D ENOSYSRSC       C                   3489                                                                          1000225
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page      7
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   267+ *  Conversion error.                                                                                               1000226
   268+D ECONVERT        C                   3490                                                                          1000227
   269+ *  Argument list too long.                                                                                         1000228
   270+D E2BIG           C                   3491                                                                          1000229
   271+ *  Conversion stopped due to input charact                                                                         1000230
   272+D EILSEQ          C                   3492                                                                          1000231
   273+ * Object has soft damage.                                                                                          1000232
   274+D ESOFTDAMAGE     C                   3497                                                                          1000233
   275+ *  User not enrolled in system distributio                                                                         1000234
   276+D ENOTENROLL      C                   3498                                                                          1000235
   277+ *  Object is suspended.                                                                                            1000236
   278+D EOFFLINE        C                   3499                                                                          1000237
   279+ * Object is a read only object.                                                                                    1000238
   280+D EROOBJ          C                   3500                                                                          1000239
   281+ * Area being read from or written to is lo                                                                         1000240
   282+D ELOCKED         C                   3506                                                                          1000241
   283+ * Object too large.                                                                                                1000242
   284+D EFBIG           C                   3507                                                                          1000243
   285+ * The semaphore, shared memory, or message                                                                         1000244
   286+D EIDRM           C                   3509                                                                          1000245
   287+ * The queue does not contain a message of                                                                          1000246
   288+D ENOMSG          C                   3510                                                                          1000247
   289+ * File ID conversion of a directory failed                                                                         1000248
   290+D EFILECVT        C                   3511                                                                          1000249
   291+ * A File ID could not be assigned when lin                                                                         1000250
   292+D EBADFID         C                   3512                                                                          1000251
   293+ * A File ID could not be assigned when lin                                                                         1000252
   294+D ESTALE          C                   3513                                                                          1000253
   295+ * No such process.                                                                                                 1000254
   296+D ESRCH           C                   3515                                                                          1000255
   297+ * Process not enabled for signals.                                                                                 1000256
   298+D ENOTSIGINIT     C                   3516                                                                          1000257
   299+ * No child process.                                                                                                1000258
   300+D ECHILD          C                   3517                                                                          1000259
   301+ * The operation would have exceeded the ma                                                                         1000260
   302+D ETOOMANYREFS    C                   3523                                                                          1000261
   303+ * Function not allowed.                                                                                            1000262
   304+D ENOTSAFE        C                   3524                                                                          1000263
   305+ * Object is too large to process.                                                                                  1000264
   306+D EOVERFLOW       C                   3525                                                                          1000265
   307+ * Journal damaged.                                                                                                 1000266
   308+D EJRNDAMAGE      C                   3526                                                                          1000267
   309+ * Journal inactive.                                                                                                1000268
   310+D EJRNINACTIVE    C                   3527                                                                          1000269
   311+ * Journal space or system storage error.                                                                           1000270
   312+D EJRNRCVSPC      C                   3528                                                                          1000271
   313+ * Journal is remote.                                                                                               1000272
   314+D EJRNRMT         C                   3529                                                                          1000273
   315+ * New journal receiver is needed.                                                                                  1000274
   316+D ENEWJRNRCV      C                   3530                                                                          1000275
   317+ * New journal is needed.                                                                                           1000276
   318+D ENEWJRN         C                   3531                                                                          1000277
   319+ * Object already journaled.                                                                                        1000278
   320+D EJOURNALED      C                   3532                                                                          1000279
   321+ * Entry too large to send.                                                                                         1000280
   322+D EJRNENTTOOLONG  C                   3533                                                                          1000281
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page      8
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   323+ * Object is a Datalink object.                                                                                     1000282
   324+D EDATALINK       C                   3534                                                                          1000283
   325+                                                                                                                    1000284
   326+ * The following values are defined by POSIX ISO/IEC 9945-1:1990                                                    1000285
   327+ *  (these were also taken from QCLE/H member ERRNO)                                                                1000286
   328+                                                                                                                    1000287
   329+ * invalid argument                                                                                                 1000288
   330+D EINVAL          C                   3021                                                                          1000289
   331+ * input/output error                                                                                               1000290
   332+D EIO             C                   3006                                                                          1000291
   333+ * no such device                                                                                                   1000292
   334+D ENODEV          C                   3007                                                                          1000293
   335+ * resource busy                                                                                                    1000294
   336+D EBUSY           C                   3029                                                                          1000295
   337+ * no such file or library                                                                                          1000296
   338+D ENOENT          C                   3025                                                                          1000297
   339+ * operation not permitted                                                                                          1000298
   340+D EPERM           C                   3027                                                                          1000299
   341+                                                                                                                    1000300
   342+ *-------------------------------------------------------------------                                               1000301
   343+ * prototype definitions                                                                                            1000302
   344+ *-------------------------------------------------------------------                                               1000303
   345+D c__errno        PR              *   ExtProc('__errno')                                                            1000304
   346+                                                                                                                    1000305
   347+D perror          PR                  ExtProc('perror')                                                             1000306
   348+D    comment                      *   value options(*string)                                                        1000307
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   349 /include 'ilecee.rpginc'                                                                                             000042
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  ilecee.rp+                                                   *                     2
        * External name  . . . . . . :  ../include/ilecee.rpginc                                     *                     2
        * Last change  . . . . . . . :  05/20/21  19:17:09                                           *                     2
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   350+**FREE                                                                                                              2000001
   351+                                                                                                                    2000002
   352+/if defined (ILE_CEE_API)                                                                                           2000003
            LINES EXCLUDED: 1
   353+/endif                                                                                                              2000005
   354+                                                                                                                    2000006
   355+/define ILE_CEE_API                                                                                                 2000007
   356+                                                                                                                    2000008
   357+dcl-pr cee4rage2 extproc('CEE4RAGE2');                                                                              2000009
   358+  exitHandler pointer(*proc) const;                                                                                 2000010
   359+  feedback char(12);                                                                                                2000011
   360+end-pr;                                                                                                             2000012
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page      9
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   361 /include 'libc_h.rpgle'                                                                                              000043
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  libc_h.rp+                                                   *                     3
        * External name  . . . . . . :  ../include/libc_h.rpgle                                      *                     3
        * Last change  . . . . . . . :  08/21/18  18:21:24                                           *                     3
        *--------------------------------------------------------------------------------------------*
   362+ /if not defined(QUSEC)                                                                                             3000001
   363+ /define QUSEC                                                                                                      3000002
   364+ /copy QSYSINC/QRPGLESRC,QUSEC                                                                                      3000003
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  QUSEC                                                        *                     4
        * External name  . . . . . . :  QSYSINC/QRPGLESRC(QUSEC)                                     *                     4
        * Last change  . . . . . . . :  02/17/19  10:02:41                                           *                     4
        * Text 'description' . . . . :  COMMON STRUCTURE FOR ERROR CODE PARAMETER                    *                     4
        *--------------------------------------------------------------------------------------------*
   365+D*** START HEADER FILE SPECIFICATIONS ****************************                                        000000    4000001
   366+D*                                                                                                        000000    4000002
   367+D*Header File Name: H/QUSEC                                                                               000000    4000003
   368+D*                                                                                                        000000    4000004
   369+D*Descriptive Name: Error Code Parameter.                                                                 000000    4000005
   370+D*                                                                                                        000000    4000006
   371+D*5763-SS1, 5722-SS1 (C) Copyright IBM Corp. 1994, 2001.                                                  000000    4000007
   372+D*All rights reserved.                                                                                    000000    4000008
   373+D*US Government Users Restricted Rights -                                                                 000000    4000009
   374+D*Use, duplication or disclosure restricted                                                               000000    4000010
   375+D*by GSA ADP Schedule Contract with IBM Corp.                                                             000000    4000011
   376+D*                                                                                                        000000    4000012
   377+D*Licensed Materials-Property of IBM                                                                      000000    4000013
   378+D*                                                                                                        000000    4000014
   379+D*                                                                                                        000000    4000015
   380+D*Description: Include header file for the error code parameter.                                          000000    4000016
   381+D*                                                                                                        000000    4000017
   382+D*Header Files Included: None.                                                                            000000    4000018
   383+D*                                                                                                        000000    4000019
   384+D*Macros List: None.                                                                                      000000    4000020
   385+D*                                                                                                        000000    4000021
   386+D*Structure List: Qus_EC_t                                                                                000000    4000022
   387+D*             Qus_ERRC0200_t                                                                             000000    4000023
   388+D*                                                                                                        000000    4000024
   389+D*Function Prototype List: None.                                                                          000000    4000025
   390+D*                                                                                                        000000    4000026
   391+D*Change Activity:                                                                                        000000    4000027
   392+D*                                                                                                        000000    4000028
   393+D*CFD List:                                                                                               000000    4000029
   394+D*                                                                                                        000000    4000030
   395+D*FLAG REASON       LEVEL DATE   PGMR      CHANGE DESCRIPTION                                             000000    4000031
   396+D*---- ------------ ----- ------ --------- ----------------------                                         000000    4000032
   397+D*                                                                                                        000000    4000033
   398+D*End CFD List.                                                                                           000000    4000034
   399+D*                                                                                                        000000    4000035
   400+D*Additional notes about the Change Activity                                                              000000    4000036
   401+D*End Change Activity.                                                                                    000000    4000037
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     10
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   402+D*** END HEADER FILE SPECIFICATIONS ******************************                                        000000    4000038
   403+D*****************************************************************                                        000000    4000039
   404+D*Record structure for Error Code Parameter                                                               000000    4000040
   405+D****                                                          ***                                        000000    4000041
   406+D*NOTE: The following type definition only defines the fixed                                              000000    4000042
   407+D*   portion of the format.  Varying length field Exception                                               000000    4000043
   408+D*   Data will not be defined here.                                                                       000000    4000044
   409+D*****************************************************************                                        000000    4000045
   410+DQUSEC            DS                                                                                      000000    4000046
   411+D*                                             Qus EC                                                     000000    4000047
   412+D QUSBPRV                 1      4I 0                                                                     000000    4000048
   413+D*                                             Bytes Provided                                             000000    4000049
   414+D QUSBAVL                 5      8I 0                                                                     000000    4000050
   415+D*                                             Bytes Available                                            000000    4000051
   416+D QUSEI                   9     15                                                                        000000    4000052
   417+D*                                             Exception Id                                               000000    4000053
   418+D QUSERVED               16     16                                                                        000000    4000054
   419+D*                                             Reserved                                                   000000    4000055
   420+D*QUSED01                17     17                                                                        000000    4000056
   421+D*                                                                                                        000000    4000057
   422+D*                                      Varying length                                                    000000    4000058
   423+DQUSC0200         DS                                                                                      000000    4000059
   424+D*                                             Qus ERRC0200                                               000000    4000060
   425+D QUSK01                  1      4I 0                                                                     000000    4000061
   426+D*                                             Key                                                        000000    4000062
   427+D QUSBPRV00               5      8I 0                                                                     000000    4000063
   428+D*                                             Bytes Provided                                             000000    4000064
   429+D QUSBAVL14               9     12I 0                                                                     000000    4000065
   430+D*                                             Bytes Available                                            000000    4000066
   431+D QUSEI00                13     19                                                                        000000    4000067
   432+D*                                             Exception Id                                               000000    4000068
   433+D QUSERVED39             20     20                                                                        000000    4000069
   434+D*                                             Reserved                                                   000000    4000070
   435+D QUSCCSID11             21     24I 0                                                                     000000    4000071
   436+D*                                             CCSID                                                      000000    4000072
   437+D QUSOED01               25     28I 0                                                                     000000    4000073
   438+D*                                             Offset Exc Data                                            000000    4000074
   439+D QUSLED01               29     32I 0                                                                     000000    4000075
   440+D*                                             Length Exc Data                                            000000    4000076
   441+D*QUSRSV214              33     33                                                                        000000    4000077
   442+D*                                             Reserved2                                                  000000    4000078
   443+D*                                                                                                        000000    4000079
   444+D*QUSED02                34     34                                                                        000000    4000080
   445+D*                                                                                                        000000    4000081
   446+D*                                      Varying Length    @B1A                                            000000    4000082
   447+ /endif                                                                                                             3000004
   448+                                                                                                                    3000005
   449+ /if not defined (LIBC)                                                                                             3000006
   450+ /define LIBC                                                                                                       3000007
   451+ *-------------------------------------------------------------------------                                         3000008
   452+ * Prototypes for C-Functions                                                                                       3000009
   453+ *-------------------------------------------------------------------------                                         3000010
   454+ *                                                                                                                  3000011
   455+ * string functions                                                                                                 3000012
   456+ *                                                                                                                  3000013
   457+D strtok          PR              *   extproc('strtok')                                                             3000014
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     11
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   458+D  i_string                       *   value  options(*string)                                                       3000015
   459+D  i_token                        *   value  options(*string)                                                       3000016
   460+ *                                                                                                                  3000017
   461+D strlen          PR            10U 0 extproc('strlen')                                                             3000018
   462+D   string                        *   value                                                                         3000019
   463+ *                                                                                                                  3000020
   464+D strcmp          PR            10I 0 extproc('strcmp')                                                             3000021
   465+D  string1                        *   value                                                                         3000022
   466+D  string2                        *   value                                                                         3000023
   467+ *                                                                                                                  3000024
   468+D strncmp         PR            10I 0 extproc('strncmp')                                                            3000025
   469+D  string1                        *   value                                                                         3000026
   470+D  string2                        *   value                                                                         3000027
   471+D  count                        10I 0 value                                                                         3000028
   472+ *                                                                                                                  3000029
   473+D strcmpi         PR            10I 0 extproc('strcmpi')                                                            3000030
   474+D  string1                        *   value                                                                         3000031
   475+D  string2                        *   value                                                                         3000032
   476+ *                                                                                                                  3000033
   477+D strcasecmp      PR            10I 0 extproc('strcasecmp')                                                         3000034
   478+D  string1                        *   value                                                                         3000035
   479+D  string2                        *   value                                                                         3000036
   480+ *                                                                                                                  3000037
   481+D strncasecmp     PR            10I 0 extproc('strncasecmp')                                                        3000038
   482+D  string1                        *   value                                                                         3000039
   483+D  string2                        *   value                                                                         3000040
   484+D  count                        10I 0 value                                                                         3000041
   485+ *                                                                                                                  3000042
   486+D strstr          PR              *   extproc('strstr')                                                             3000043
   487+D  string1                        *   value                                                                         3000044
   488+D  string2                        *   value                                                                         3000045
   489+ *                                                                                                                  3000046
   490+D strcspn         PR            10I 0 extproc('strcspn')                                                            3000047
   491+D  string1                        *   value                                                                         3000048
   492+D  string2                        *   value                                                                         3000049
   493+ *                                                                                                                  3000050
   494+D requestControlBlockLower...                                                                                       3000051
   495+D                 DS                  qualified                                                                     3000052
   496+D   type                        10I 0 inz(0)                                                                        3000053
   497+D   ccsid                       10I 0 inz(0)                                                                        3000054
   498+D   case                        10I 0 inz(0)                                                                        3000055
   499+D   res1                        10A   inz(*ALLX'00')                                                                3000056
   500+ *                                                                                                                  3000057
   501+D requestControlBlockUpper...                                                                                       3000058
   502+D                 DS                  qualified                                                                     3000059
   503+D   type                        10I 0 inz(1)                                                                        3000060
   504+D   ccsid                       10I 0 inz(0)                                                                        3000061
   505+D   case                        10I 0 inz(0)                                                                        3000062
   506+D   res1                        10A   inz(*ALLX'00')                                                                3000063
   507+ *                                                                                                                  3000064
   508+D caseConvert     PR                  extproc('QlgConvertCase')                                                     3000065
   509+D   reqContBlock                      const                                                                         3000066
   510+D                                     likeds(requestControlBlockUpper)                                              3000067
   511+D   input                     1024A   const options(*varsize)                                                       3000068
   512+D   output                    1024A   options(*varsize)                                                             3000069
   513+D   len                         10I 0 const                                                                         3000070
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     12
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   514+D   errorcode                         likeds(QUSEC) options(*varsize)                                               3000071
   515+                                                                                                                    3000072
   516+ *                                                                                                                  3000073
   517+ * memory functions                                                                                                 3000074
   518+ *                                                                                                                  3000075
   519+D memcpy          PR              *          extproc('memcpy')                                                      3000076
   520+D  dest                           *   value                                                                         3000077
   521+D  source                         *   value                                                                         3000078
   522+D  count                        10U 0 value                                                                         3000079
   523+ *                                                                                                                  3000080
   524+D memset          PR              *          extproc('memset')                                                      3000081
   525+D  i_pDest                        *   value                                                                         3000082
   526+D  i_char                       10I 0 value                                                                         3000083
   527+D  i_count                      10U 0 value                                                                         3000084
   528+ *                                                                                                                  3000085
   529+D memmove         PR              *          extproc('memmove')                                                     3000086
   530+D  pMemDest                       *   value                                                                         3000087
   531+D  pMemSrc                        *   value                                                                         3000088
   532+D  memSize                      10U 0 value                                                                         3000089
   533+ *                                                                                                                  3000090
   534+D memcmp          PR            10I 0        extproc('memcmp')                                                      3000091
   535+D  pBuf1                          *   value                                                                         3000092
   536+D  pBuf2                          *   value                                                                         3000093
   537+D  count                        10U 0 value                                                                         3000094
   538+ *                                                                                                                  3000095
   539+D memicmp         PR            10I 0        extproc('__memicmp')                                                   3000096
   540+D  pBuf1                          *   value                                                                         3000097
   541+D  pBuf2                          *   value                                                                         3000098
   542+D  count                        10U 0 value                                                                         3000099
   543+                                                                                                                    3000100
   544+ *                                                                                                                  3000101
   545+ * math functions                                                                                                   3000102
   546+ *                                                                                                                  3000103
   547+D ceiling         PR             8F   extproc('ceil')                                                               3000104
   548+D   value                        8F   value                                                                         3000105
   549+ *                                                                                                                  3000106
   550+D floor           PR             8F   extproc('floor')                                                              3000107
   551+D   value                        8F   value                                                                         3000108
   552+                                                                                                                    3000109
   553+ *                                                                                                                  3000110
   554+ * other functions                                                                                                  3000111
   555+ *                                                                                                                  3000112
   556+D tmpnam          PR              *   extproc('tmpnam')                                                             3000113
   557+D   buffer                      39A   options(*omit)                                                                3000114
   558+ *                                                                                                                  3000115
   559+D tmpnamIFS       PR              *   extproc('_C_IFS_tmpnam')                                                      3000116
   560+D   buffer                      39A   options(*omit)                                                                3000117
   561+ *                                                                                                                  3000118
   562+D system          PR            10I 0 extproc('system')                                                             3000119
   563+D   command                       *   value options(*string)                                                        3000120
   564+ *                                                                                                                  3000121
   565+D srand           PR                         extproc('srand')                                                       3000122
   566+D  i_seed                       10U 0 value                                                                         3000123
   567+ *                                                                                                                  3000124
   568+D rand            PR            10I 0        extproc('rand')                                                        3000125
   569+ *                                                                                                                  3000126
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     13
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   570+D qsort           PR              *          extproc('qsort')                                                       3000127
   571+D  memPtr                         *   value                                                                         3000128
   572+D  numElem                      10U 0 value                                                                         3000129
   573+D  width                        10U 0 value                                                                         3000130
   574+D  pSortFunc                      *   value  procptr                                                                3000131
   575+ *                                                                                                                  3000132
   576+D bsearch         PR              *          extproc('bsearch')                                                     3000133
   577+D  keyPtr                         *   value                                                                         3000134
   578+D  memPtr                         *   value                                                                         3000135
   579+D  numElem                      10U 0 value                                                                         3000136
   580+D  width                        10U 0 value                                                                         3000137
   581+D  pSearchFnc                     *   value  procptr                                                                3000138
   582+                                                                                                                    3000139
   583+ *                                                                                                                  3000140
   584+ * error handling                                                                                                   3000141
   585+ *                                                                                                                  3000142
   586+D errno           PR              *   extproc('__errno')                                                            3000143
   587+ *                                                                                                                  3000144
   588+D strerr          PR              *   extproc('strerror')                                                           3000145
   589+D  errnum                       10I 0 value                                                                         3000146
   590+ * for backwards compatibility                                                                                      3000147
   591+D strerror        PR              *   extproc('strerror')                                                           3000148
   592+D  errnum                       10I 0 value                                                                         3000149
   593+                                                                                                                    3000150
   594+ /endif                                                                                                             3000151
   595+                                                                                                                    3000152
   596+ /if not defined(FCNTL_PROTOTYPE)                                                                                   3000153
   597+ *                                                                                                                  3000154
   598+ * fcntl() commands                                                                                                 3000155
   599+ *                                                                                                                  3000156
   600+D F_DUPFD         C                   0                                                                             3000157
   601+D F_GETFL         C                   6                                                                             3000158
   602+D F_SETFL         C                   7                                                                             3000159
   603+D F_GETOWN        C                   8                                                                             3000160
   604+D F_SETOWN        C                   9                                                                             3000161
   605+ *                                                                                                                  3000162
   606+ * fcntl() flags                                                                                                    3000163
   607+ *                                                                                                                  3000164
   608+D O_NONBLOCK      C                   128                                                                           3000165
   609+D O_NDELAY        C                   128                                                                           3000166
   610+D FNDELAY         C                   128                                                                           3000167
   611+D FASYNC          C                   512                                                                           3000168
   612+                                                                                                                    3000169
   613+ *--------------------------------------------------------------------                                              3000170
   614+ *   fcntl()--Change Descriptor Attributes                                                                          3000171
   615+ *                                                                                                                  3000172
   616+ *   int fcntl(int descriptor, int command, ...)                                                                    3000173
   617+ *                                                                                                                  3000174
   618+ *   The third parameter (when used with sockets) is also an                                                        3000175
   619+ *   integer passed by value.. it specifies an argument for                                                         3000176
   620+ *   some of the commands.                                                                                          3000177
   621+ *                                                                                                                  3000178
   622+ *   commands supported in sockets are:                                                                             3000179
   623+ *          F_GETFL -- Return the status flags for the descriptor                                                   3000180
   624+ *          F_SETFL -- Set status flags for the descriptor                                                          3000181
   625+ *                    (Arg =)status flags (ORed) to set.                                                            3000182
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     14
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   626+ * (the commands below arent terribly useful in RPG)                                                                3000183
   627+ *          F_DUPFD -- Duplicate the descriptor                                                                     3000184
   628+ *                    (Arg =)minimum value that new descriptor can be                                               3000185
   629+ *          F_GETOWN -- Return the process ID or group ID that's                                                    3000186
   630+ *                     set to receive SIGIO & SIGURG                                                                3000187
   631+ *          F_SETOWN -- Set the process ID or group ID that's                                                       3000188
   632+ *                     to receive SIGIO & SIGURG                                                                    3000189
   633+ *                    (Arg =)process ID (or neg value for group ID)                                                 3000190
   634+ *                                                                                                                  3000191
   635+ *  returns -1 upon error.                                                                                          3000192
   636+ *          successful values are command-specific.                                                                 3000193
   637+ *--------------------------------------------------------------------                                              3000194
   638+D fcntl           PR            10I 0 extproc('fcntl')                                                              3000195
   639+D   socketDesc                  10I 0 value                                                                         3000196
   640+D   command                     10I 0 value                                                                         3000197
   641+D   arg                         10I 0 value options(*nopass)                                                        3000198
   642+                                                                                                                    3000199
   643+ /define FCNTL_PROTOTYPE                                                                                            3000200
   644+ /endif                                                                                                             3000201
   645+                                                                                                                    3000202
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   646 /include 'libtree/libtree_h.rpgle'                                                                                   000044
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  libtree_h+                                                   *                     5
        * External name  . . . . . . :  /home/mihael/include/libtree/libtree_h.rpgle                 *                     5
        * Last change  . . . . . . . :  05/23/21  10:14:10                                           *                     5
        *--------------------------------------------------------------------------------------------*
   647+ /if not defined (LIBTREE_H)                                                                                        5000001
   648+ /define LIBTREE_H                                                                                                  5000002
   649+                                                                                                                    5000003
   650+                                                                                                                    5000004
   651+ *---------------------------------------------------------------------------------------------                     5000005
   652+ *                                                                                                                  5000006
   653+ * (C) Copyleft 2011 Mihael Schmidt                                                                                 5000007
   654+ *                                                                                                                  5000008
   655+ * This file is part of libtree.                                                                                    5000009
   656+ *                                                                                                                  5000010
   657+ * libtree is free software: you can redistribute it and/or modify                                                  5000011
   658+ * it under the terms of the GNU Lesser General Public License as published                                         5000012
   659+ * by the Free Software Foundation, either version 3 of the License, or                                             5000013
   660+ * any later version.                                                                                               5000014
   661+ *                                                                                                                  5000015
   662+ * libtree is distributed in the hope that it will be useful,                                                       5000016
   663+ * but WITHOUT ANY WARRANTY; without even the implied warranty of                                                   5000017
   664+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                                    5000018
   665+ * GNU Lesser General Public License for more details.                                                              5000019
   666+ *                                                                                                                  5000020
   667+ * You should have received a copy of the GNU Lesser General Public License                                         5000021
   668+ * along with libtree.  If not, see <http://www.gnu.org/licenses/>.                                                 5000022
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     15
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   669+ *                                                                                                                  5000023
   670+ *---------------------------------------------------------------------------------------------                     5000024
   671+                                                                                                                    5000025
   672+                                                                                                                    5000026
   673+ *-------------------------------------------------------------------------                                         5000027
   674+ * Data Structures                                                                                                  5000028
   675+ *-------------------------------------------------------------------------                                         5000029
   676+  // struct rbtree {                                                                                                5000030
   677+  //   struct rbtree_node *root;                                                                                    5000031
   678+  //   rbtree_cmp_fn_t cmp_fn;                                                                                      5000032
   679+  //   struct rbtree_node *first, *last;                                                                            5000033
   680+  // };                                                                                                             5000034
   681+D rbtree_t        DS                  qualified template align                                                      5000035
   682+D   root                          *                                                                                 5000036
   683+D   compare                       *   procptr                                                                       5000037
   684+D   first                         *                                                                                 5000038
   685+D   last                          *                                                                                 5000039
   686+                                                                                                                    5000040
   687+  // struct rbtree_node {                                                                                           5000041
   688+  //   struct rbtree_node *left, *right;                                                                            5000042
   689+  //   struct rbtree_node *parent;                                                                                  5000043
   690+  //   enum rb_color color;                                                                                         5000044
   691+  // };                                                                                                             5000045
   692+D rbnode_t        DS                  qualified template align                                                      5000046
   693+D   left                          *                                                                                 5000047
   694+D   right                         *                                                                                 5000048
   695+D   parent                        *                                                                                 5000049
   696+D   color                       10I 0                                                                               5000050
   697+                                                                                                                    5000051
   698+                                                                                                                    5000052
   699+ *-------------------------------------------------------------------------                                         5000053
   700+ * Prototypes                                                                                                       5000054
   701+ *-------------------------------------------------------------------------                                         5000055
   702+D rbtree_init     PR                  extproc('rbtree_init')                                                        5000056
   703+D   tree                          *   value                                                                         5000057
   704+D   compare                       *   procptr value                                                                 5000058
   705+D   flags                       10U 0 value                                                                         5000059
   706+ *                                                                                                                  5000060
   707+D rbtree_first    PR              *   extproc('rbtree_first')                                                       5000061
   708+D   tree                          *   value                                                                         5000062
   709+ *                                                                                                                  5000063
   710+D rbtree_last     PR              *   extproc('rbtree_last')                                                        5000064
   711+D   tree                          *   value                                                                         5000065
   712+ *                                                                                                                  5000066
   713+D rbtree_next     PR              *   extproc('rbtree_next')                                                        5000067
   714+D   node                          *   value                                                                         5000068
   715+ *                                                                                                                  5000069
   716+D rbtree_previous...                                                                                                5000070
   717+D                 PR              *   extproc('rbtree_prev')                                                        5000071
   718+D   node                          *   value                                                                         5000072
   719+ *                                                                                                                  5000073
   720+D rbtree_lookup   PR              *   extproc('rbtree_lookup')                                                      5000074
   721+D   key                           *   value                                                                         5000075
   722+D   tree                          *   value                                                                         5000076
   723+ *                                                                                                                  5000077
   724+D rbtree_insert   PR              *   extproc('rbtree_insert')                                                      5000078
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     16
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   725+D   node                          *   value                                                                         5000079
   726+D   tree                          *   value                                                                         5000080
   727+ *                                                                                                                  5000081
   728+D rbtree_remove   PR              *   extproc('rbtree_remove')                                                      5000082
   729+D   node                          *   value                                                                         5000083
   730+D   tree                          *   value                                                                         5000084
   731+ *                                                                                                                  5000085
   732+D rbtree_replace  PR              *   extproc('rbtree_replace')                                                     5000086
   733+D   oldNode                       *   value                                                                         5000087
   734+D   newNode                       *   value                                                                         5000088
   735+D   tree                          *   value                                                                         5000089
   736+                                                                                                                    5000090
   737+ /include 'rngrb_h.rpgle'                                                                                           5000091
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  rngrb_h.r+                                                   *                     6
        * External name  . . . . . . :  /home/mihael/include/libtree/rngrb_h.rpgle                   *                     6
        * Last change  . . . . . . . :  05/23/21  10:14:10                                           *                     6
        *--------------------------------------------------------------------------------------------*
   738+ /if not defined (RNGRB_H)                                                                                          6000001
   739+ /define RNGRB_H                                                                                                    6000002
   740+                                                                                                                    6000003
   741+ *-------------------------------------------------------------------------                                         6000004
   742+ * Prototypen                                                                                                       6000005
   743+ *-------------------------------------------------------------------------                                         6000006
   744+D tree_rb_create...                                                                                                 6000007
   745+D                 PR              *   extproc('tree_rb_create')                                                     6000008
   746+D   compareFunction...                                                                                              6000009
   747+D                                 *   procptr value                                                                 6000010
   748+D   deallocate                    N   const options(*nopass)                                                        6000011
   749+ *                                                                                                                  6000012
   750+D tree_rb_isEmpty...                                                                                                6000013
   751+D                 PR              N   extproc('tree_rb_isEmpty')                                                    6000014
   752+D   tree                          *   const                                                                         6000015
   753+ *                                                                                                                  6000016
   754+D tree_rb_size...                                                                                                   6000017
   755+D                 PR            10I 0 extproc('tree_rb_size')                                                       6000018
   756+D   tree                          *   const                                                                         6000019
   757+                                                                                                                    6000020
   758+ /endif                                                                                                             6000021
   759+                                                                                                                    6000022
   760+ /include 'rngrb_int_h.rpgle'                                                                                       5000092
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  rngrb_int+                                                   *                     7
        * External name  . . . . . . :  /home/mihael/include/libtree/rngrb_int_h.rpgle               *                     7
        * Last change  . . . . . . . :  05/23/21  10:14:10                                           *                     7
        *--------------------------------------------------------------------------------------------*
   761+ /if not defined (RNGRB_INT_H)                                                                                      7000001
   762+ /define RNGRB_INT_H                                                                                                7000002
   763+                                                                                                                    7000003
   764+ *-------------------------------------------------------------------------                                         7000004
   765+ * Prototypen                                                                                                       7000005
   766+ *-------------------------------------------------------------------------                                         7000006
   767+D tree_rb_int_put...                                                                                                7000007
   768+D                 PR                  extproc('tree_rb_int_put')                                                    7000008
   769+D  tree                           *   const                                                                         7000009
   770+D  key                          10I 0 const                                                                         7000010
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     17
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   771+D  value                          *   const options(*string)                                                        7000011
   772+D  length                       10I 0 const options(*nopass)                                                        7000012
   773+ *                                                                                                                  7000013
   774+D tree_rb_int_get...                                                                                                7000014
   775+D                 PR              *   extproc('tree_rb_int_get')                                                    7000015
   776+D   tree                          *   const                                                                         7000016
   777+D   key                         10I 0 const                                                                         7000017
   778+ *                                                                                                                  7000018
   779+D tree_rb_int_first...                                                                                              7000019
   780+D                 PR              *   extproc('tree_rb_int_first')                                                  7000020
   781+D   tree                          *   const                                                                         7000021
   782+ *                                                                                                                  7000022
   783+D tree_rb_int_last...                                                                                               7000023
   784+D                 PR              *   extproc('tree_rb_int_last')                                                   7000024
   785+D   tree                          *   const                                                                         7000025
   786+ *                                                                                                                  7000026
   787+D tree_rb_int_next...                                                                                               7000027
   788+D                 PR              *   extproc('tree_rb_int_next')                                                   7000028
   789+D   nodePtr                       *   const                                                                         7000029
   790+ *                                                                                                                  7000030
   791+D tree_rb_int_previous...                                                                                           7000031
   792+D                 PR              *   extproc('tree_rb_int_previous')                                               7000032
   793+D   nodePtr                       *   const                                                                         7000033
   794+ *                                                                                                                  7000034
   795+D tree_rb_int_containsKey...                                                                                        7000035
   796+D                 PR              N   extproc('tree_rb_int_containsKey')                                            7000036
   797+D   tree                          *   const                                                                         7000037
   798+D   key                         10I 0 const                                                                         7000038
   799+ *                                                                                                                  7000039
   800+D tree_rb_int_remove...                                                                                             7000040
   801+D                 PR                  extproc('tree_rb_int_remove')                                                 7000041
   802+D   tree                          *   const                                                                         7000042
   803+D   key                         10I 0 const                                                                         7000043
   804+ *                                                                                                                  7000044
   805+D tree_rb_int_removeByNode...                                                                                       7000045
   806+D                 PR                  extproc('tree_rb_int_removeByNode')                                           7000046
   807+D   tree                          *   const                                                                         7000047
   808+D   node                          *                                                                                 7000048
   809+ *                                                                                                                  7000049
   810+D tree_rb_int_container_of...                                                                                       7000050
   811+D                 PR              *   extproc('tree_rb_int_container_of')                                           7000051
   812+D   eNode                         *   value                                                                         7000052
   813+ *                                                                                                                  7000053
   814+D tree_rb_int_compare...                                                                                            7000054
   815+D                 PR            10I 0 extproc('tree_rb_int_compare')                                                7000055
   816+D  nodeA                          *   value                                                                         7000056
   817+D  nodeB                          *   value                                                                         7000057
   818+ *                                                                                                                  7000058
   819+D tree_rb_int_clear...                                                                                              7000059
   820+D                 PR                  extproc('tree_rb_int_clear')                                                  7000060
   821+D   tree                          *   const                                                                         7000061
   822+ *                                                                                                                  7000062
   823+D tree_rb_int_finalize...                                                                                           7000063
   824+D                 PR                  extproc('tree_rb_int_finalize')                                               7000064
   825+D  tree                           *                                                                                 7000065
   826+ *                                                                                                                  7000066
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     18
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   827+                                                                                                                    7000067
   828+                                                                                                                    7000068
   829+ *-------------------------------------------------------------------------                                         7000069
   830+ * Data Structures                                                                                                  7000070
   831+ *-------------------------------------------------------------------------                                         7000071
   832+D tree_node_int_t...                                                                                                7000072
   833+D                 DS                  qualified template align                                                      7000073
   834+D  key                          10I 0                                                                               7000074
   835+D  value                          *                                                                                 7000075
   836+D  length                       10I 0                                                                               7000076
   837+                                                                                                                    7000077
   838+ /endif                                                                                                             7000078
   839+                                                                                                                    7000079
   840+ /include 'rngrb_str_h.rpgle'                                                                                       5000093
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  rngrb_str+                                                   *                     8
        * External name  . . . . . . :  /home/mihael/include/libtree/rngrb_str_h.rpgle               *                     8
        * Last change  . . . . . . . :  05/23/21  10:14:10                                           *                     8
        *--------------------------------------------------------------------------------------------*
   841+ /if not defined (RNGRB_STR_H)                                                                                      8000001
   842+ /define RNGRB_STR_H                                                                                                8000002
   843+                                                                                                                    8000003
   844+ *-------------------------------------------------------------------------                                         8000004
   845+ * Prototypen                                                                                                       8000005
   846+ *-------------------------------------------------------------------------                                         8000006
   847+D tree_rb_string_put...                                                                                             8000007
   848+D                 PR                  extproc('tree_rb_string_put')                                                 8000008
   849+D   tree                          *   const                                                                         8000009
   850+D   key                      65535A   const varying                                                                 8000010
   851+D   value                         *   const options(*string)                                                        8000011
   852+D   length                      10I 0 const options(*nopass)                                                        8000012
   853+ *                                                                                                                  8000013
   854+D tree_rb_string_get...                                                                                             8000014
   855+D                 PR              *   extproc('tree_rb_string_get')                                                 8000015
   856+D   tree                          *   const                                                                         8000016
   857+D   key                      65535A   const varying                                                                 8000017
   858+ *                                                                                                                  8000018
   859+D tree_rb_string_first...                                                                                           8000019
   860+D                 PR              *   extproc('tree_rb_string_first')                                               8000020
   861+D   tree                          *   const                                                                         8000021
   862+ *                                                                                                                  8000022
   863+D tree_rb_string_last...                                                                                            8000023
   864+D                 PR              *   extproc('tree_rb_string_last')                                                8000024
   865+D   tree                          *   const                                                                         8000025
   866+ *                                                                                                                  8000026
   867+D tree_rb_string_next...                                                                                            8000027
   868+D                 PR              *   extproc('tree_rb_string_next')                                                8000028
   869+D   nodePtr                       *   const                                                                         8000029
   870+ *                                                                                                                  8000030
   871+D tree_rb_string_previous...                                                                                        8000031
   872+D                 PR              *   extproc('tree_rb_string_previous')                                            8000032
   873+D   nodePtr                       *   const                                                                         8000033
   874+ *                                                                                                                  8000034
   875+D tree_rb_string_containsKey...                                                                                     8000035
   876+D                 PR              N   extproc('tree_rb_string_containsKey')                                         8000036
   877+D   tree                          *   const                                                                         8000037
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     19
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   878+D   key                      65535A   const varying                                                                 8000038
   879+ *                                                                                                                  8000039
   880+D tree_rb_string_remove...                                                                                          8000040
   881+D                 PR                  extproc('tree_rb_string_remove')                                              8000041
   882+D   tree                          *   const                                                                         8000042
   883+D   key                      65535A   const varying                                                                 8000043
   884+ *                                                                                                                  8000044
   885+D tree_rb_string_removeByNode...                                                                                    8000045
   886+D                 PR                  extproc('tree_rb_string_removeByNode-                                         8000046
   887+D                                     ')                                                                            8000047
   888+D   tree                          *   const                                                                         8000048
   889+D   node                          *                                                                                 8000049
   890+ *                                                                                                                  8000050
   891+D tree_rb_string_container_of...                                                                                    8000051
   892+D                 PR              *   extproc('tree_rb_string_container_of-                                         8000052
   893+D                                     ')                                                                            8000053
   894+D   eNode                         *   value                                                                         8000054
   895+ *                                                                                                                  8000055
   896+D tree_rb_string_compare...                                                                                         8000056
   897+D                 PR            10I 0 extproc('tree_rb_string_compare')                                             8000057
   898+D   nodeA                         *   value                                                                         8000058
   899+D   nodeB                         *   value                                                                         8000059
   900+ *                                                                                                                  8000060
   901+D tree_rb_string_compare_ignore_case...                                                                             8000061
   902+D                 PR            10I 0 extproc('tree_rb_string_compare_+                                             8000062
   903+D                                              ignore_case')                                                        8000063
   904+D   nodeA                         *   value                                                                         8000064
   905+D   nodeB                         *   value                                                                         8000065
   906+ *                                                                                                                  8000066
   907+D tree_rb_string_clear...                                                                                           8000067
   908+D                 PR                  extproc('tree_rb_string_clear')                                               8000068
   909+D   tree                          *   const                                                                         8000069
   910+ *                                                                                                                  8000070
   911+D tree_rb_string_finalize...                                                                                        8000071
   912+D                 PR                  extproc('tree_rb_string_finalize')                                            8000072
   913+D  tree                           *                                                                                 8000073
   914+                                                                                                                    8000074
   915+                                                                                                                    8000075
   916+ *-------------------------------------------------------------------------                                         8000076
   917+ * Data Structures                                                                                                  8000077
   918+ *-------------------------------------------------------------------------                                         8000078
   919+D tree_node_string_t...                                                                                             8000079
   920+D                 DS                  qualified template align                                                      8000080
   921+D  key                            *                                                                                 8000081
   922+D  keyLength                    10I 0                                                                               8000082
   923+D  value                          *                                                                                 8000083
   924+D  length                       10I 0                                                                               8000084
   925+                                                                                                                    8000085
   926+ /endif                                                                                                             8000086
   927+                                                                                                                    8000087
   928+                                                                                                                    5000094
   929+ /endif                                                                                                             5000095
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     20
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   930 /include 'llist/llist_h.rpgle'                                                                                       000045
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  llist_h.r+                                                   *                     9
        * External name  . . . . . . :  /home/mihael/include/llist/llist_h.rpgle                     *                     9
        * Last change  . . . . . . . :  03/29/20  08:30:06                                           *                     9
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   931+**FREE                                                                                                              9000001
   932+                                                                                                                    9000002
   933+/if not defined(LLIST)                                                                                              9000003
   934+/define LLIST                                                                                                       9000004
   935+                                                                                                                    9000005
   936+///                                                                                                                 9000006
   937+// Linked List Implementation                                                                                       9000007
   938+//                                                                                                                  9000008
   939+// This is a typical Doubly-Linked List (Two-Way Linked List) Implementation                                        9000009
   940+// using dynamic memory allocation. The list is particular suitable for                                             9000010
   941+// character values but does also work with any other data (f. e. data                                              9000011
   942+// structures).                                                                                                     9000012
   943+//                                                                                                                  9000013
   944+// <br><br>                                                                                                         9000014
   945+//                                                                                                                  9000015
   946+// Values are stored as null-terminated chars.                                                                      9000016
   947+//                                                                                                                  9000017
   948+// <br><br>                                                                                                         9000018
   949+//                                                                                                                  9000019
   950+// Operations that index into the list will traverse the list from                                                  9000020
   951+// the beginning or the end, whichever is closer to the specified index.                                            9000021
   952+//                                                                                                                  9000022
   953+// <br><br>                                                                                                         9000023
   954+//                                                                                                                  9000024
   955+// <b>Iteration:</b> With the procedure <em>getNext</em> the list is                                                9000025
   956+// traversable in the top-bottom direction. Each call to <em>getNext</em>                                           9000026
   957+// will return the next entry of the list till the end of the list.                                                 9000027
   958+// If the walk through the list should be stopped early (before the end                                             9000028
   959+// of the list) the method <em>abortIteration</em> should be called.                                                9000029
   960+// If the list is structurally modified at any time                                                                 9000030
   961+// after an iteration has begun in any way, the result of the iteration                                             9000031
   962+// can not be safely determined. If an iteratioj is not going to continue                                           9000032
   963+// the procedure <em>abortIteration</em> should be called. After that                                               9000033
   964+// call it is safe to modify the list again.                                                                        9000034
   965+//                                                                                                                  9000035
   966+// <br><br>                                                                                                         9000036
   967+//                                                                                                                  9000037
   968+// Throughout this service program a zero-based index is used.                                                      9000038
   969+//                                                                                                                  9000039
   970+// <br><br>                                                                                                         9000040
   971+//                                                                                                                  9000041
   972+// This list implementation is not thread-safe.                                                                     9000042
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     21
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   973+//                                                                                                                  9000043
   974+// @author Mihael Schmidt                                                                                           9000044
   975+// @date   20.12.2007                                                                                               9000045
   976+// @project Linked List                                                                                             9000046
   977+//                                                                                                                  9000047
   978+// @rev 22.11.2009 Mihael Schmidt                                                                                   9000048
   979+//      Added sorting support <br>                                                                                  9000049
   980+//      Changed memory management to user created heap <br>                                                         9000050
   981+//      Added removeRange procedure <br>                                                                            9000051
   982+//      Bug fix: list_addAll does not work if value has x'00'                                                       9000052
   983+//                                                                                                                  9000053
   984+// @rev 15.12.2009 Mihael Schmidt                                                                                   9000054
   985+//      Added merge procedure                                                                                       9000055
   986+//                                                                                                                  9000056
   987+// @rev 19.02.2011 Mihael Schmidt                                                                                   9000057
   988+//      Fixed list_sublist procedure <br>                                                                           9000058
   989+//      Added list_resetIteration <br>                                                                              9000059
   990+//      Deprecated list_abortIteration <br>                                                                         9000060
   991+//      Added list_iterate <br>                                                                                     9000061
   992+//      Deprecated list_getNext <br>                                                                                9000062
   993+//      Userdata parameter on list_foreach is now optional <br>                                                     9000063
   994+//      list_merge got new parameter to only optionally skip duplicate entries                                      9000064
   995+//                                                                                                                  9000065
   996+// @rev 07.06.2018 Mihael Schmidt                                                                                   9000066
   997+//      Changed sort API <br>                                                                                       9000067
   998+//      Escape messages are now sent to the current call stack entry +1                                             9000068
   999+//      instead of the program control boundary <br>                                                                9000069
  1000+//                                                                                                                  9000070
  1001+///                                                                                                                 9000071
  1002+                                                                                                                    9000072
  1003+//------------------------------------------------------------------------------                                    9000073
  1004+//                          The MIT License (MIT)                                                                   9000074
  1005+//                                                                                                                  9000075
  1006+// Copyright (c) 2017 Mihael Schmidt                                                                                9000076
  1007+//                                                                                                                  9000077
  1008+// Permission is hereby granted, free of charge, to any person obtaining a copy                                     9000078
  1009+// of this software and associated documentation files (the "Software"), to deal                                    9000079
  1010+// in the Software without restriction, including without limitation the rights                                     9000080
  1011+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                        9000081
  1012+// copies of the Software, and to permit persons to whom the Software is                                            9000082
  1013+// furnished to do so, subject to the following conditions:                                                         9000083
  1014+//                                                                                                                  9000084
  1015+// The above copyright notice and this permission notice shall be included in                                       9000085
  1016+// all copies or substantial portions of the Software.                                                              9000086
  1017+//                                                                                                                  9000087
  1018+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                       9000088
  1019+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                         9000089
  1020+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                      9000090
  1021+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                           9000091
  1022+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                    9000092
  1023+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                    9000093
  1024+// SOFTWARE.                                                                                                        9000094
  1025+//------------------------------------------------------------------------------                                    9000095
  1026+                                                                                                                    9000096
  1027+                                                                                                                    9000097
  1028+//-------------------------------------------------------------------------                                         9000098
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     22
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1029+// Prototypes                                                                                                       9000099
  1030+//-------------------------------------------------------------------------                                         9000100
  1031+                                                                                                                    9000101
  1032+///                                                                                                                 9000102
  1033+// Create list                                                                                                      9000103
  1034+//                                                                                                                  9000104
  1035+// Creates a list. A header is generated for the list and the pointer to                                            9000105
  1036+// the list returned.                                                                                               9000106
  1037+//                                                                                                                  9000107
  1038+// <br><br>                                                                                                         9000108
  1039+//                                                                                                                  9000109
  1040+// A list must be disposed via the procedure <em>dispose</em> to free all                                           9000110
  1041+// allocated memory.                                                                                                9000111
  1042+//                                                                                                                  9000112
  1043+// @author Mihael Schmidt                                                                                           9000113
  1044+// @date   18.12.2007                                                                                               9000114
  1045+//                                                                                                                  9000115
  1046+// @return Pointer to the list                                                                                      9000116
  1047+///                                                                                                                 9000117
  1048+dcl-pr list_create pointer extproc('list_create') end-pr;                                                           9000118
  1049+                                                                                                                    9000119
  1050+///                                                                                                                 9000120
  1051+// Dispose list                                                                                                     9000121
  1052+//                                                                                                                  9000122
  1053+// The memory for whole list are is released                                                                        9000123
  1054+// (deallocated). The list pointer is set to *null;                                                                 9000124
  1055+//                                                                                                                  9000125
  1056+// <br><br>                                                                                                         9000126
  1057+//                                                                                                                  9000127
  1058+// If the passed pointer is already *null the procedure simply returns.                                             9000128
  1059+//                                                                                                                  9000129
  1060+// @author Mihael Schmidt                                                                                           9000130
  1061+// @date   18.12.2007                                                                                               9000131
  1062+//                                                                                                                  9000132
  1063+// @param Pointer to the list                                                                                       9000133
  1064+///                                                                                                                 9000134
  1065+dcl-pr list_dispose extproc('list_dispose');                                                                        9000135
  1066+  list pointer;                                                                                                     9000136
  1067+end-pr;                                                                                                             9000137
  1068+                                                                                                                    9000138
  1069+///                                                                                                                 9000139
  1070+// Add list entry                                                                                                   9000140
  1071+//                                                                                                                  9000141
  1072+// Adds an entry at an exact position in the list. If the position is                                               9000142
  1073+// outside the list the procedure returns <em>*off</em>. The current                                                9000143
  1074+// entry of the list at that position will be pushed one position down                                              9000144
  1075+// the list.                                                                                                        9000145
  1076+//                                                                                                                  9000146
  1077+// <br><br>                                                                                                         9000147
  1078+//                                                                                                                  9000148
  1079+// If no position is passed to the procedure then the entry will be                                                 9000149
  1080+// appended to the end of the list (like <em>addLast</em>).                                                         9000150
  1081+//                                                                                                                  9000151
  1082+// @author Mihael Schmidt                                                                                           9000152
  1083+// @date   18.12.2007                                                                                               9000153
  1084+//                                                                                                                  9000154
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     23
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1085+// @param Pointer to the list                                                                                       9000155
  1086+// @param Pointer to the new value                                                                                  9000156
  1087+// @param Length of the new value                                                                                   9000157
  1088+// @param List position for the new value (optional)                                                                9000158
  1089+//                                                                                                                  9000159
  1090+// @return *on = entry added the list <br>                                                                          9000160
  1091+//         *off = error                                                                                             9000161
  1092+///                                                                                                                 9000162
  1093+dcl-pr list_add ind extproc('list_add');                                                                            9000163
  1094+  list pointer const;                                                                                               9000164
  1095+    value pointer const;                                                                                            9000165
  1096+  length uns(10) const;                                                                                             9000166
  1097+  position uns(10) const options(*nopass);                                                                          9000167
  1098+end-pr;                                                                                                             9000168
  1099+                                                                                                                    9000169
  1100+///                                                                                                                 9000170
  1101+// Add list entry to the top of the list                                                                            9000171
  1102+//                                                                                                                  9000172
  1103+// @author Mihael Schmidt                                                                                           9000173
  1104+// @date   18.12.2007                                                                                               9000174
  1105+//                                                                                                                  9000175
  1106+// @param Pointer to the list                                                                                       9000176
  1107+// @param Pointer to new value                                                                                      9000177
  1108+// @param Length of new value                                                                                       9000178
  1109+//                                                                                                                  9000179
  1110+// @return *on = successful <br>                                                                                    9000180
  1111+//         *off = error                                                                                             9000181
  1112+///                                                                                                                 9000182
  1113+dcl-pr list_addFirst ind extproc('list_addFirst');                                                                  9000183
  1114+  list pointer;                                                                                                     9000184
  1115+  value pointer const;                                                                                              9000185
  1116+  length uns(10) const;                                                                                             9000186
  1117+end-pr;                                                                                                             9000187
  1118+                                                                                                                    9000188
  1119+///                                                                                                                 9000189
  1120+// Add list entry to the end of the list                                                                            9000190
  1121+//                                                                                                                  9000191
  1122+// @author Mihael Schmidt                                                                                           9000192
  1123+// @date   18.12.2007                                                                                               9000193
  1124+//                                                                                                                  9000194
  1125+// @param Pointer to the list                                                                                       9000195
  1126+// @param Pointer to new value                                                                                      9000196
  1127+// @param Length of new value                                                                                       9000197
  1128+//                                                                                                                  9000198
  1129+// @return *on = successful <br>                                                                                    9000199
  1130+//         *off = error                                                                                             9000200
  1131+///                                                                                                                 9000201
  1132+dcl-pr list_addLast ind extproc('list_addLast');                                                                    9000202
  1133+  list pointer const;                                                                                               9000203
  1134+  value pointer const;                                                                                              9000204
  1135+  length uns(10) const;                                                                                             9000205
  1136+end-pr;                                                                                                             9000206
  1137+                                                                                                                    9000207
  1138+///                                                                                                                 9000208
  1139+// Add all elements of a list                                                                                       9000209
  1140+//                                                                                                                  9000210
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     24
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1141+// Adds all elements of the passed list to the end of this list.                                                    9000211
  1142+// Elements will not be referenced but storage newly allocated.                                                     9000212
  1143+//                                                                                                                  9000213
  1144+// @author Mihael Schmidt                                                                                           9000214
  1145+// @date   18.12.2007                                                                                               9000215
  1146+//                                                                                                                  9000216
  1147+// @param Pointer to the destination list                                                                           9000217
  1148+// @param Pointer to the source list                                                                                9000218
  1149+//                                                                                                                  9000219
  1150+// @return *on = all elements added to list <br>                                                                    9000220
  1151+//         *off = not all or none elements added                                                                    9000221
  1152+///                                                                                                                 9000222
  1153+dcl-pr list_addAll ind extproc('list_addAll');                                                                      9000223
  1154+  list pointer const;                                                                                               9000224
  1155+  sourceList pointer const;                                                                                         9000225
  1156+end-pr;                                                                                                             9000226
  1157+                                                                                                                    9000227
  1158+///                                                                                                                 9000228
  1159+// Remove list entry                                                                                                9000229
  1160+//                                                                                                                  9000230
  1161+// Removes an entry from the list at the given position. If the                                                     9000231
  1162+// position is outside of the list the return value will be <em>*off</em>.                                          9000232
  1163+//                                                                                                                  9000233
  1164+// <br><br>                                                                                                         9000234
  1165+//                                                                                                                  9000235
  1166+// The index is 0 (zero) based.                                                                                     9000236
  1167+//                                                                                                                  9000237
  1168+// @author Mihael Schmidt                                                                                           9000238
  1169+// @date   18.12.2007                                                                                               9000239
  1170+//                                                                                                                  9000240
  1171+// @param Pointer to the list                                                                                       9000241
  1172+// @param index of the entry in the list (zero-based)                                                               9000242
  1173+//                                                                                                                  9000243
  1174+// @return *on = entry removed                                                                                      9000244
  1175+//         *off = error                                                                                             9000245
  1176+///                                                                                                                 9000246
  1177+dcl-pr list_remove ind extproc('list_remove');                                                                      9000247
  1178+  list pointer const;                                                                                               9000248
  1179+  index uns(10) const;                                                                                              9000249
  1180+end-pr;                                                                                                             9000250
  1181+                                                                                                                    9000251
  1182+///                                                                                                                 9000252
  1183+// Remove first list entry                                                                                          9000253
  1184+//                                                                                                                  9000254
  1185+// Removes the first entry from the list.                                                                           9000255
  1186+//                                                                                                                  9000256
  1187+// @author Mihael Schmidt                                                                                           9000257
  1188+// @date   18.12.2007                                                                                               9000258
  1189+//                                                                                                                  9000259
  1190+// @param Pointer to the list                                                                                       9000260
  1191+//                                                                                                                  9000261
  1192+// @return *on = entry removed <br>                                                                                 9000262
  1193+//         *off = error                                                                                             9000263
  1194+///                                                                                                                 9000264
  1195+dcl-pr list_removeFirst ind extproc('list_removeFirst');                                                            9000265
  1196+  list pointer const;                                                                                               9000266
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     25
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1197+end-pr;                                                                                                             9000267
  1198+                                                                                                                    9000268
  1199+///                                                                                                                 9000269
  1200+// Remove last list entry                                                                                           9000270
  1201+//                                                                                                                  9000271
  1202+// Removes the last entry from the list.                                                                            9000272
  1203+//                                                                                                                  9000273
  1204+// @author Mihael Schmidt                                                                                           9000274
  1205+// @date   18.12.2007                                                                                               9000275
  1206+//                                                                                                                  9000276
  1207+// @param Pointer to the list                                                                                       9000277
  1208+//                                                                                                                  9000278
  1209+// @return *on = entry removed <br>                                                                                 9000279
  1210+//         *off = error (escape message)                                                                            9000280
  1211+///                                                                                                                 9000281
  1212+dcl-pr list_removeLast ind extproc('list_removeLast');                                                              9000282
  1213+  list pointer const;                                                                                               9000283
  1214+end-pr;                                                                                                             9000284
  1215+                                                                                                                    9000285
  1216+///                                                                                                                 9000286
  1217+// Clear list                                                                                                       9000287
  1218+//                                                                                                                  9000288
  1219+// Deletes all entries in the list.                                                                                 9000289
  1220+//                                                                                                                  9000290
  1221+// @author Mihael Schmidt                                                                                           9000291
  1222+// @date   18.12.2007                                                                                               9000292
  1223+//                                                                                                                  9000293
  1224+// @param Pointer to the list                                                                                       9000294
  1225+//                                                                                                                  9000295
  1226+// @return *on = successful <br>                                                                                    9000296
  1227+//         *off = error                                                                                             9000297
  1228+///                                                                                                                 9000298
  1229+dcl-pr list_clear ind extproc('list_clear');                                                                        9000299
  1230+  list pointer const;                                                                                               9000300
  1231+end-pr;                                                                                                             9000301
  1232+                                                                                                                    9000302
  1233+///                                                                                                                 9000303
  1234+// Check if list is empty                                                                                           9000304
  1235+//                                                                                                                  9000305
  1236+// Checks if the list is empty.                                                                                     9000306
  1237+//                                                                                                                  9000307
  1238+// @author Mihael Schmidt                                                                                           9000308
  1239+// @date   19.12.2007                                                                                               9000309
  1240+//                                                                                                                  9000310
  1241+// @param Pointer to the list                                                                                       9000311
  1242+//                                                                                                                  9000312
  1243+// @return *on = list is empty <br>                                                                                 9000313
  1244+//         *off = list is not empty                                                                                 9000314
  1245+///                                                                                                                 9000315
  1246+dcl-pr list_isEmpty ind extproc('list_isEmpty');                                                                    9000316
  1247+  list pointer const;                                                                                               9000317
  1248+end-pr;                                                                                                             9000318
  1249+                                                                                                                    9000319
  1250+///                                                                                                                 9000320
  1251+// Replaces an entry in the list                                                                                    9000321
  1252+//                                                                                                                  9000322
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     26
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1253+// An element in the list will be replaced. If there is no element                                                  9000323
  1254+// at that position the return value will be <em>*off</em>.                                                         9000324
  1255+//                                                                                                                  9000325
  1256+// @author Mihael Schmidt                                                                                           9000326
  1257+// @date   19.12.2007                                                                                               9000327
  1258+//                                                                                                                  9000328
  1259+// @param Pointer to the list                                                                                       9000329
  1260+// @param Pointer to new value                                                                                      9000330
  1261+// @param Length of new value                                                                                       9000331
  1262+// @param index of new value                                                                                        9000332
  1263+//                                                                                                                  9000333
  1264+// @return *on = entry successfully replaced <br>                                                                   9000334
  1265+//         *off = error                                                                                             9000335
  1266+///                                                                                                                 9000336
  1267+dcl-pr list_replace ind extproc('list_replace');                                                                    9000337
  1268+  list pointer const;                                                                                               9000338
  1269+  value pointer const;                                                                                              9000339
  1270+  length uns(10) const;                                                                                             9000340
  1271+  index uns(10) const;                                                                                              9000341
  1272+end-pr;                                                                                                             9000342
  1273+                                                                                                                    9000343
  1274+///                                                                                                                 9000344
  1275+// Get entry                                                                                                        9000345
  1276+//                                                                                                                  9000346
  1277+// Returns a list entry specified by the passed index.                                                              9000347
  1278+//                                                                                                                  9000348
  1279+// @author Mihael Schmidt                                                                                           9000349
  1280+// @date   19.12.2007                                                                                               9000350
  1281+//                                                                                                                  9000351
  1282+// @param Pointer to the list                                                                                       9000352
  1283+// @param List position                                                                                             9000353
  1284+//                                                                                                                  9000354
  1285+// @return Pointer to a null terminated string or                                                                   9000355
  1286+//         *null if an error occured or there is no                                                                 9000356
  1287+//         entry at that position                                                                                   9000357
  1288+///                                                                                                                 9000358
  1289+dcl-pr list_get pointer extproc('list_get');                                                                        9000359
  1290+  list pointer const;                                                                                               9000360
  1291+  index uns(10) const;                                                                                              9000361
  1292+end-pr;                                                                                                             9000362
  1293+                                                                                                                    9000363
  1294+///                                                                                                                 9000364
  1295+// Get first entry                                                                                                  9000365
  1296+//                                                                                                                  9000366
  1297+// Returns the first entry of the list.                                                                             9000367
  1298+//                                                                                                                  9000368
  1299+// @author Mihael Schmidt                                                                                           9000369
  1300+// @date   19.12.2007                                                                                               9000370
  1301+//                                                                                                                  9000371
  1302+// @param Pointer to the list                                                                                       9000372
  1303+//                                                                                                                  9000373
  1304+// @return Pointer to a null terminated string or                                                                   9000374
  1305+//         *null if the list is empty or an error occured                                                           9000375
  1306+///                                                                                                                 9000376
  1307+dcl-pr list_getFirst pointer extproc('list_getFirst');                                                              9000377
  1308+  list pointer const;                                                                                               9000378
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     27
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1309+end-pr;                                                                                                             9000379
  1310+                                                                                                                    9000380
  1311+///                                                                                                                 9000381
  1312+// Get last entry                                                                                                   9000382
  1313+//                                                                                                                  9000383
  1314+// Returns the last entry of the list.                                                                              9000384
  1315+//                                                                                                                  9000385
  1316+// @author Mihael Schmidt                                                                                           9000386
  1317+// @date   19.12.2007                                                                                               9000387
  1318+//                                                                                                                  9000388
  1319+// @param Pointer to the list                                                                                       9000389
  1320+//                                                                                                                  9000390
  1321+// @return Pointer to a null terminated string or                                                                   9000391
  1322+//         *null if the list is empty or an error occured                                                           9000392
  1323+///                                                                                                                 9000393
  1324+dcl-pr list_getLast pointer extproc('list_getLast');                                                                9000394
  1325+  list pointer const;                                                                                               9000395
  1326+end-pr;                                                                                                             9000396
  1327+                                                                                                                    9000397
  1328+///                                                                                                                 9000398
  1329+// Get next entry                                                                                                   9000399
  1330+//                                                                                                                  9000400
  1331+// Iterates through the list and gets the next entry. If the iterator is                                            9000401
  1332+// at the end of the list this method will return <em>null</em>. The                                                9000402
  1333+// iteration can be aborted early with the procedure <em>                                                           9000403
  1334+// list_resetIteration</em>.                                                                                        9000404
  1335+//                                                                                                                  9000405
  1336+// @author Mihael Schmidt                                                                                           9000406
  1337+// @date   18.12.2007                                                                                               9000407
  1338+//                                                                                                                  9000408
  1339+// @param Pointer to the list                                                                                       9000409
  1340+//                                                                                                                  9000410
  1341+// @return Pointer to entry or *null if no more entries in list                                                     9000411
  1342+//                                                                                                                  9000412
  1343+// @deprecated Use <em>list_iterate</em> instead.                                                                   9000413
  1344+///                                                                                                                 9000414
  1345+dcl-pr list_getNext pointer extproc('list_getNext');                                                                9000415
  1346+  list pointer const;                                                                                               9000416
  1347+end-pr;                                                                                                             9000417
  1348+                                                                                                                    9000418
  1349+///                                                                                                                 9000419
  1350+// Iterate list                                                                                                     9000420
  1351+//                                                                                                                  9000421
  1352+// Iterates through the list and returns the next entry. If the iterator is                                         9000422
  1353+// at the end of the list this method will return <em>null</em>. The                                                9000423
  1354+// iteration can be aborted early with the procedure <em>list_resetIteration</em>.                                  9000424
  1355+//                                                                                                                  9000425
  1356+// @author Mihael Schmidt                                                                                           9000426
  1357+// @date   19.2.2011                                                                                                9000427
  1358+//                                                                                                                  9000428
  1359+// @param Pointer to the list                                                                                       9000429
  1360+//                                                                                                                  9000430
  1361+// @return Pointer to entry or *n ll if no more entries in list                                                     9000431
  1362+///                                                                                                                 9000432
  1363+dcl-pr list_iterate pointer extproc('list_iterate');                                                                9000433
  1364+  list pointer const;                                                                                               9000434
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     28
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1365+end-pr;                                                                                                             9000435
  1366+                                                                                                                    9000436
  1367+///                                                                                                                 9000437
  1368+// Get previous entry                                                                                               9000438
  1369+//                                                                                                                  9000439
  1370+// Iterates through the list and gets the previous entry. If the iterator is                                        9000440
  1371+// before the start of the list this method will return <em>null</em>. The                                          9000441
  1372+// iteration can be aborted early with the procedure <em>list_resetIteration</em>.                                  9000442
  1373+//                                                                                                                  9000443
  1374+// @author Mihael Schmidt                                                                                           9000444
  1375+// @date   18.12.2007                                                                                               9000445
  1376+//                                                                                                                  9000446
  1377+// @param Pointer to the list                                                                                       9000447
  1378+//                                                                                                                  9000448
  1379+// @return Pointer to entry or *null if no more entries in list                                                     9000449
  1380+///                                                                                                                 9000450
  1381+dcl-pr list_getPrev pointer extproc('list_getPrev');                                                                9000451
  1382+  list pointer const;                                                                                               9000452
  1383+end-pr;                                                                                                             9000453
  1384+                                                                                                                    9000454
  1385+///                                                                                                                 9000455
  1386+// Abort iteration                                                                                                  9000456
  1387+//                                                                                                                  9000457
  1388+// If the iteration through the list should be aborted early this                                                   9000458
  1389+// procedure should be called.                                                                                      9000459
  1390+//                                                                                                                  9000460
  1391+// @author Mihael Schmidt                                                                                           9000461
  1392+// @date   18.12.2007                                                                                               9000462
  1393+//                                                                                                                  9000463
  1394+// @param Pointer to the list                                                                                       9000464
  1395+//                                                                                                                  9000465
  1396+// @deprecated Use <em>list_resetIteration</em> instead.                                                            9000466
  1397+///                                                                                                                 9000467
  1398+dcl-pr list_abortIteration extproc('list_abortIteration');                                                          9000468
  1399+  list pointer const;                                                                                               9000469
  1400+end-pr;                                                                                                             9000470
  1401+                                                                                                                    9000471
  1402+///                                                                                                                 9000472
  1403+// Reset iteration                                                                                                  9000473
  1404+//                                                                                                                  9000474
  1405+// Resets the internal iteration state of the list so that the next                                                 9000475
  1406+// call to <em>list_iterate</em> will return the first element.                                                     9000476
  1407+//                                                                                                                  9000477
  1408+// @author Mihael Schmidt                                                                                           9000478
  1409+// @date   19.2.2011                                                                                                9000479
  1410+//                                                                                                                  9000480
  1411+// @param Pointer to the list                                                                                       9000481
  1412+///                                                                                                                 9000482
  1413+dcl-pr list_resetIteration extproc('list_resetIteration');                                                          9000483
  1414+  list pointer const;                                                                                               9000484
  1415+end-pr;                                                                                                             9000485
  1416+                                                                                                                    9000486
  1417+///                                                                                                                 9000487
  1418+// Contains entry                                                                                                   9000488
  1419+//                                                                                                                  9000489
  1420+// Checks if this list contains the passed entry.                                                                   9000490
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     29
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1421+//                                                                                                                  9000491
  1422+// @author Mihael Schmidt                                                                                           9000492
  1423+// @date   19.12.2007                                                                                               9000493
  1424+//                                                                                                                  9000494
  1425+// @param Pointer to the list                                                                                       9000495
  1426+// @param Pointer to value                                                                                          9000496
  1427+// @param Length of value                                                                                           9000497
  1428+//                                                                                                                  9000498
  1429+// @return *on = list contains value <br>                                                                           9000499
  1430+//         *off = list does not contain value                                                                       9000500
  1431+///                                                                                                                 9000501
  1432+dcl-pr list_contains ind extproc('list_contains');                                                                  9000502
  1433+  list pointer const;                                                                                               9000503
  1434+  value pointer const;                                                                                              9000504
  1435+  length uns(10) const;                                                                                             9000505
  1436+end-pr;                                                                                                             9000506
  1437+                                                                                                                    9000507
  1438+///                                                                                                                 9000508
  1439+// Index of entry                                                                                                   9000509
  1440+//                                                                                                                  9000510
  1441+// Returns the index of the passed entry or -1 if the entry could not                                               9000511
  1442+// be found in the list.                                                                                            9000512
  1443+//                                                                                                                  9000513
  1444+// @author Mihael Schmidt                                                                                           9000514
  1445+// @date   19.12.2007                                                                                               9000515
  1446+//                                                                                                                  9000516
  1447+// @param Pointer to the list                                                                                       9000517
  1448+// @param Pointer to the value                                                                                      9000518
  1449+// @param Length of the value                                                                                       9000519
  1450+//                                                                                                                  9000520
  1451+// @return index of the entry or -1 if entry not in list                                                            9000521
  1452+///                                                                                                                 9000522
  1453+dcl-pr list_indexOf int(10) extproc('list_indexOf');                                                                9000523
  1454+  list pointer const;                                                                                               9000524
  1455+  value pointer const;                                                                                              9000525
  1456+  length uns(10) const;                                                                                             9000526
  1457+end-pr;                                                                                                             9000527
  1458+                                                                                                                    9000528
  1459+///                                                                                                                 9000529
  1460+// Last index of entry                                                                                              9000530
  1461+//                                                                                                                  9000531
  1462+// Returns the last indes of the passed entry or -1 if the entry                                                    9000532
  1463+// could not be found in the list.                                                                                  9000533
  1464+//                                                                                                                  9000534
  1465+// @author Mihael Schmidt                                                                                           9000535
  1466+// @date   19.12.2007                                                                                               9000536
  1467+//                                                                                                                  9000537
  1468+// @param Pointer to the list                                                                                       9000538
  1469+// @param Pointer to the value                                                                                      9000539
  1470+// @param Length of the value                                                                                       9000540
  1471+//                                                                                                                  9000541
  1472+// @return index of the entry or -1 if entry not in list                                                            9000542
  1473+///                                                                                                                 9000543
  1474+dcl-pr list_lastIndexOf int(10) extproc('list_lastIndexOf');                                                        9000544
  1475+  list pointer const;                                                                                               9000545
  1476+  value pointer const;                                                                                              9000546
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     30
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1477+  length uns(10) const;                                                                                             9000547
  1478+end-pr;                                                                                                             9000548
  1479+                                                                                                                    9000549
  1480+///                                                                                                                 9000550
  1481+// To character array                                                                                               9000551
  1482+//                                                                                                                  9000552
  1483+// Copies all entries of this list to the passed array. Entries will be                                             9000553
  1484+// truncated if they are too big for the array. If the array is not big                                             9000554
  1485+// enough, the last entries will be silently dropped.                                                               9000555
  1486+//                                                                                                                  9000556
  1487+// @author Mihael Schmidt                                                                                           9000557
  1488+// @date   19.12.2007                                                                                               9000558
  1489+//                                                                                                                  9000559
  1490+// @param Pointer to the list                                                                                       9000560
  1491+// @param Pointer to the array                                                                                      9000561
  1492+// @param Element count                                                                                             9000562
  1493+// @param Element length                                                                                            9000563
  1494+//                                                                                                                  9000564
  1495+///                                                                                                                 9000565
  1496+dcl-pr list_toCharArray extproc('list_toCharArray');                                                                9000566
  1497+  list pointer const;                                                                                               9000567
  1498+  array pointer const;                                                                                              9000568
  1499+  count uns(10) const;                                                                                              9000569
  1500+  length uns(10) const;                                                                                             9000570
  1501+end-pr;                                                                                                             9000571
  1502+                                                                                                                    9000572
  1503+///                                                                                                                 9000573
  1504+// Get list size                                                                                                    9000574
  1505+//                                                                                                                  9000575
  1506+// Returns the number elements in the list.                                                                         9000576
  1507+//                                                                                                                  9000577
  1508+// @author Mihael Schmidt                                                                                           9000578
  1509+// @date   16.01.2008                                                                                               9000579
  1510+//                                                                                                                  9000580
  1511+// @param Pointer to the list                                                                                       9000581
  1512+//                                                                                                                  9000582
  1513+// @return number of elements in the list or -1 if an error occurs                                                  9000583
  1514+///                                                                                                                 9000584
  1515+dcl-pr list_size uns(10) extproc('list_size');                                                                      9000585
  1516+  list pointer const;                                                                                               9000586
  1517+end-pr;                                                                                                             9000587
  1518+                                                                                                                    9000588
  1519+///                                                                                                                 9000589
  1520+// Create sublist                                                                                                   9000590
  1521+//                                                                                                                  9000591
  1522+// Creates a list with copies of a part of the passed list.                                                         9000592
  1523+//                                                                                                                  9000593
  1524+// @author Mihael Schmidt                                                                                           9000594
  1525+// @date   16.1.2008                                                                                                9000595
  1526+//                                                                                                                  9000596
  1527+// @param Pointer to the list                                                                                       9000597
  1528+// @param start of the index to copy                                                                                9000598
  1529+// @param number of elements to copy                                                                                9000599
  1530+//                                                                                                                  9000600
  1531+// @return new list                                                                                                 9000601
  1532+///                                                                                                                 9000602
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     31
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1533+dcl-pr list_sublist pointer extproc('list_sublist');                                                                9000603
  1534+  list pointer const;                                                                                               9000604
  1535+  startIndex uns(10) const;                                                                                         9000605
  1536+  length uns(10) const options(*nopass);                                                                            9000606
  1537+end-pr;                                                                                                             9000607
  1538+                                                                                                                    9000608
  1539+///                                                                                                                 9000609
  1540+// Rotate list by n positions                                                                                       9000610
  1541+//                                                                                                                  9000611
  1542+// Rotatas items in the list by the given number.                                                                   9000612
  1543+//                                                                                                                  9000613
  1544+// <br><br>                                                                                                         9000614
  1545+//                                                                                                                  9000615
  1546+// The elements from the end will be pushed to the front.                                                           9000616
  1547+// A rotation of one will bring the last element to the first                                                       9000617
  1548+// position and the first element will become the second element                                                    9000618
  1549+// (pushed one position down the list).                                                                             9000619
  1550+//                                                                                                                  9000620
  1551+// <br><br>                                                                                                         9000621
  1552+//                                                                                                                  9000622
  1553+// Only a forward rotation is possible. No negative number of                                                       9000623
  1554+// rotations are valid.                                                                                             9000624
  1555+//                                                                                                                  9000625
  1556+// <br><br>                                                                                                         9000626
  1557+//                                                                                                                  9000627
  1558+// The number of rotations may even be greater than the size of                                                     9000628
  1559+// the list. Example: List size 4, rotation number 5 = rotation                                                     9000629
  1560+// number 1.                                                                                                        9000630
  1561+//                                                                                                                  9000631
  1562+// @author Mihael Schmidt                                                                                           9000632
  1563+// @date   23.01.2008                                                                                               9000633
  1564+//                                                                                                                  9000634
  1565+// @param Pointer to the list                                                                                       9000635
  1566+// @param Number positions to rotate list                                                                           9000636
  1567+///                                                                                                                 9000637
  1568+dcl-pr list_rotate extproc('list_rotate');                                                                          9000638
  1569+  list pointer const;                                                                                               9000639
  1570+  numberRotations int(10) const;                                                                                    9000640
  1571+end-pr;                                                                                                             9000641
  1572+                                                                                                                    9000642
  1573+///                                                                                                                 9000643
  1574+// Swap list items                                                                                                  9000644
  1575+//                                                                                                                  9000645
  1576+//                                                                                                                  9000646
  1577+// @author Mihael Schmidt                                                                                           9000647
  1578+// @date   23.01.2008                                                                                               9000648
  1579+//                                                                                                                  9000649
  1580+// @param Pointer to the list                                                                                       9000650
  1581+// @param List item to swap                                                                                         9000651
  1582+// @param List item to swap                                                                                         9000652
  1583+///                                                                                                                 9000653
  1584+dcl-pr list_swap ind extproc('list_swap');                                                                          9000654
  1585+  list pointer const;                                                                                               9000655
  1586+  itemPosition1 uns(10) const;                                                                                      9000656
  1587+  itemPosition2 uns(10) const;                                                                                      9000657
  1588+end-pr;                                                                                                             9000658
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     32
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1589+                                                                                                                    9000659
  1590+///                                                                                                                 9000660
  1591+// Execute procedure for every list item                                                                            9000661
  1592+//                                                                                                                  9000662
  1593+// The passed procedure will be executed for every item                                                             9000663
  1594+// in the list.                                                                                                     9000664
  1595+//                                                                                                                  9000665
  1596+// <br><br>                                                                                                         9000666
  1597+//                                                                                                                  9000667
  1598+// The user can pass data through a pointer to the procedure.                                                       9000668
  1599+// The pointer will not be touched by this procedure itself, so it                                                  9000669
  1600+// can be *null.                                                                                                    9000670
  1601+//                                                                                                                  9000671
  1602+// <br><br>                                                                                                         9000672
  1603+//                                                                                                                  9000673
  1604+// The value of list entry can be changed through the passed procedure                                              9000674
  1605+// but not the size of the entry/allocated memory.                                                                  9000675
  1606+//                                                                                                                  9000676
  1607+// @author Mihael Schmidt                                                                                           9000677
  1608+// @date   23.01.2008                                                                                               9000678
  1609+//                                                                                                                  9000679
  1610+// @param Pointer to the list                                                                                       9000680
  1611+// @param Procedure pointer                                                                                         9000681
  1612+// @param Pointer to user data (optional)                                                                           9000682
  1613+///                                                                                                                 9000683
  1614+dcl-pr list_foreach extproc('list_foreach');                                                                        9000684
  1615+  list pointer const;                                                                                               9000685
  1616+  procecdure pointer(*proc) const;                                                                                  9000686
  1617+  userData pointer const options(*nopass);                                                                          9000687
  1618+end-pr;                                                                                                             9000688
  1619+                                                                                                                    9000689
  1620+///                                                                                                                 9000690
  1621+// Return character representation of list                                                                          9000691
  1622+//                                                                                                                  9000692
  1623+// Returns a string with the list items separated either by                                                         9000693
  1624+// the passed or default separator. The items can be                                                                9000694
  1625+// enclosed by a passed character. The maximum character length                                                     9000695
  1626+// returned is 65535. Every character/item after that will be                                                       9000696
  1627+// dropped silently. Items will not be trimmed for this operation.                                                  9000697
  1628+//                                                                                                                  9000698
  1629+// <br><br>                                                                                                         9000699
  1630+//                                                                                                                  9000700
  1631+// If the third parameter is passed, the third parameter will be                                                    9000701
  1632+// pre- and appended to the item. If the fourth parameter is also                                                   9000702
  1633+// passed the third parameter will be prepended to the item and the                                                 9000703
  1634+// fourth parameter will be appended to the item.                                                                   9000704
  1635+//                                                                                                                  9000705
  1636+// @author Mihael Schmidt                                                                                           9000706
  1637+// @date   08.02.2008                                                                                               9000707
  1638+//                                                                                                                  9000708
  1639+// @param Pointer to the list                                                                                       9000709
  1640+// @param separator (default: ,)                                                                                    9000710
  1641+// @param enclosing character (default: nothing)                                                                    9000711
  1642+// @param enclosing character at the end of item (default: nothing)                                                 9000712
  1643+//                                                                                                                  9000713
  1644+// @return character representation of all list items                                                               9000714
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     33
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1645+///                                                                                                                 9000715
  1646+dcl-pr list_toString varchar(65535) extproc('list_toString');                                                       9000716
  1647+  list pointer const;                                                                                               9000717
  1648+  separator varchar(1) const options(*omit:*nopass);                                                                9000718
  1649+  enclosing varchar(100) const options(*nopass);                                                                    9000719
  1650+  enclosingEnd varchar(100) const options(*nopass);                                                                 9000720
  1651+end-pr;                                                                                                             9000721
  1652+                                                                                                                    9000722
  1653+///                                                                                                                 9000723
  1654+// Split character string                                                                                           9000724
  1655+//                                                                                                                  9000725
  1656+// The passed character string will be split into tokens by either                                                  9000726
  1657+// a passed or the default separator. All tokens will be added to                                                   9000727
  1658+// a new list which will be returned.                                                                               9000728
  1659+//                                                                                                                  9000729
  1660+// <br><br>                                                                                                         9000730
  1661+//                                                                                                                  9000731
  1662+// Empty (but not blank) values will be dropped silently.                                                           9000732
  1663+//                                                                                                                  9000733
  1664+// @author Mihael Schmidt                                                                                           9000734
  1665+// @date   08.02.2008                                                                                               9000735
  1666+//                                                                                                                  9000736
  1667+// @param Character string (null-terminated)                                                                        9000737
  1668+// @param Separator (default: ;)                                                                                    9000738
  1669+//                                                                                                                  9000739
  1670+// @return Pointer to the filled list                                                                               9000740
  1671+///                                                                                                                 9000741
  1672+dcl-pr list_split pointer extproc('list_split') opdesc;                                                             9000742
  1673+  string char(65535) const options(*varsize);                                                                       9000743
  1674+  separator char(1) const options(*nopass);                                                                         9000744
  1675+end-pr;                                                                                                             9000745
  1676+                                                                                                                    9000746
  1677+///                                                                                                                 9000747
  1678+// Reverse list                                                                                                     9000748
  1679+//                                                                                                                  9000749
  1680+// Reverse the order of the list by simply switching the previous and                                               9000750
  1681+// next pointers of each element.                                                                                   9000751
  1682+//                                                                                                                  9000752
  1683+// @param Pointer to the list                                                                                       9000753
  1684+///                                                                                                                 9000754
  1685+dcl-pr list_reverse extproc('list_reverse');                                                                        9000755
  1686+  list pointer const;                                                                                               9000756
  1687+end-pr;                                                                                                             9000757
  1688+                                                                                                                    9000758
  1689+///                                                                                                                 9000759
  1690+// Create a copy of a list                                                                                          9000760
  1691+//                                                                                                                  9000761
  1692+// Creates a list with copies of all elements of the list.                                                          9000762
  1693+//                                                                                                                  9000763
  1694+// @author Mihael Schmidt                                                                                           9000764
  1695+// @date   7.4.2008                                                                                                 9000765
  1696+//                                                                                                                  9000766
  1697+// @param Pointer to the list                                                                                       9000767
  1698+//                                                                                                                  9000768
  1699+// @return Pointer to t e new list                                                                                  9000769
  1700+///                                                                                                                 9000770
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     34
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1701+dcl-pr list_copy pointer extproc('list_copy');                                                                      9000771
  1702+  list pointer const;                                                                                               9000772
  1703+end-pr;                                                                                                             9000773
  1704+                                                                                                                    9000774
  1705+///                                                                                                                 9000775
  1706+// Frequency of a value in the list                                                                                 9000776
  1707+//                                                                                                                  9000777
  1708+// Returns the number of times the passed value                                                                     9000778
  1709+// can be found in the list.                                                                                        9000779
  1710+//                                                                                                                  9000780
  1711+// @author Mihael Schmidt                                                                                           9000781
  1712+// @date   05.04.2008                                                                                               9000782
  1713+//                                                                                                                  9000783
  1714+// @param Pointer to the list                                                                                       9000784
  1715+// @param Pointer to the value                                                                                      9000785
  1716+// @param Length of the value                                                                                       9000786
  1717+//                                                                                                                  9000787
  1718+// @return number of copies of passed value in the list                                                             9000788
  1719+///                                                                                                                 9000789
  1720+dcl-pr list_frequency uns(10) extproc('list_frequency');                                                            9000790
  1721+  list pointer const;                                                                                               9000791
  1722+  value pointer const;                                                                                              9000792
  1723+  length uns(10) const;                                                                                             9000793
  1724+end-pr;                                                                                                             9000794
  1725+                                                                                                                    9000795
  1726+///                                                                                                                 9000796
  1727+// Add character list entry                                                                                         9000797
  1728+//                                                                                                                  9000798
  1729+// Adds a character entry to the list. If the position is outside the list                                          9000799
  1730+// the procedure returns <em>*off</em>. The current entry of the list at                                            9000800
  1731+// that position will be pushed one position down the list.                                                         9000801
  1732+//                                                                                                                  9000802
  1733+// <br><br>                                                                                                         9000803
  1734+//                                                                                                                  9000804
  1735+// If no position is passed to the procedure then the entry will be                                                 9000805
  1736+// appended to the end of the list (like <em>addLast</em>).                                                         9000806
  1737+//                                                                                                                  9000807
  1738+// @author Mihael Schmidt                                                                                           9000808
  1739+// @date   21.09.2008                                                                                               9000809
  1740+//                                                                                                                  9000810
  1741+// @param Pointer to the list                                                                                       9000811
  1742+// @param Character value                                                                                           9000812
  1743+// @param List position for the new value (optional)                                                                9000813
  1744+//                                                                                                                  9000814
  1745+// @return *on = entry added the list <br>                                                                          9000815
  1746+//         *off = error                                                                                             9000816
  1747+///                                                                                                                 9000817
  1748+dcl-pr list_addString ind extproc('list_addString') opdesc;                                                         9000818
  1749+  list pointer const;                                                                                               9000819
  1750+  value char(65535) const options(*varsize);                                                                        9000820
  1751+  index uns(10) const options(*nopass);                                                                             9000821
  1752+end-pr;                                                                                                             9000822
  1753+                                                                                                                    9000823
  1754+///                                                                                                                 9000824
  1755+// Add integer list entry                                                                                           9000825
  1756+//                                                                                                                  9000826
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     35
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1757+// Adds an integer entry to the list. If the position is outside the list                                           9000827
  1758+// the procedure returns <em>*off</em>. The current entry of the list at                                            9000828
  1759+// that position will be pushed one position down the list.                                                         9000829
  1760+//                                                                                                                  9000830
  1761+// <br><br>                                                                                                         9000831
  1762+//                                                                                                                  9000832
  1763+// If no position is passed to the procedure then the entry will be                                                 9000833
  1764+// appended to the end of the list (like <em>addLast</em>).                                                         9000834
  1765+//                                                                                                                  9000835
  1766+// @author Mihael Schmidt                                                                                           9000836
  1767+// @date   21.09.2008                                                                                               9000837
  1768+//                                                                                                                  9000838
  1769+// @param Pointer to the list                                                                                       9000839
  1770+// @param Integer value                                                                                             9000840
  1771+// @param List position for the new value (optional)                                                                9000841
  1772+//                                                                                                                  9000842
  1773+// @return *on = entry added the list <br>                                                                          9000843
  1774+//         *off = error                                                                                             9000844
  1775+///                                                                                                                 9000845
  1776+dcl-pr list_addInteger ind extproc('list_addInteger');                                                              9000846
  1777+  list pointer const;                                                                                               9000847
  1778+  value int(10) const;                                                                                              9000848
  1779+  index uns(10) const options(*nopass);                                                                             9000849
  1780+end-pr;                                                                                                             9000850
  1781+                                                                                                                    9000851
  1782+///                                                                                                                 9000852
  1783+// Add long list entry                                                                                              9000853
  1784+//                                                                                                                  9000854
  1785+// Adds a long entry to the list. If the position is outside the list                                               9000855
  1786+// the procedure returns <em>*off</em>. The current entry of the list at                                            9000856
  1787+// that position will be pushed one position down the list.                                                         9000857
  1788+//                                                                                                                  9000858
  1789+// <br><br>                                                                                                         9000859
  1790+//                                                                                                                  9000860
  1791+// If no position is passed to the procedure then the entry will be                                                 9000861
  1792+// appended to the end of the list (like <em>addLast</em>).                                                         9000862
  1793+//                                                                                                                  9000863
  1794+// @author Mihael Schmidt                                                                                           9000864
  1795+// @date   21.09.2008                                                                                               9000865
  1796+//                                                                                                                  9000866
  1797+// @param Pointer to the list                                                                                       9000867
  1798+// @param Long value                                                                                                9000868
  1799+// @param List position for the new value (optional)                                                                9000869
  1800+//                                                                                                                  9000870
  1801+// @return *on = entry added the list <br>                                                                          9000871
  1802+//         *off = error                                                                                             9000872
  1803+///                                                                                                                 9000873
  1804+dcl-pr list_addLong ind extproc('list_addLong');                                                                    9000874
  1805+  list pointer const;                                                                                               9000875
  1806+  value int(20) const;                                                                                              9000876
  1807+  index uns(10) const options(*nopass);                                                                             9000877
  1808+end-pr;                                                                                                             9000878
  1809+                                                                                                                    9000879
  1810+///                                                                                                                 9000880
  1811+// Add short list entry                                                                                             9000881
  1812+//                                                                                                                  9000882
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     36
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1813+// Adds a short entry to the list. If the position is outside the list                                              9000883
  1814+// the procedure returns <em>*off</em>. The current entry of the list at                                            9000884
  1815+// that position will be pushed one position down the list.                                                         9000885
  1816+//                                                                                                                  9000886
  1817+// <br><br>                                                                                                         9000887
  1818+//                                                                                                                  9000888
  1819+// If no position is passed to the procedure then the entry will be                                                 9000889
  1820+// appended to the end of the list (like <em>addLast</em>).                                                         9000890
  1821+//                                                                                                                  9000891
  1822+// @author Mihael Schmidt                                                                                           9000892
  1823+// @date   21.09.2008                                                                                               9000893
  1824+//                                                                                                                  9000894
  1825+// @param Pointer to the list                                                                                       9000895
  1826+// @param Short value                                                                                               9000896
  1827+// @param List position for the new value (optional)                                                                9000897
  1828+//                                                                                                                  9000898
  1829+// @return *on = entry added the list <br>                                                                          9000899
  1830+//         *off = error                                                                                             9000900
  1831+///                                                                                                                 9000901
  1832+dcl-pr list_addShort ind extproc('list_addShort');                                                                  9000902
  1833+  list pointer const;                                                                                               9000903
  1834+  value int(5) const;                                                                                               9000904
  1835+  index uns(10) const options(*nopass);                                                                             9000905
  1836+end-pr;                                                                                                             9000906
  1837+                                                                                                                    9000907
  1838+///                                                                                                                 9000908
  1839+// Add float list entry                                                                                             9000909
  1840+//                                                                                                                  9000910
  1841+// Adds a float entry to the list. If the position is outside the list                                              9000911
  1842+// the procedure returns <em>*off</em>. The current entry of the list at                                            9000912
  1843+// that position will be pushed one position down the list.                                                         9000913
  1844+//                                                                                                                  9000914
  1845+// <br><br>                                                                                                         9000915
  1846+//                                                                                                                  9000916
  1847+// If no position is passed to the procedure then the entry will be                                                 9000917
  1848+// appended to the end of the list (like <em>addLast</em>).                                                         9000918
  1849+//                                                                                                                  9000919
  1850+// @author Mihael Schmidt                                                                                           9000920
  1851+// @date   21.09.2008                                                                                               9000921
  1852+//                                                                                                                  9000922
  1853+// @param Pointer to the list                                                                                       9000923
  1854+// @param Float value                                                                                               9000924
  1855+// @param List position for the new value (optional)                                                                9000925
  1856+//                                                                                                                  9000926
  1857+// @return *on = entry added the list <br>                                                                          9000927
  1858+//         *off = error                                                                                             9000928
  1859+///                                                                                                                 9000929
  1860+dcl-pr list_addFloat ind extproc('list_addFloat');                                                                  9000930
  1861+  list pointer const;                                                                                               9000931
  1862+  value float(4) const;                                                                                             9000932
  1863+  index uns(10) const options(*nopass);                                                                             9000933
  1864+end-pr;                                                                                                             9000934
  1865+                                                                                                                    9000935
  1866+///                                                                                                                 9000936
  1867+// Add double list entry                                                                                            9000937
  1868+//                                                                                                                  9000938
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     37
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1869+// Adds a double entry to the list. If the position is outside the list                                             9000939
  1870+// the procedure returns <em>*off</em>. The current entry of the list at                                            9000940
  1871+// that position will be pushed one position down the list.                                                         9000941
  1872+//                                                                                                                  9000942
  1873+// <br><br>                                                                                                         9000943
  1874+//                                                                                                                  9000944
  1875+// If no position is passed to the procedure then the entry will be                                                 9000945
  1876+// appended to the end of the list (like <em>addLast</em>).                                                         9000946
  1877+//                                                                                                                  9000947
  1878+// @author Mihael Schmidt                                                                                           9000948
  1879+// @date   21.09.2008                                                                                               9000949
  1880+//                                                                                                                  9000950
  1881+// @param Pointer to the list                                                                                       9000951
  1882+// @param Double value                                                                                              9000952
  1883+// @param List position for the new value (optional)                                                                9000953
  1884+//                                                                                                                  9000954
  1885+// @return *on = entry added the list <br>                                                                          9000955
  1886+//         *off = error                                                                                             9000956
  1887+///                                                                                                                 9000957
  1888+dcl-pr list_addDouble ind extproc('list_addDouble');                                                                9000958
  1889+  list pointer const;                                                                                               9000959
  1890+  value float(8) const;                                                                                             9000960
  1891+  index uns(10) const options(*nopass);                                                                             9000961
  1892+end-pr;                                                                                                             9000962
  1893+                                                                                                                    9000963
  1894+///                                                                                                                 9000964
  1895+// Add boolean list entry                                                                                           9000965
  1896+//                                                                                                                  9000966
  1897+// Adds a boolean entry to the list. If the position is outside the list                                            9000967
  1898+// the procedure returns <em>*off</em>. The current entry of the list at                                            9000968
  1899+// that position will be pushed one position down the list.                                                         9000969
  1900+//                                                                                                                  9000970
  1901+// <br><br>                                                                                                         9000971
  1902+//                                                                                                                  9000972
  1903+// If no position is passed to the procedure then the entry will be                                                 9000973
  1904+// appended to the end of the list (like <em>addLast</em>).                                                         9000974
  1905+//                                                                                                                  9000975
  1906+// @author Mihael Schmidt                                                                                           9000976
  1907+// @date   21.09.2008                                                                                               9000977
  1908+//                                                                                                                  9000978
  1909+// @param Pointer to the list                                                                                       9000979
  1910+// @param Boolean value                                                                                             9000980
  1911+// @param List position for the new value (optional)                                                                9000981
  1912+//                                                                                                                  9000982
  1913+// @return *on = entry added the list <br>                                                                          9000983
  1914+//         *off = error                                                                                             9000984
  1915+///                                                                                                                 9000985
  1916+dcl-pr list_addBoolean ind extproc('list_addBoolean');                                                              9000986
  1917+  list pointer const;                                                                                               9000987
  1918+  value ind const;                                                                                                  9000988
  1919+  index uns(10) const options(*nopass);                                                                             9000989
  1920+end-pr;                                                                                                             9000990
  1921+                                                                                                                    9000991
  1922+///                                                                                                                 9000992
  1923+// Add packed decimal list entry                                                                                    9000993
  1924+//                                                                                                                  9000994
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     38
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1925+// Adds a packed decimal entry to the list. If the position is outside the list                                     9000995
  1926+// the procedure returns <em>*off</em>. The current entry of the list at                                            9000996
  1927+// that position will be pushed one position down the list.                                                         9000997
  1928+//                                                                                                                  9000998
  1929+// <br><br>                                                                                                         9000999
  1930+//                                                                                                                  9001000
  1931+// If no position is passed to the procedure then the entry will be                                                 9001001
  1932+// appended to the end of the list (like <em>addLast</em>).                                                         9001002
  1933+//                                                                                                                  9001003
  1934+// @author Mihael Schmidt                                                                                           9001004
  1935+// @date   21.09.2008                                                                                               9001005
  1936+//                                                                                                                  9001006
  1937+// @param Pointer to the list                                                                                       9001007
  1938+// @param Packed decimal value                                                                                      9001008
  1939+// @param List position for the new value (optional)                                                                9001009
  1940+//                                                                                                                  9001010
  1941+// @return *on = entry added the list <br>                                                                          9001011
  1942+//         *off = error                                                                                             9001012
  1943+///                                                                                                                 9001013
  1944+dcl-pr list_addDecimal ind extproc('list_addDecimal');                                                              9001014
  1945+  list pointer const;                                                                                               9001015
  1946+  value packed(15 : 5) const;                                                                                       9001016
  1947+  index uns(10) const options(*nopass);                                                                             9001017
  1948+end-pr;                                                                                                             9001018
  1949+                                                                                                                    9001019
  1950+///                                                                                                                 9001020
  1951+// Add date list entry                                                                                              9001021
  1952+//                                                                                                                  9001022
  1953+// Adds a date entry to the list. If the position is outside the list                                               9001023
  1954+// the procedure returns <em>*off</em>. The current entry of the list at                                            9001024
  1955+// that position will be pushed one position down the list.                                                         9001025
  1956+//                                                                                                                  9001026
  1957+// <br><br>                                                                                                         9001027
  1958+//                                                                                                                  9001028
  1959+// If no position is passed to the procedure then the entry will be                                                 9001029
  1960+// appended to the end of the list (like <em>addLast</em>).                                                         9001030
  1961+//                                                                                                                  9001031
  1962+// @author Mihael Schmidt                                                                                           9001032
  1963+// @date   21.09.2008                                                                                               9001033
  1964+//                                                                                                                  9001034
  1965+// @param Pointer to the list                                                                                       9001035
  1966+// @param Date value                                                                                                9001036
  1967+// @param List position for the new value (optional)                                                                9001037
  1968+//                                                                                                                  9001038
  1969+// @return *on = entry added the list <br>                                                                          9001039
  1970+//         *off = error                                                                                             9001040
  1971+///                                                                                                                 9001041
  1972+dcl-pr list_addDate ind extproc('list_addDate');                                                                    9001042
  1973+  list pointer const;                                                                                               9001043
  1974+  value date const;                                                                                                 9001044
  1975+  index uns(10) const options(*nopass);                                                                             9001045
  1976+end-pr;                                                                                                             9001046
  1977+                                                                                                                    9001047
  1978+///                                                                                                                 9001048
  1979+// Get character entry                                                                                              9001049
  1980+//                                                                                                                  9001050
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     39
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1981+// Returns a character list entry specified by the passed index.                                                    9001051
  1982+//                                                                                                                  9001052
  1983+// @author Mihael Schmidt                                                                                           9001053
  1984+// @date   21.09.2008                                                                                               9001054
  1985+//                                                                                                                  9001055
  1986+// @param Pointer to the list                                                                                       9001056
  1987+// @param List position                                                                                             9001057
  1988+//                                                                                                                  9001058
  1989+// @return Character string of the specified position                                                               9001059
  1990+///                                                                                                                 9001060
  1991+dcl-pr list_getString char(65535) extproc('list_getString');                                                        9001061
  1992+  list pointer const;                                                                                               9001062
  1993+  index uns(10) const;                                                                                              9001063
  1994+end-pr;                                                                                                             9001064
  1995+                                                                                                                    9001065
  1996+///                                                                                                                 9001066
  1997+// Get integer entry                                                                                                9001067
  1998+//                                                                                                                  9001068
  1999+// Returns an integer list entry specified by the passed index.                                                     9001069
  2000+//                                                                                                                  9001070
  2001+// @author Mihael Schmidt                                                                                           9001071
  2002+// @date   21.09.2008                                                                                               9001072
  2003+//                                                                                                                  9001073
  2004+// @param Pointer to the list                                                                                       9001074
  2005+// @param List position                                                                                             9001075
  2006+//                                                                                                                  9001076
  2007+// @return Integer value of the specified position                                                                  9001077
  2008+///                                                                                                                 9001078
  2009+dcl-pr list_getInteger int(10) extproc('list_getInteger');                                                          9001079
  2010+  list pointer const;                                                                                               9001080
  2011+  index uns(10) const;                                                                                              9001081
  2012+end-pr;                                                                                                             9001082
  2013+                                                                                                                    9001083
  2014+///                                                                                                                 9001084
  2015+// Get short entry                                                                                                  9001085
  2016+//                                                                                                                  9001086
  2017+// Returns a short list entry specified by the passed index.                                                        9001087
  2018+//                                                                                                                  9001088
  2019+// @author Mihael Schmidt                                                                                           9001089
  2020+// @date   21.09.2008                                                                                               9001090
  2021+//                                                                                                                  9001091
  2022+// @param Pointer to the list                                                                                       9001092
  2023+// @param List position                                                                                             9001093
  2024+//                                                                                                                  9001094
  2025+// @return Short value of the specified position                                                                    9001095
  2026+///                                                                                                                 9001096
  2027+dcl-pr list_getShort int(5) extproc('list_getShort');                                                               9001097
  2028+  list pointer const;                                                                                               9001098
  2029+  index uns(10) const;                                                                                              9001099
  2030+end-pr;                                                                                                             9001100
  2031+                                                                                                                    9001101
  2032+///                                                                                                                 9001102
  2033+// Get long entry                                                                                                   9001103
  2034+//                                                                                                                  9001104
  2035+// Returns a long list entry specified by the passed index.                                                         9001105
  2036+//                                                                                                                  9001106
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     40
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2037+// @author Mihael Schmidt                                                                                           9001107
  2038+// @date   21.09.2008                                                                                               9001108
  2039+//                                                                                                                  9001109
  2040+// @parem Pointer to the list                                                                                       9001110
  2041+// @param List position                                                                                             9001111
  2042+//                                                                                                                  9001112
  2043+// @return Long value of the specified position                                                                     9001113
  2044+///                                                                                                                 9001114
  2045+dcl-pr list_getLong int(20) extproc('list_getLong');                                                                9001115
  2046+  list pointer const;                                                                                               9001116
  2047+  index uns(10) const;                                                                                              9001117
  2048+end-pr;                                                                                                             9001118
  2049+                                                                                                                    9001119
  2050+///                                                                                                                 9001120
  2051+// Get float entry                                                                                                  9001121
  2052+//                                                                                                                  9001122
  2053+// Returns a float list entry specified by the passed index.                                                        9001123
  2054+//                                                                                                                  9001124
  2055+// @author Mihael Schmidt                                                                                           9001125
  2056+// @date   21.09.2008                                                                                               9001126
  2057+//                                                                                                                  9001127
  2058+// @param Pointer to the list                                                                                       9001128
  2059+// @param List position                                                                                             9001129
  2060+//                                                                                                                  9001130
  2061+// @return Float value of the specified position                                                                    9001131
  2062+///                                                                                                                 9001132
  2063+dcl-pr list_getFloat float(4) extproc('list_getFloat');                                                             9001133
  2064+  list pointer const;                                                                                               9001134
  2065+  index uns(10) const;                                                                                              9001135
  2066+end-pr;                                                                                                             9001136
  2067+                                                                                                                    9001137
  2068+///                                                                                                                 9001138
  2069+// Get double entry                                                                                                 9001139
  2070+//                                                                                                                  9001140
  2071+// Returns a double list entry specified by the passed index.                                                       9001141
  2072+//                                                                                                                  9001142
  2073+// @author Mihael Schmidt                                                                                           9001143
  2074+// @date   21.09.2008                                                                                               9001144
  2075+//                                                                                                                  9001145
  2076+// @param Pointer to the list                                                                                       9001146
  2077+// @param List position                                                                                             9001147
  2078+//                                                                                                                  9001148
  2079+// @return Double value of the specified position                                                                   9001149
  2080+///                                                                                                                 9001150
  2081+dcl-pr list_getDouble float(8) extproc('list_getDouble');                                                           9001151
  2082+  list pointer const;                                                                                               9001152
  2083+  index uns(10) const;                                                                                              9001153
  2084+end-pr;                                                                                                             9001154
  2085+                                                                                                                    9001155
  2086+///                                                                                                                 9001156
  2087+// Get boolean entry                                                                                                9001157
  2088+//                                                                                                                  9001158
  2089+// Returns a boolean list entry specified by the passed index.                                                      9001159
  2090+//                                                                                                                  9001160
  2091+// @author Mihael Schmidt                                                                                           9001161
  2092+// @date   21.09.2008                                                                                               9001162
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     41
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2093+//                                                                                                                  9001163
  2094+// @param Pointer to the list                                                                                       9001164
  2095+// @param List position                                                                                             9001165
  2096+//                                                                                                                  9001166
  2097+// @return Boolean value of the specified position                                                                  9001167
  2098+///                                                                                                                 9001168
  2099+dcl-pr list_getBoolean ind extproc('list_getBoolean');                                                              9001169
  2100+  list pointer const;                                                                                               9001170
  2101+  index uns(10) const;                                                                                              9001171
  2102+end-pr;                                                                                                             9001172
  2103+                                                                                                                    9001173
  2104+///                                                                                                                 9001174
  2105+// Get packed decimal entry                                                                                         9001175
  2106+//                                                                                                                  9001176
  2107+// Returns a packed decimal list entry specified by the passed index.                                               9001177
  2108+//                                                                                                                  9001178
  2109+// @author Mihael Schmidt                                                                                           9001179
  2110+// @date   21.09.2008                                                                                               9001180
  2111+//                                                                                                                  9001181
  2112+// @param Pointer to the list                                                                                       9001182
  2113+// @param List position                                                                                             9001183
  2114+//                                                                                                                  9001184
  2115+// @return Packed decimal value of the specified position                                                           9001185
  2116+///                                                                                                                 9001186
  2117+dcl-pr list_getDecimal packed(15 : 5) extproc('list_getDecimal');                                                   9001187
  2118+  list pointer const;                                                                                               9001188
  2119+  index uns(10) const;                                                                                              9001189
  2120+end-pr;                                                                                                             9001190
  2121+                                                                                                                    9001191
  2122+///                                                                                                                 9001192
  2123+// Get date entry                                                                                                   9001193
  2124+//                                                                                                                  9001194
  2125+// Returns a date list entry specified by the passed index.                                                         9001195
  2126+//                                                                                                                  9001196
  2127+// @author Mihael Schmidt                                                                                           9001197
  2128+// @date   21.09.2008                                                                                               9001198
  2129+//                                                                                                                  9001199
  2130+// @param Pointer to the list                                                                                       9001200
  2131+// @param List position                                                                                             9001201
  2132+//                                                                                                                  9001202
  2133+// @return Date value of the specified position                                                                     9001203
  2134+///                                                                                                                 9001204
  2135+dcl-pr list_getDate date extproc('list_getDate');                                                                   9001205
  2136+  list pointer const;                                                                                               9001206
  2137+  index uns(10) const;                                                                                              9001207
  2138+end-pr;                                                                                                             9001208
  2139+                                                                                                                    9001209
  2140+///                                                                                                                 9001210
  2141+// Sort list                                                                                                        9001211
  2142+//                                                                                                                  9001212
  2143+// Sorts the list with the passed procedure.                                                                        9001213
  2144+//                                                                                                                  9001214
  2145+// <br>                                                                                                             9001215
  2146+//                                                                                                                  9001216
  2147+// The compare procedure compares two values of the list and returns                                                9001217
  2148+// <ul>                                                                                                             9001218
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     42
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2149+//   <li>0 if the entries are equal</li>                                                                            9001219
  2150+//   <li>&lt; 0 if the first entry should be placed above the second entry</li>                                     9001220
  2151+//   <li>&gt; 0 if the second entry should be placed above the first entry</li>                                     9001221
  2152+// </ul>                                                                                                            9001222
  2153+//                                                                                                                  9001223
  2154+// <div>                                                                                                            9001224
  2155+// dcl-pr compare int(10); <br>                                                                                     9001225
  2156+// &nbsp;&nbsp;  value1 pointer const; <br>                                                                         9001226
  2157+// &nbsp;&nbsp;  length1 int(10) const; <br>                                                                        9001227
  2158+// &nbsp;&nbsp;  value2 pointer const; <br>                                                                         9001228
  2159+// &nbsp;&nbsp;  length2 int(10) const; <br>                                                                        9001229
  2160+// end-pr;                                                                                                          9001230
  2161+// </div>                                                                                                           9001231
  2162+//                                                                                                                  9001232
  2163+// A value passed to the compare function can also be <code>*null</code>.                                           9001233
  2164+//                                                                                                                  9001234
  2165+// @param Pointer to the list                                                                                       9001235
  2166+// @param Procedure pointer for comparing values to the sort the list                                               9001236
  2167+///                                                                                                                 9001237
  2168+dcl-pr list_sort extproc('list_sort');                                                                              9001238
  2169+  list pointer const;                                                                                               9001239
  2170+  compareProcedure pointer(*proc) const options(*nopass);                                                           9001240
  2171+end-pr;                                                                                                             9001241
  2172+                                                                                                                    9001242
  2173+///                                                                                                                 9001243
  2174+// Remove range of elements                                                                                         9001244
  2175+//                                                                                                                  9001245
  2176+// Removes a number of elements from the list.                                                                      9001246
  2177+//                                                                                                                  9001247
  2178+// @param Pointer to the list                                                                                       9001248
  2179+// @param Starting index                                                                                            9001249
  2180+// @param Number of elements to remove                                                                              9001250
  2181+//                                                                                                                  9001251
  2182+// @throws CPF9898 Position out of bounds                                                                           9001252
  2183+///                                                                                                                 9001253
  2184+dcl-pr list_removeRange extproc('list_removeRange');                                                                9001254
  2185+  list pointer const;                                                                                               9001255
  2186+  index uns(10) const;                                                                                              9001256
  2187+  numberElements uns(10) const;                                                                                     9001257
  2188+end-pr;                                                                                                             9001258
  2189+                                                                                                                    9001259
  2190+///                                                                                                                 9001260
  2191+// Merge lists                                                                                                      9001261
  2192+//                                                                                                                  9001262
  2193+// Merges the elements of second list with the first list. Elements which                                           9001263
  2194+// are already in the first list are not added by default (see third parameter).                                    9001264
  2195+//                                                                                                                  9001265
  2196+// @author Mihael Schmidt                                                                                           9001266
  2197+// @date   15.12.2009                                                                                               9001267
  2198+//                                                                                                                  9001268
  2199+// @param Destination list                                                                                          9001269
  2200+// @param Source list                                                                                               9001270
  2201+// @param Skip duplicates (default: *off)                                                                           9001271
  2202+///                                                                                                                 9001272
  2203+dcl-pr list_merge extproc('list_merge');                                                                            9001273
  2204+  destList pointer const;                                                                                           9001274
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     43
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2205+  sourceList pointer const;                                                                                         9001275
  2206+  skipDuplicates ind const options(*nopass);                                                                        9001276
  2207+end-pr;                                                                                                             9001277
  2208+                                                                                                                    9001278
  2209+/endif                                                                                                              9001279
  2210+                                                                                                                    9001280
  2211+/copy 'llist_so_h.rpgle'                                                                                            9001281
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  llist_so_+                                                   *                    10
        * External name  . . . . . . :  /home/mihael/include/llist/llist_so_h.rpgle                  *                    10
        * Last change  . . . . . . . :  03/29/20  08:30:06                                           *                    10
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2212+**FREE                                                                                                             10000001
  2213+                                                                                                                   10000002
  2214+///                                                                                                                10000003
  2215+// Linked List : Sorting Algorithms                                                                                10000004
  2216+//                                                                                                                 10000005
  2217+// @author Mihael Schmidt                                                                                          10000006
  2218+// @date   2009-02-17                                                                                              10000007
  2219+// @project Linked List                                                                                            10000008
  2220+///                                                                                                                10000009
  2221+                                                                                                                   10000010
  2222+/if not defined(LLIST_SORT)                                                                                        10000011
  2223+/define LLIST_SORT                                                                                                 10000012
  2224+                                                                                                                   10000013
  2225+//------------------------------------------------------------------------------                                   10000014
  2226+//                          The MIT License (MIT)                                                                  10000015
  2227+//                                                                                                                 10000016
  2228+// Copyright (c) 2017 Mihael Schmidt                                                                               10000017
  2229+//                                                                                                                 10000018
  2230+// Permission is hereby granted, free of charge, to any person obtaining a copy                                    10000019
  2231+// of this software and associated documentation files (the "Software"), to deal                                   10000020
  2232+// in the Software without restriction, including without limitation the rights                                    10000021
  2233+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                       10000022
  2234+// copies of the Software, and to permit persons to whom the Software is                                           10000023
  2235+// furnished to do so, subject to the following conditions:                                                        10000024
  2236+//                                                                                                                 10000025
  2237+// The above copyright notice and this permission notice shall be included in                                      10000026
  2238+// all copies or substantial portions of the Software.                                                             10000027
  2239+//                                                                                                                 10000028
  2240+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                      10000029
  2241+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                        10000030
  2242+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                     10000031
  2243+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                          10000032
  2244+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                   10000033
  2245+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                   10000034
  2246+// SOFTWARE.                                                                                                       10000035
  2247+//------------------------------------------------------------------------------                                   10000036
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     44
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2248+                                                                                                                   10000037
  2249+                                                                                                                   10000038
  2250+///                                                                                                                10000039
  2251+// Insertion sort                                                                                                  10000040
  2252+//                                                                                                                 10000041
  2253+// The list will be sorted inline. If no compare procedure has been passed the                                     10000042
  2254+// list will by sorted by bytes using <em>memcmp</em>.                                                             10000043
  2255+//                                                                                                                 10000044
  2256+// @author Mihael Schmidt                                                                                          10000045
  2257+// @date   2009-02-17                                                                                              10000046
  2258+//                                                                                                                 10000047
  2259+// @param Pointer to the list                                                                                      10000048
  2260+// @param Pointer to the compare procedure (optional)                                                              10000049
  2261+///                                                                                                                10000050
  2262+dcl-pr list_sort_insertionSort extproc('list_sort_insertionSort');                                                 10000051
  2263+  list pointer const;                                                                                              10000052
  2264+  compare pointer(*proc) const options(*nopass);                                                                   10000053
  2265+end-pr;                                                                                                            10000054
  2266+                                                                                                                   10000055
  2267+/endif                                                                                                             10000056
  2268 /include 'message/message_h.rpgle'                                                                                   000046
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  message_h+                                                   *                    11
        * External name  . . . . . . :  /home/mihael/include/message/message_h.rpgle                 *                    11
        * Last change  . . . . . . . :  04/14/21  19:21:26                                           *                    11
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2269+**FREE                                                                                                             11000001
  2270+                                                                                                                   11000002
  2271+/if not defined (MESSAGE)                                                                                          11000003
  2272+/define MESSAGE                                                                                                    11000004
  2273+                                                                                                                   11000005
  2274+///                                                                                                                11000006
  2275+// Messages                                                                                                        11000007
  2276+//                                                                                                                 11000008
  2277+// Wrapper for OS message API for making it easier to send and receive                                             11000009
  2278+// program messages.                                                                                               11000010
  2279+//                                                                                                                 11000011
  2280+// This module has been split up from the RPGUnit framework so that other                                          11000012
  2281+// applications can also use it.                                                                                   11000013
  2282+//                                                                                                                 11000014
  2283+// Refactored by Mihael Schmidt.                                                                                   11000015
  2284+//                                                                                                                 11000016
  2285+// @link https://bitbucket.org/m1hael/message Project Website                                                      11000017
  2286+// @link http://rpgunit.sourceforge.net RPGUnit                                                                    11000018
  2287+//                                                                                                                 11000019
  2288+// @project Message                                                                                                11000020
  2289+///                                                                                                                11000021
  2290+                                                                                                                   11000022
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     45
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2291+//                                                                                                                 11000023
  2292+// Constants                                                                                                       11000024
  2293+//                                                                                                                 11000025
  2294+                                                                                                                   11000026
  2295+// Call stack levels.                                                                                              11000027
  2296+dcl-c MESSAGE_ONE_CALL_STACK_LEVEL_ABOVE 1;                                                                        11000028
  2297+dcl-c MESSAGE_TWO_CALL_STACK_LEVEL_ABOVE 2;                                                                        11000029
  2298+                                                                                                                   11000030
  2299+// To resend the last new escape message                                                                           11000031
  2300+dcl-c MESSAGE_LAST_NEW_ESCAPE_MESSAGE const(*blank);                                                               11000032
  2301+                                                                                                                   11000033
  2302+// Call stack entry (current call stack entry)                                                                     11000034
  2303+dcl-c MESSAGE_CURRENT_CALL_STACK_ENTRY '*';                                                                        11000035
  2304+// Control boundary                                                                                                11000036
  2305+dcl-c MESSAGE_CONTROL_BOUNDARY '*CTLBDY';                                                                          11000037
  2306+                                                                                                                   11000038
  2307+                                                                                                                   11000039
  2308+//----------------------------------------------------------------------                                           11000040
  2309+// Message Data Structures (Templates)                                                                             11000041
  2310+//----------------------------------------------------------------------                                           11000042
  2311+dcl-ds messageInfo_t qualified template;                                                                           11000043
  2312+  messageId char(7);                                                                                               11000044
  2313+  message char(256);                                                                                               11000045
  2314+  // Sending Program Name                                                                                          11000046
  2315+  programName char(12);                                                                                            11000047
  2316+  // Sending Procedure Name                                                                                        11000048
  2317+  procedureName char(256);                                                                                         11000049
  2318+  // Sending Statement Number                                                                                      11000050
  2319+  statement char(10);                                                                                              11000051
  2320+end-ds;                                                                                                            11000052
  2321+                                                                                                                   11000053
  2322+// Program Message                                                                                                 11000054
  2323+dcl-ds message_t qualified template;                                                                               11000055
  2324+  id char(7);                                                                                                      11000056
  2325+  text varchar(254);                                                                                               11000057
  2326+  replacementData varchar(254);                                                                                    11000058
  2327+  sender likeds(messageSender_t);                                                                                  11000059
  2328+end-ds;                                                                                                            11000060
  2329+                                                                                                                   11000061
  2330+// Program Message Sender                                                                                          11000062
  2331+dcl-ds messageSender_t qualified template;                                                                         11000063
  2332+  programName char(12);                                                                                            11000064
  2333+  procedureName char(256);                                                                                         11000065
  2334+  statement char(6);                                                                                               11000066
  2335+end-ds;                                                                                                            11000067
  2336+                                                                                                                   11000068
  2337+                                                                                                                   11000069
  2338+//-------------------------------------------------------------------------------------------------                11000070
  2339+// Message Prototypes                                                                                              11000071
  2340+//-------------------------------------------------------------------------------------------------                11000072
  2341+                                                                                                                   11000073
  2342+///                                                                                                                11000074
  2343+// Receive exception message                                                                                       11000075
  2344+//                                                                                                                 11000076
  2345+// @return message info                                                                                            11000077
  2346+///                                                                                                                11000078
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     46
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2347+dcl-pr message_receiveMessageInfo likeds(messageInfo_t) extproc(*dclcase) end-pr;                                  11000079
  2348+                                                                                                                   11000080
  2349+///                                                                                                                11000081
  2350+// Receive a program message replacement data                                                                      11000082
  2351+//                                                                                                                 11000083
  2352+// @param message type (*ANY, *COMP, *EXCP, ...)                                                                   11000084
  2353+// @return message data                                                                                            11000085
  2354+///                                                                                                                11000086
  2355+dcl-pr message_receiveMessageData char(256) extproc(*dclcase);                                                     11000087
  2356+  type char(10) const;                                                                                             11000088
  2357+end-pr;                                                                                                            11000089
  2358+                                                                                                                   11000090
  2359+///                                                                                                                11000091
  2360+// Receive a program message text                                                                                  11000092
  2361+//                                                                                                                 11000093
  2362+// @param message type (*ANY, *COMP, *EXCP, ...)                                                                   11000094
  2363+// @return message text                                                                                            11000095
  2364+///                                                                                                                11000096
  2365+dcl-pr message_receiveMessageText char(256) extproc(*dclcase);                                                     11000097
  2366+  type char(10) const;                                                                                             11000098
  2367+end-pr;                                                                                                            11000099
  2368+                                                                                                                   11000100
  2369+///                                                                                                                11000101
  2370+// Receive a program message                                                                                       11000102
  2371+//                                                                                                                 11000103
  2372+// If the message was sent to a procedure above in the call stack,                                                 11000104
  2373+// indicate how many level above it is with the callStackLevelAbove                                                11000105
  2374+// parameter.                                                                                                      11000106
  2375+//                                                                                                                 11000107
  2376+// @param message type (*ANY, *COMP, *EXCP, ...)                                                                   11000108
  2377+// @param call stack level above the current stack entry                                                           11000109
  2378+// @param message key (*TOP, ...)                                                                                  11000110
  2379+// @return message                                                                                                 11000111
  2380+///                                                                                                                11000112
  2381+dcl-pr message_receiveMessage likeds(message_t) extproc(*dclcase);                                                 11000113
  2382+  type char(10) const;                                                                                             11000114
  2383+  callStackLevelAbove int(10) const options(*omit : *nopass);                                                      11000115
  2384+  messageKey char(4) const options(*nopass);                                                                       11000116
  2385+end-pr;                                                                                                            11000117
  2386+                                                                                                                   11000118
  2387+///                                                                                                                11000119
  2388+// Resend an escape message                                                                                        11000120
  2389+//                                                                                                                 11000121
  2390+// Resend an escape message that was monitored in a monitor block.                                                 11000122
  2391+// See API <a href="https://www.ibm.com/docs/en/i/7.4?topic=ssw_ibm_i_74/apis/QMHRSNEM.htm">                       11000123
  2392+// QMHRSNEM - Resend Escape Message</a>.                                                                           11000124
  2393+//                                                                                                                 11000125
  2394+// @param message key                                                                                              11000126
  2395+// @param error code                                                                                               11000127
  2396+///                                                                                                                11000128
  2397+dcl-pr message_resendEscapeMessage extpgm('QMHRSNEM');                                                             11000129
  2398+  messageKey char(4) const;                                                                                        11000130
  2399+  errorCode char(32565) const options(*varsize) noopt;                                                             11000131
  2400+end-pr;                                                                                                            11000132
  2401+                                                                                                                   11000133
  2402+///                                                                                                                11000134
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     47
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2403+// Send completion message                                                                                         11000135
  2404+//                                                                                                                 11000136
  2405+// @param message                                                                                                  11000137
  2406+// @param call stack level above the current stack entry                                                           11000138
  2407+///                                                                                                                11000139
  2408+dcl-pr message_sendCompletionMessage extproc(*dclcase);                                                            11000140
  2409+  message char(256) const;                                                                                         11000141
  2410+  callStackLevelAbove int(10) const options(*nopass);                                                              11000142
  2411+end-pr;                                                                                                            11000143
  2412+                                                                                                                   11000144
  2413+///                                                                                                                11000145
  2414+// Send escape message                                                                                             11000146
  2415+//                                                                                                                 11000147
  2416+// @param message                                                                                                  11000148
  2417+// @param call stack level above the current stack entry                                                           11000149
  2418+///                                                                                                                11000150
  2419+dcl-pr message_sendEscapeMessage extproc(*dclcase);                                                                11000151
  2420+  message char(256) const;                                                                                         11000152
  2421+  callStackLevel int(10) const options(*nopass);                                                                   11000153
  2422+end-pr;                                                                                                            11000154
  2423+                                                                                                                   11000155
  2424+///                                                                                                                11000156
  2425+// Send escape message to caller                                                                                   11000157
  2426+//                                                                                                                 11000158
  2427+// Send an escape message to the procedure's caller.                                                               11000159
  2428+//                                                                                                                 11000160
  2429+// @param message                                                                                                  11000161
  2430+///                                                                                                                11000162
  2431+dcl-pr message_sendEscapeMessageToCaller extproc(*dclcase);                                                        11000163
  2432+  message char(256) const;                                                                                         11000164
  2433+end-pr;                                                                                                            11000165
  2434+                                                                                                                   11000166
  2435+///                                                                                                                11000167
  2436+// Send escape message above control boundary                                                                      11000168
  2437+//                                                                                                                 11000169
  2438+// Send an escape message to the call stack entry just above the control boundary.                                 11000170
  2439+// Useful to terminate a program.                                                                                  11000171
  2440+//                                                                                                                 11000172
  2441+// @param message                                                                                                  11000173
  2442+///                                                                                                                11000174
  2443+dcl-pr message_sendEscapeMessageAboveControlBody extproc(*dclcase);                                                11000175
  2444+  message char(256) const;                                                                                         11000176
  2445+end-pr;                                                                                                            11000177
  2446+                                                                                                                   11000178
  2447+///                                                                                                                11000179
  2448+// Send info message                                                                                               11000180
  2449+//                                                                                                                 11000181
  2450+// Send an information message.                                                                                    11000182
  2451+//                                                                                                                 11000183
  2452+// @param message                                                                                                  11000184
  2453+// @param call stack level above the current stack entry                                                           11000185
  2454+///                                                                                                                11000186
  2455+dcl-pr message_sendInfoMessage extproc(*dclcase);                                                                  11000187
  2456+  message char(256) const;                                                                                         11000188
  2457+  callStackLevelAbove int(10) const options(*nopass);                                                              11000189
  2458+end-pr;                                                                                                            11000190
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     48
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2459+                                                                                                                   11000191
  2460+///                                                                                                                11000192
  2461+// Send status message                                                                                             11000193
  2462+//                                                                                                                 11000194
  2463+// @param message                                                                                                  11000195
  2464+///                                                                                                                11000196
  2465+dcl-pr message_sendStatusMessage extproc(*dclcase);                                                                11000197
  2466+  message char(256) const;                                                                                         11000198
  2467+end-pr;                                                                                                            11000199
  2468+                                                                                                                   11000200
  2469+///                                                                                                                11000201
  2470+// Send info message                                                                                               11000202
  2471+//                                                                                                                 11000203
  2472+// Send an information message.                                                                                    11000204
  2473+//                                                                                                                 11000205
  2474+// @param message                                                                                                  11000206
  2475+///                                                                                                                11000207
  2476+dcl-pr message_info extproc(*dclcase);                                                                             11000208
  2477+  message char(256) const;                                                                                         11000209
  2478+end-pr;                                                                                                            11000210
  2479+                                                                                                                   11000211
  2480+///                                                                                                                11000212
  2481+// Send status message                                                                                             11000213
  2482+//                                                                                                                 11000214
  2483+// @param message                                                                                                  11000215
  2484+///                                                                                                                11000216
  2485+dcl-pr message_status extproc(*dclcase);                                                                           11000217
  2486+  message char(256) const;                                                                                         11000218
  2487+end-pr;                                                                                                            11000219
  2488+                                                                                                                   11000220
  2489+///                                                                                                                11000221
  2490+// Send completion message                                                                                         11000222
  2491+//                                                                                                                 11000223
  2492+// @param message                                                                                                  11000224
  2493+///                                                                                                                11000225
  2494+dcl-pr message_completion extproc(*dclcase);                                                                       11000226
  2495+  message char(256) const;                                                                                         11000227
  2496+end-pr;                                                                                                            11000228
  2497+                                                                                                                   11000229
  2498+///                                                                                                                11000230
  2499+// Send escape message above control boundary                                                                      11000231
  2500+//                                                                                                                 11000232
  2501+// Send an escape message to the call stack entry just above the control boundary.                                 11000233
  2502+// Useful to terminate a program.                                                                                  11000234
  2503+//                                                                                                                 11000235
  2504+// @param message                                                                                                  11000236
  2505+// @param call stack level above the current stack entry                                                           11000237
  2506+///                                                                                                                11000238
  2507+dcl-pr message_escape extproc(*dclcase);                                                                           11000239
  2508+  message char(256) const;                                                                                         11000240
  2509+  callStackLevel int(10) const options(*nopass);                                                                   11000241
  2510+end-pr;                                                                                                            11000242
  2511+                                                                                                                   11000243
  2512+///                                                                                                                11000244
  2513+// Send info message from message file                                                                             11000245
  2514+//                                                                                                                 11000246
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     49
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2515+// Sends specified message from the message file as an info message.                                               11000247
  2516+//                                                                                                                 11000248
  2517+// @param library (default *LIBL)                                                                                  11000249
  2518+// @param message file name                                                                                        11000250
  2519+// @param message Id                                                                                               11000251
  2520+// @param message (optional)                                                                                       11000252
  2521+// @param call stack level above the current stack entry                                                           11000253
  2522+///                                                                                                                11000254
  2523+dcl-pr message_file_info extproc(*dclcase);                                                                        11000255
  2524+  library char(10) const options(*omit);                                                                           11000256
  2525+  msgfile char(10) const;                                                                                          11000257
  2526+  messageId char(7) const;                                                                                         11000258
  2527+  message char(1024) const options(*omit : *nopass);                                                               11000259
  2528+  callStackLevelAbove int(10) const options(*nopass);                                                              11000260
  2529+end-pr;                                                                                                            11000261
  2530+                                                                                                                   11000262
  2531+///                                                                                                                11000263
  2532+// Send escape message from message file                                                                           11000264
  2533+//                                                                                                                 11000265
  2534+// Sends specified message from the message file as an escape message.                                             11000266
  2535+//                                                                                                                 11000267
  2536+// @param library (default *LIBL)                                                                                  11000268
  2537+// @param message file name                                                                                        11000269
  2538+// @param message Id                                                                                               11000270
  2539+// @param message (optional)                                                                                       11000271
  2540+// @param call stack level above the current stack entry                                                           11000272
  2541+///                                                                                                                11000273
  2542+dcl-pr message_file_escape extproc(*dclcase);                                                                      11000274
  2543+  library char(10) const options(*omit);                                                                           11000275
  2544+  msgfile char(10) const;                                                                                          11000276
  2545+  messageId char(7) const;                                                                                         11000277
  2546+  message char(1024) const options(*omit : *nopass);                                                               11000278
  2547+  callStackLevelAbove int(10) const options(*nopass);                                                              11000279
  2548+end-pr;                                                                                                            11000280
  2549+                                                                                                                   11000281
  2550+///                                                                                                                11000282
  2551+// Send diagnostic message                                                                                         11000283
  2552+//                                                                                                                 11000284
  2553+// @param message                                                                                                  11000285
  2554+///                                                                                                                11000286
  2555+dcl-pr message_diagnostic extproc(*dclcase);                                                                       11000287
  2556+  message char(256) const;                                                                                         11000288
  2557+end-pr;                                                                                                            11000289
  2558+                                                                                                                   11000290
  2559+/endif                                                                                                             11000291
  2560 /include 'net_h.rpgle'                                                                                               000047
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  net_h.rpg+                                                   *                    12
        * External name  . . . . . . :  ../include/net_h.rpgle                                       *                    12
        * Last change  . . . . . . . :  08/21/18  18:21:24                                           *                    12
        *--------------------------------------------------------------------------------------------*
  2561+ /if not defined(NET_H)                                                                                            12000001
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     50
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
  2562+ /define NET_H                                                                                                     12000002
  2563+                                                                                                                   12000003
  2564+D inet_addr       PR            10U 0 extproc('inet_addr')                                                         12000004
  2565+D  address_str                    *   value options(*string)                                                       12000005
  2566+                                                                                                                   12000006
  2567+D inet_ntoa       PR              *   extproc('inet_ntoa')                                                         12000007
  2568+D  internet_addr                10U 0 value                                                                        12000008
  2569+                                                                                                                   12000009
  2570+D gethostbyname   PR              *   extproc('gethostbyname')                                                     12000010
  2571+D   host_name                     *   value options(*string)                                                       12000011
  2572+                                                                                                                   12000012
  2573+ /endif                                                                                                            12000013
  2574+                                                                                                                   12000014
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2575 /include 'qusec.rpginc'                                                                                              000048
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  qusec.rpg+                                                   *                    13
        * External name  . . . . . . :  ../include/qusec.rpginc                                      *                    13
        * Last change  . . . . . . . :  05/20/21  19:39:58                                           *                    13
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2576+**FREE                                                                                                             13000001
  2577+                                                                                                                   13000002
  2578+/if not defined (QUSEC_T)                                                                                          13000003
  2579+/define QUSEC_T                                                                                                    13000004
  2580+                                                                                                                   13000005
  2581+dcl-ds qusec_t qualified template;                                                                                 13000006
  2582+  bytesProvided int(10);                                                                                           13000007
  2583+  bytesAvailable int(10);                                                                                          13000008
  2584+  exceptionId char(7);                                                                                             13000009
  2585+  reserved char(1);                                                                                                13000010
  2586+end-ds;                                                                                                            13000011
  2587+                                                                                                                   13000012
  2588+/endif                                                                                                             13000013
  2589 /include 'socket_h.rpgle'                                                                                            000049
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  socket_h.+                                                   *                    14
        * External name  . . . . . . :  ../include/socket_h.rpgle                                    *                    14
        * Last change  . . . . . . . :  08/21/18  18:21:24                                           *                    14
        *--------------------------------------------------------------------------------------------*
  2590+ /if not defined(SOCKET_H)                                                                                         14000001
  2591+ /define SOCKET_H                                                                                                  14000002
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     51
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
  2592+                                                                                                                   14000003
  2593+ /if defined(SOCKET_UNIX98)                                                                                        14000004
  2594+D socket          PR            10I 0 extproc('qso_socket98')                                                      14000005
  2595+ /else                                                                                                             14000006
            LINES EXCLUDED: 1
  2596+ /endif                                                                                                            14000008
  2597+D  addr_family                  10I 0 value                                                                        14000009
  2598+D  type                         10I 0 value                                                                        14000010
  2599+D  protocol                     10I 0 value                                                                        14000011
  2600+                                                                                                                   14000012
  2601+ /if defined(SOCKET_UNIX98)                                                                                        14000013
  2602+D connect         PR            10I 0 extproc('qso_connect98')                                                     14000014
  2603+ /else                                                                                                             14000015
            LINES EXCLUDED: 1
  2604+ /endif                                                                                                            14000017
  2605+D  sock_desc                    10I 0 value                                                                        14000018
  2606+D  dest_addr                      *   value                                                                        14000019
  2607+D  addr_len                     10I 0 value                                                                        14000020
  2608+                                                                                                                   14000021
  2609+ /if defined(SOCKET_UNIX98)                                                                                        14000022
  2610+D send            PR            10I 0 extproc('qso_send98')                                                        14000023
  2611+ /else                                                                                                             14000024
            LINES EXCLUDED: 1
  2612+ /endif                                                                                                            14000026
  2613+D   sock_desc                   10I 0 value                                                                        14000027
  2614+D   buffer                        *   value                                                                        14000028
  2615+D   buffer_len                  10I 0 value                                                                        14000029
  2616+D   flags                       10I 0 value                                                                        14000030
  2617+                                                                                                                   14000031
  2618+ /if defined(SOCKET_UNIX98)                                                                                        14000032
  2619+D recv            PR            10I 0 extProc('qso_recv98')                                                        14000033
  2620+ /else                                                                                                             14000034
            LINES EXCLUDED: 1
  2621+ /endif                                                                                                            14000036
  2622+D   sock_desc                   10I 0 value                                                                        14000037
  2623+D   buffer                        *   value                                                                        14000038
  2624+D   buffer_len                  10I 0 value                                                                        14000039
  2625+D   flags                       10I 0 value                                                                        14000040
  2626+                                                                                                                   14000041
  2627+ /if defined(SOCKET_UNIX98)                                                                                        14000042
  2628+D setsockopt      PR            10I 0 extproc('qso_setsockopt98')                                                  14000043
  2629+ /else                                                                                                             14000044
            LINES EXCLUDED: 1
  2630+ /endif                                                                                                            14000046
  2631+D   socket_desc                 10I 0 value                                                                        14000047
  2632+D   level                       10I 0 value                                                                        14000048
  2633+D   option_name                 10I 0 value                                                                        14000049
  2634+D   option_value                  *   value                                                                        14000050
  2635+D   option_length...                                                                                               14000051
  2636+D                               10I 0 value                                                                        14000052
  2637+                                                                                                                   14000053
  2638+D close           PR            10I 0 extproc('close')                                                             14000054
  2639+D  sock_desc                    10I 0 value                                                                        14000055
  2640+                                                                                                                   14000056
  2641+D select          PR            10I 0 extproc('select')                                                            14000057
  2642+D   max_desc                    10I 0 value                                                                        14000058
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     52
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
  2643+D   read_set                      *   value                                                                        14000059
  2644+D   write_set                     *   value                                                                        14000060
  2645+D   except_set                    *   value                                                                        14000061
  2646+D   wait_Time                     *   value                                                                        14000062
  2647+                                                                                                                   14000063
  2648+                                                                                                                   14000064
  2649+                                                                                                                   14000065
  2650+ *                                                                                                                 14000066
  2651+ * address families                                                                                                14000067
  2652+ *                                                                                                                 14000068
  2653+D AF_UNSPEC       C                   0                                    Unspecified                             14000069
  2654+D AF_UNIX         C                   1                                    UNIX (local) domain                     14000070
  2655+D AF_INET         C                   2                                    Internet domain                         14000071
  2656+D AF_NS           C                   6                                    Network Services                        14000072
  2657+D AF_INET6        C                   24                                   IPv6                                    14000073
  2658+D AF_UNIX_CCSID   C                   98                                   UNIX with CCSID supp                    14000074
  2659+D AF_TELEPHONY    C                   99                                   Telephony domain                        14000075
  2660+ *                                                                                                                 14000076
  2661+ * socket types                                                                                                    14000077
  2662+ *                                                                                                                 14000078
  2663+D SOCK_STREAM     C                   1                                                                            14000079
  2664+D SOCK_DGRAM      C                   2                                                                            14000080
  2665+D SOCK_RAW        C                   3                                                                            14000081
  2666+D SOCK_SEQPACKET  C                   5                                                                            14000082
  2667+ *                                                                                                                 14000083
  2668+ * protocol                                                                                                        14000084
  2669+ *                                                                                                                 14000085
  2670+D PROTOCOL_DEFAULT...                                                                                              14000086
  2671+D                 C                   0                                                                            14000087
  2672+D IPPROTO_IP      C                   0                                                                            14000088
  2673+D                                                                                                                  14000089
  2674+D INADDR_NONE     C                   CONST(4294967295)                                                            14000090
  2675+                                                                                                                   14000091
  2676+D socket_address_t...                                                                                              14000092
  2677+D                 DS                  qualified template                                                           14000093
  2678+D   sa_family                    5I 0                                                                              14000094
  2679+D   sa_data                     14A                                                                                14000095
  2680+                                                                                                                   14000096
  2681+D socket_address_inet_t...                                                                                         14000097
  2682+D                 DS                  qualified template                                                           14000098
  2683+ /if defined(SOCKET_UNIX98)                                                                                        14000099
  2684+D   sa_len                       3U 0                                                                              14000100
  2685+D   family                       3U 0                                                                              14000101
  2686+ /else                                                                                                             14000102
            LINES EXCLUDED: 1
  2687+ /endif                                                                                                            14000104
  2688+D   port                         5U 0                                                                              14000105
  2689+D   addr                        10U 0                                                                              14000106
  2690+D   zero                         8A                                                                                14000107
  2691+                                                                                                                   14000108
  2692+D servent_t       DS                  qualified template                                                           14000109
  2693+D   s_name                        *                                                                                14000110
  2694+D   s_aliases                     *                                                                                14000111
  2695+D   s_port                      10I 0                                                                              14000112
  2696+D   s_proto                       *                                                                                14000113
  2697+                                                                                                                   14000114
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     53
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
  2698+                                                                                                                   14000115
  2699+D timeout_t       DS                  qualified template                                                           14000116
  2700+D   seconds                     10I 0                                                                              14000117
  2701+D   useconds                    10I 0                                                                              14000118
  2702+                                                                                                                   14000119
  2703+D*                                          allow broadcast msgs                                                   14000120
  2704+D SO_BROADCAST    C                   5                                                                            14000121
  2705+D*                                          record debug informatio                                                14000122
  2706+D SO_DEBUG        C                   10                                                                           14000123
  2707+D*                                          just use interfaces,                                                   14000124
  2708+D*                                          bypass routing                                                         14000125
  2709+D SO_DONTROUTE    C                   15                                                                           14000126
  2710+D*                                          error status                                                           14000127
  2711+D SO_ERROR        C                   20                                                                           14000128
  2712+D*                                          keep connections alive                                                 14000129
  2713+D SO_KEEPALIVE    C                   25                                                                           14000130
  2714+D*                                          linger upon close                                                      14000131
  2715+D SO_LINGER       C                   30                                                                           14000132
  2716+D*                                          out-of-band data inline                                                14000133
  2717+D SO_OOBINLINE    C                   35                                                                           14000134
  2718+D*                                          receive buffer size                                                    14000135
  2719+D SO_RCVBUF       C                   40                                                                           14000136
  2720+D*                                          receive low water mark                                                 14000137
  2721+D SO_RCVLOWAT     C                   45                                                                           14000138
  2722+D*                                          receive timeout value                                                  14000139
  2723+D SO_RCVTIMEO     C                   50                                                                           14000140
  2724+D*                                          re-use local address                                                   14000141
  2725+D SO_REUSEADDR    C                   55                                                                           14000142
  2726+D*                                          send buffer size                                                       14000143
  2727+D SO_SNDBUF       C                   60                                                                           14000144
  2728+D*                                          send low water mark                                                    14000145
  2729+D SO_SNDLOWAT     C                   65                                                                           14000146
  2730+D*                                          send timeout value                                                     14000147
  2731+D SO_SNDTIMEO     C                   70                                                                           14000148
  2732+D*                                          socket type                                                            14000149
  2733+D SO_TYPE         C                   75                                                                           14000150
  2734+D*                                          send loopback                                                          14000151
  2735+D SO_USELOOPBACK  C                   80                                                                           14000152
  2736+ *                                                                                                                 14000153
  2737+D SOL_SOCKET      C                   -1                                                                           14000154
  2738+ /endif                                                                                                            14000155
  2739+                                                                                                                   14000156
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2740 /include 'stomp.rpginc'                                                                                              000050
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stomp.rpg+                                                   *                    15
        * External name  . . . . . . :  ../include/stomp.rpginc                                      *                    15
        * Last change  . . . . . . . :  05/23/21  09:14:17                                           *                    15
        *--------------------------------------------------------------------------------------------*
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     54
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2741+**FREE                                                                                                             15000001
  2742+                                                                                                                   15000002
  2743+/if defined(STOMP_MERGED)                                                                                          15000003
            LINES EXCLUDED: 1
  2744+/endif                                                                                                             15000005
  2745+                                                                                                                   15000006
  2746+/define STOMP_MERGED                                                                                               15000007
  2747+                                                                                                                   15000008
  2748+/include 'stomp_h.rpginc'                                                                                          15000009
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stomp_h.r+                                                   *                    16
        * External name  . . . . . . :  ../include/stomp_h.rpginc                                    *                    16
        * Last change  . . . . . . . :  05/23/21  07:01:29                                           *                    16
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2749+**FREE                                                                                                             16000001
  2750+                                                                                                                   16000002
  2751+/if defined(STOMP_H)                                                                                               16000003
            LINES EXCLUDED: 1
  2752+/endif                                                                                                             16000005
  2753+                                                                                                                   16000006
  2754+/define STOMP_H                                                                                                    16000007
  2755+                                                                                                                   16000008
  2756+                                                                                                                   16000009
  2757+///                                                                                                                16000010
  2758+// STOMP Client : Main Module                                                                                      16000011
  2759+//                                                                                                                 16000012
  2760+// STOMP is a simple text protocol for transporting messages. It can be                                            16000013
  2761+// used to talk to a messaging system like ActiveMQ or RabbitMQ. For                                               16000014
  2762+// further details on STOMP see https://stomp.github.io.                                                           16000015
  2763+// <br><br>                                                                                                        16000016
  2764+// The networking is done via plain socket programming. The sockets will                                           16000017
  2765+// act in non-blocking mode.                                                                                       16000018
  2766+// <br><br>                                                                                                        16000019
  2767+// A typical workflow of a stomp session sending a message looks like this:                                        16000020
  2768+// <ol>                                                                                                            16000021
  2769+//   <li>create stomp client instance (stomp_create)</li>                                                          16000022
  2770+//   <li>open socket connection (stomp_open)</li>                                                                  16000023
  2771+//   <li>connect to/register at messaging system (stomp_command_connect)</li>                                      16000024
  2772+//   <li>send message(s) (stomp_command_send)</li>                                                                 16000025
  2773+//   <li>disconnect from messaging system (stomp_command_disconnect)</li>                                          16000026
  2774+//   <li>close socket connection (stomp_close)</li>                                                                16000027
  2775+//   <li>clean up resources (stomp_finalize)</li>                                                                  16000028
  2776+// </ol>                                                                                                           16000029
  2777+//                                                                                                                 16000030
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     55
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2778+// @author Mihael Schmidt                                                                                          16000031
  2779+// @date   21.05.2021                                                                                              16000032
  2780+// @project STOMP                                                                                                  16000033
  2781+// @version 2.0                                                                                                    16000034
  2782+// @link https://stomp.github.io                                                                                   16000035
  2783+// @link https://bitbucket.org/m1hael/stomp STOMP client                                                           16000036
  2784+///                                                                                                                16000037
  2785+                                                                                                                   16000038
  2786+                                                                                                                   16000039
  2787+//                          The MIT License (MIT)                                                                  16000040
  2788+//                                                                                                                 16000041
  2789+// Copyright (c) 2021 Mihael Schmidt                                                                               16000042
  2790+//                                                                                                                 16000043
  2791+// Permission is hereby granted, free of charge, to any person obtaining a copy                                    16000044
  2792+// of this software and associated documentation files (the "Software"), to deal                                   16000045
  2793+// in the Software without restriction, including without limitation the rights                                    16000046
  2794+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                       16000047
  2795+// copies of the Software, and to permit persons to whom the Software is                                           16000048
  2796+// furnished to do so, subject to the following conditions:                                                        16000049
  2797+//                                                                                                                 16000050
  2798+// The above copyright notice and this permission notice shall be included in                                      16000051
  2799+// all copies or substantial portions of the Software.                                                             16000052
  2800+//                                                                                                                 16000053
  2801+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                      16000054
  2802+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                        16000055
  2803+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                     16000056
  2804+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                          16000057
  2805+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                   16000058
  2806+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                   16000059
  2807+// SOFTWARE.                                                                                                       16000060
  2808+                                                                                                                   16000061
  2809+                                                                                                                   16000062
  2810+//                                                                                                                 16000063
  2811+// Templates                                                                                                       16000064
  2812+//                                                                                                                 16000065
  2813+dcl-s stomp_sessionid_t char(100) template;                                                                        16000066
  2814+dcl-s stomp_receiptid_t varchar(50) template;                                                                      16000067
  2815+                                                                                                                   16000068
  2816+                                                                                                                   16000069
  2817+//                                                                                                                 16000070
  2818+// Constants                                                                                                       16000071
  2819+//                                                                                                                 16000072
  2820+dcl-c STOMP_ACK_MODE_AUTO 'auto';                                                                                  16000073
  2821+dcl-c STOMP_ACK_MODE_CLIENT 'client';                                                                              16000074
  2822+dcl-c STOMP_ACK_MODE_CLIENT_INDIVIDUAL 'client-individual';                                                        16000075
  2823+dcl-c STOMP_OPTION_TIMEOUT 1;                                                                                      16000076
  2824+dcl-c STOMP_OPTION_CLIENT_ID 2;                                                                                    16000077
  2825+dcl-c STOMP_OPTION_ACK 3;                                                                                          16000078
  2826+dcl-c STOMP_OPTION_PERSISTENT 4;                                                                                   16000079
  2827+dcl-c STOMP_OPTION_DURABLE_SUBSCRIBER 5;                                                                           16000080
  2828+dcl-c STOMP_OPTION_CONTENT_TYPE 6;                                                                                 16000081
  2829+dcl-c STOMP_OPTION_CHARSET 7;                                                                                      16000082
  2830+dcl-c STOMP_OPTION_VIRTUAL_HOST 8;                                                                                 16000083
  2831+dcl-c STOMP_MIME_BINARY 'application/octet-stream';                                                                16000084
  2832+dcl-c STOMP_MIME_TEXT 'text/plain';                                                                                16000085
  2833+dcl-c STOMP_MIME_HTML 'text/html';                                                                                 16000086
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     56
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2834+dcl-c STOMP_MIME_XML 'application/xml';                                                                            16000087
  2835+dcl-c STOMP_MIME_JSON 'application/json';                                                                          16000088
  2836+dcl-c STOMP_MAX_FRAME_SIZE 1000000;                                                                                16000089
  2837+dcl-c STOMP_HEARTBEAT_NONE 0;                                                                                      16000090
  2838+                                                                                                                   16000091
  2839+                                                                                                                   16000092
  2840+///                                                                                                                16000093
  2841+// Create STOMP client instance                                                                                    16000094
  2842+//                                                                                                                 16000095
  2843+// Creates a STOMP client instance.                                                                                16000096
  2844+//                                                                                                                 16000097
  2845+// @param Hostname or IP (messaging system)                                                                        16000098
  2846+// @param Port                                                                                                     16000099
  2847+//                                                                                                                 16000100
  2848+// @return Pointer to client                                                                                       16000101
  2849+//                                                                                                                 16000102
  2850+// @info The caller must make sure to free all allocated resource                                                  16000103
  2851+//       of the client with the procedure <em>stomp_finalize()</em>.                                               16000104
  2852+///                                                                                                                16000105
  2853+dcl-pr stomp_create pointer extproc('stomp_create');                                                               16000106
  2854+  host varchar(255) const;                                                                                         16000107
  2855+  port int(10) const;                                                                                              16000108
  2856+end-pr;                                                                                                            16000109
  2857+                                                                                                                   16000110
  2858+///                                                                                                                16000111
  2859+// Open socket connection                                                                                          16000112
  2860+//                                                                                                                 16000113
  2861+// This procedure just opens a socket connection to the server. It                                                 16000114
  2862+// does not communicate with the message queuing system                                                            16000115
  2863+// (means it does not send any STOMP frames).                                                                      16000116
  2864+//                                                                                                                 16000117
  2865+// @param Client                                                                                                   16000118
  2866+///                                                                                                                16000119
  2867+dcl-pr stomp_open extproc('stomp_open');                                                                           16000120
  2868+  conn pointer const;                                                                                              16000121
  2869+end-pr;                                                                                                            16000122
  2870+                                                                                                                   16000123
  2871+///                                                                                                                16000124
  2872+// Close socket connection                                                                                         16000125
  2873+//                                                                                                                 16000126
  2874+// Closes the network socket. This procedure does not                                                              16000127
  2875+// send a disconnect frame to the message queuing system.                                                          16000128
  2876+//                                                                                                                 16000129
  2877+// @param Client                                                                                                   16000130
  2878+///                                                                                                                16000131
  2879+dcl-pr stomp_close extproc('stomp_close');                                                                         16000132
  2880+  conn pointer const;                                                                                              16000133
  2881+end-pr;                                                                                                            16000134
  2882+                                                                                                                   16000135
  2883+///                                                                                                                16000136
  2884+// Dispose client                                                                                                  16000137
  2885+//                                                                                                                 16000138
  2886+// Frees all allocated resources. Any open socket will be closed.                                                  16000139
  2887+// Any allocated resource from a set extension will also be freed.                                                 16000140
  2888+//                                                                                                                 16000141
  2889+// @param Client                                                                                                   16000142
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     57
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2890+///                                                                                                                16000143
  2891+dcl-pr stomp_finalize extproc('stomp_finalize');                                                                   16000144
  2892+  conn pointer;                                                                                                    16000145
  2893+end-pr;                                                                                                            16000146
  2894+                                                                                                                   16000147
  2895+///                                                                                                                16000148
  2896+// Send frame                                                                                                      16000149
  2897+//                                                                                                                 16000150
  2898+// Sends the passed frame to the connected system. The socket connection                                           16000151
  2899+// must have been established (stomp_open) before sending any frames.                                              16000152
  2900+// <br><br>                                                                                                        16000153
  2901+// If the client is configured for receipts (stomp_useReceipts) then every                                         16000154
  2902+// frame (except the CONNECT frame) will get a <em>receipt</em> header with                                        16000155
  2903+// the timestamp as a value. This procedure will wait until the correct                                            16000156
  2904+// receipt has been received. Any frames in between will be buffered and                                           16000157
  2905+// returned in the correct order by the next call to <em>stomp_receiveFrame()</em>.                                16000158
  2906+//                                                                                                                 16000159
  2907+// @param Client                                                                                                   16000160
  2908+// @param Frame                                                                                                    16000161
  2909+///                                                                                                                16000162
  2910+dcl-pr stomp_sendFrame extproc('stomp_sendFrame');                                                                 16000163
  2911+  conn pointer const;                                                                                              16000164
  2912+  frame pointer const;                                                                                             16000165
  2913+end-pr;                                                                                                            16000166
  2914+                                                                                                                   16000167
  2915+///                                                                                                                16000168
  2916+// Receive frame                                                                                                   16000169
  2917+//                                                                                                                 16000170
  2918+// Receive a frame from the message system. The next incoming socket data                                          16000171
  2919+// will be passed to the frame parser and the resulting frame is returned                                          16000172
  2920+// to the caller. The socket connection must have been established                                                 16000173
  2921+// (stomp_open) before receiving any frames.                                                                       16000174
  2922+// If no frame is received over the socket connection in the timeout time                                          16000175
  2923+// then *null will be returned.                                                                                    16000176
  2924+// <br><br>                                                                                                        16000177
  2925+// Any buffered frame will be returned by this procedure before trying to                                          16000178
  2926+// receive a frame over the socket connection.                                                                     16000179
  2927+//                                                                                                                 16000180
  2928+// @param Client                                                                                                   16000181
  2929+//                                                                                                                 16000182
  2930+// @return Pointer to frame or *null if no frame could be received in time                                         16000183
  2931+//                                                                                                                 16000184
  2932+// @info The call must make sure to free any resources allocated by the frame                                      16000185
  2933+//       with <em>stomp_frame_finalize()</em>.                                                                     16000186
  2934+//                                                                                                                 16000187
  2935+// @info If ack mode is "client" or "client-individual" then the application                                       16000188
  2936+//       must send an ACK frame (stomp_command_ack) if it processed the frame                                      16000189
  2937+//       successfully or a NACK frame (stomp_command_nack) if the frame could                                      16000190
  2938+//       not be processed. On ack mode "auto" (default) the message queueing                                       16000191
  2939+//       system removes message from the queue as soon as it is send to the                                        16000192
  2940+//       client.                                                                                                   16000193
  2941+///                                                                                                                16000194
  2942+dcl-pr stomp_receiveFrame pointer extproc('stomp_receiveFrame');                                                   16000195
  2943+  conn pointer const;                                                                                              16000196
  2944+end-pr;                                                                                                            16000197
  2945+                                                                                                                   16000198
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     58
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  2946+///                                                                                                                16000199
  2947+// Set timeout                                                                                                     16000200
  2948+//                                                                                                                 16000201
  2949+// Sets the timeout for the socket operations (receive).                                                           16000202
  2950+//                                                                                                                 16000203
  2951+// @param Client                                                                                                   16000204
  2952+// @param Timeout (in ms)                                                                                          16000205
  2953+///                                                                                                                16000206
  2954+dcl-pr stomp_setTimeout extproc('stomp_setTimeout');                                                               16000207
  2955+  conn pointer const;                                                                                              16000208
  2956+  mseconds int(10) const;                                                                                          16000209
  2957+end-pr;                                                                                                            16000210
  2958+                                                                                                                   16000211
  2959+///                                                                                                                16000212
  2960+// Set virtual host                                                                                                16000213
  2961+//                                                                                                                 16000214
  2962+// Sets the virtual host. This is an optional connect header.                                                      16000215
  2963+//                                                                                                                 16000216
  2964+// @param Client                                                                                                   16000217
  2965+// @param Virtual Host                                                                                             16000218
  2966+///                                                                                                                16000219
  2967+dcl-pr stomp_setVirtualHost extproc('stomp_setVirtualHost');                                                       16000220
  2968+  conn pointer const;                                                                                              16000221
  2969+  virtualHost varchar(100) const;                                                                                  16000222
  2970+end-pr;                                                                                                            16000223
  2971+                                                                                                                   16000224
  2972+///                                                                                                                16000225
  2973+// Set client id                                                                                                   16000226
  2974+//                                                                                                                 16000227
  2975+// Sets the client id. This value is needed for a durable topic subscription.                                      16000228
  2976+// This id must be unique within the whole system.                                                                 16000229
  2977+//                                                                                                                 16000230
  2978+// @param Client                                                                                                   16000231
  2979+// @param Client id                                                                                                16000232
  2980+///                                                                                                                16000233
  2981+dcl-pr stomp_setClientId extproc('stomp_setClientId');                                                             16000234
  2982+  conn pointer const;                                                                                              16000235
  2983+  clientId varchar(100) const;                                                                                     16000236
  2984+end-pr;                                                                                                            16000237
  2985+                                                                                                                   16000238
  2986+                                                                                                                   16000239
  2987+///                                                                                                                16000240
  2988+// Set content type                                                                                                16000241
  2989+//                                                                                                                 16000242
  2990+// Sets the content type which will be added to every message (SEND frame) sent                                    16000243
  2991+// to the server. This can be overwritten on the stomp_command_send call if                                        16000244
  2992+// necessary.                                                                                                      16000245
  2993+//                                                                                                                 16000246
  2994+// @param Client                                                                                                   16000247
  2995+// @param Content type                                                                                             16000248
  2996+///                                                                                                                16000249
  2997+dcl-pr stomp_setContentType extproc(*dclcase);                                                                     16000250
  2998+  conn pointer const;                                                                                              16000251
  2999+  contentType varchar(100) const;                                                                                  16000252
  3000+end-pr;                                                                                                            16000253
  3001+                                                                                                                   16000254
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     59
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3002+                                                                                                                   16000255
  3003+///                                                                                                                16000256
  3004+// Set ack mode                                                                                                    16000257
  3005+//                                                                                                                 16000258
  3006+// The successful receiving of a message from the messaging system can                                             16000259
  3007+// either be automatically acknowledged or manually. If the client is                                              16000260
  3008+// configured for ack mode <em>auto</em> then the server assumes that                                              16000261
  3009+// every sent message from the server is also received by the client.                                              16000262
  3010+// The client does not need to do anything. If the client is configured                                            16000263
  3011+// for ack mode <em>client</em> then every received message must be                                                16000264
  3012+// acknowledged by the client by sending in ACK frame. In ack mode                                                 16000265
  3013+// <em>client</em> every not acknowledged frame will be sent again.                                                16000266
  3014+// <br><br>                                                                                                        16000267
  3015+// Default is ack mode <em>auto</em>.                                                                              16000268
  3016+//                                                                                                                 16000269
  3017+// @param Client                                                                                                   16000270
  3018+// @param Ack mode (STOMP_ACK_MODE_AUTO, STOMP_ACK_MODE_CLIENT, STOMP_ACK_MODE_CLIENT_INDIVIDUAL)                  16000271
  3019+///                                                                                                                16000272
  3020+dcl-pr stomp_setAckMode extproc('stomp_setAckMode');                                                               16000273
  3021+  conn pointer const;                                                                                              16000274
  3022+  mode varchar(100) const;                                                                                         16000275
  3023+end-pr;                                                                                                            16000276
  3024+                                                                                                                   16000277
  3025+///                                                                                                                16000278
  3026+// Get session id                                                                                                  16000279
  3027+//                                                                                                                 16000280
  3028+// Returns the session id.                                                                                         16000281
  3029+//                                                                                                                 16000282
  3030+// @param Client                                                                                                   16000283
  3031+//                                                                                                                 16000284
  3032+// @return Session or *blank if no session id has been set                                                         16000285
  3033+///                                                                                                                16000286
  3034+dcl-pr stomp_getSessionId like(stomp_sessionid_t) extproc('stomp_getSessionId');                                   16000287
  3035+  conn pointer const;                                                                                              16000288
  3036+end-pr;                                                                                                            16000289
  3037+                                                                                                                   16000290
  3038+///                                                                                                                16000291
  3039+// @brief Set durable subscriber name                                                                              16000292
  3040+//                                                                                                                 16000293
  3041+// This value is needed for a durable topic subscription at the messaging system.                                  16000294
  3042+//                                                                                                                 16000295
  3043+// @param Client                                                                                                   16000296
  3044+// @param Durable subscriber name                                                                                  16000297
  3045+///                                                                                                                16000298
  3046+dcl-pr stomp_setDurableSubscriberName extproc('stomp_setDurableSubscriberName');                                   16000299
  3047+  conn pointer const;                                                                                              16000300
  3048+  name varchar(100) const;                                                                                         16000301
  3049+end-pr;                                                                                                            16000302
  3050+                                                                                                                   16000303
  3051+///                                                                                                                16000304
  3052+// Set messages persistent                                                                                         16000305
  3053+//                                                                                                                 16000306
  3054+// Configures the client to send persistent messages. Only messages with                                           16000307
  3055+// the header <em>persistent</em> will be sent to all durable topic subscribers.                                   16000308
  3056+//                                                                                                                 16000309
  3057+// @param Client                                                                                                   16000310
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     60
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3058+// @param Persistent messages                                                                                      16000311
  3059+///                                                                                                                16000312
  3060+dcl-pr stomp_setPersistMessages extproc('stomp_setPersistMessages');                                               16000313
  3061+  conn pointer const;                                                                                              16000314
  3062+  value ind const;                                                                                                 16000315
  3063+end-pr;                                                                                                            16000316
  3064+                                                                                                                   16000317
  3065+///                                                                                                                16000318
  3066+// Get extension                                                                                                   16000319
  3067+//                                                                                                                 16000320
  3068+// Returns previously set extension.                                                                               16000321
  3069+//                                                                                                                 16000322
  3070+// @param Client                                                                                                   16000323
  3071+//                                                                                                                 16000324
  3072+// @return Extension or *null if no extension has been set                                                         16000325
  3073+///                                                                                                                16000326
  3074+dcl-pr stomp_getExtension pointer extproc('stomp_getExtension');                                                   16000327
  3075+  conn pointer const;                                                                                              16000328
  3076+end-pr;                                                                                                            16000329
  3077+                                                                                                                   16000330
  3078+///                                                                                                                16000331
  3079+// Set extension                                                                                                   16000332
  3080+//                                                                                                                 16000333
  3081+// Sets the extension to be used by the client. Any previously set extension                                       16000334
  3082+// will be removed and the allocated resources freed.                                                              16000335
  3083+//                                                                                                                 16000336
  3084+// @param Client                                                                                                   16000337
  3085+// @param Extension                                                                                                16000338
  3086+///                                                                                                                16000339
  3087+dcl-pr stomp_setExtension extproc('stomp_setExtension');                                                           16000340
  3088+  conn pointer const;                                                                                              16000341
  3089+  extension pointer const;                                                                                         16000342
  3090+end-pr;                                                                                                            16000343
  3091+                                                                                                                   16000344
  3092+///                                                                                                                16000345
  3093+// Set usage of receipts                                                                                           16000346
  3094+//                                                                                                                 16000347
  3095+// Configures if the client asks for server receipts for every                                                     16000348
  3096+// sent frame (except CONNECT).                                                                                    16000349
  3097+//                                                                                                                 16000350
  3098+// @param Client                                                                                                   16000351
  3099+// @param Value *on/*off                                                                                           16000352
  3100+///                                                                                                                16000353
  3101+dcl-pr stomp_useReceipts extproc('stomp_useReceipts');                                                             16000354
  3102+  conn pointer const;                                                                                              16000355
  3103+  value ind const;                                                                                                 16000356
  3104+end-pr;                                                                                                            16000357
  3105+                                                                                                                   16000358
  3106+///                                                                                                                16000359
  3107+// Receipt usage                                                                                                   16000360
  3108+//                                                                                                                 16000361
  3109+// Returns if the client asks for server receipts for                                                              16000362
  3110+// sent frames.                                                                                                    16000363
  3111+//                                                                                                                 16000364
  3112+// @param Client                                                                                                   16000365
  3113+//                                                                                                                 16000366
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     61
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3114+// @return *on = ask server for receipts <br>                                                                      16000367
  3115+//         *off = don't ask server for receipts                                                                    16000368
  3116+///                                                                                                                16000369
  3117+dcl-pr stomp_isUsingReceipts ind extproc('stomp_isUsingReceipts');                                                 16000370
  3118+  const pointer const;                                                                                             16000371
  3119+end-pr;                                                                                                            16000372
  3120+                                                                                                                   16000373
  3121+///                                                                                                                16000374
  3122+// Get option value                                                                                                16000375
  3123+//                                                                                                                 16000376
  3124+// Returns the option value for the passed configuration option.                                                   16000377
  3125+//                                                                                                                 16000378
  3126+// @param Client                                                                                                   16000379
  3127+// @param Configuration option                                                                                     16000380
  3128+//                                                                                                                 16000381
  3129+// @return Pointer to value or *null if the client doesn't have this option                                        16000382
  3130+///                                                                                                                16000383
  3131+dcl-pr stomp_getOptionValue pointer extproc('stomp_getOptionValue');                                               16000384
  3132+  conn pointer const;                                                                                              16000385
  3133+  option int(10) const;                                                                                            16000386
  3134+end-pr;                                                                                                            16000387
  3135+                                                                                                                   16000388
  3136+///                                                                                                                16000389
  3137+// Check client configuration option                                                                               16000390
  3138+//                                                                                                                 16000391
  3139+// Checks if the client is configured for the passed option.                                                       16000392
  3140+//                                                                                                                 16000393
  3141+// @param Client                                                                                                   16000394
  3142+// @param Option                                                                                                   16000395
  3143+//                                                                                                                 16000396
  3144+// @return *on = client is configured for passed option <br>                                                       16000397
  3145+//         *off = client has no configuration for passed option                                                    16000398
  3146+///                                                                                                                16000399
  3147+dcl-pr stomp_hasOption ind extproc('stomp_hasOption');                                                             16000400
  3148+  conn pointer const;                                                                                              16000401
  3149+  option int(10) const;                                                                                            16000402
  3150+end-pr;                                                                                                            16000403
  3151+                                                                                                                   16000404
  3152+///                                                                                                                16000405
  3153+// Set session id                                                                                                  16000406
  3154+//                                                                                                                 16000407
  3155+// Sets the session id.                                                                                            16000408
  3156+//                                                                                                                 16000409
  3157+// @param Client                                                                                                   16000410
  3158+// @param Session id                                                                                               16000411
  3159+///                                                                                                                16000412
  3160+dcl-pr stomp_setSessionId extproc('stomp_setSessionId');                                                           16000413
  3161+  conn pointer const;                                                                                              16000414
  3162+  session like(stomp_sessionid_t) const;                                                                           16000415
  3163+end-pr;                                                                                                            16000416
  3164+                                                                                                                   16000417
  3165+///                                                                                                                16000418
  3166+// Add open receipt                                                                                                16000419
  3167+//                                                                                                                 16000420
  3168+// Adds a receipt to the list of open receipts.                                                                    16000421
  3169+//                                                                                                                 16000422
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     62
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3170+// @param Client                                                                                                   16000423
  3171+// @param Receipt id                                                                                               16000424
  3172+///                                                                                                                16000425
  3173+dcl-pr stomp_addOpenReceipt extproc('stomp_addOpenReceipt');                                                       16000426
  3174+  conn pointer const;                                                                                              16000427
  3175+  receipt like(stomp_receiptid_t) const;                                                                           16000428
  3176+end-pr;                                                                                                            16000429
  3177+                                                                                                                   16000430
  3178+///                                                                                                                16000431
  3179+// Get number of open receipts                                                                                     16000432
  3180+//                                                                                                                 16000433
  3181+// Returns the number of open receipts.                                                                            16000434
  3182+//                                                                                                                 16000435
  3183+// @param Client                                                                                                   16000436
  3184+//                                                                                                                 16000437
  3185+// @return Number of open receipts                                                                                 16000438
  3186+///                                                                                                                16000439
  3187+dcl-pr stomp_getNumberOfOpenReceipts int(10) extproc('stomp_getNumberOfOpenReceipts');                             16000440
  3188+  conn pointer const;                                                                                              16000441
  3189+end-pr;                                                                                                            16000442
  3190+                                                                                                                   16000443
  3191+dcl-pr stomp_setTransactionId extproc(*dclcase);                                                                   16000444
  3192+  client pointer const;                                                                                            16000445
  3193+  transactionId varchar(100) const;                                                                                16000446
  3194+end-pr;                                                                                                            16000447
  3195+                                                                                                                   16000448
  3196+///                                                                                                                16000449
  3197+// Get Transaction Id                                                                                              16000450
  3198+//                                                                                                                 16000451
  3199+// Returns the currently used transaction id. If the id is *blank then no transaction                              16000452
  3200+// is currently being used.                                                                                        16000453
  3201+//                                                                                                                 16000454
  3202+// @param Client                                                                                                   16000455
  3203+// @return Transaction Id                                                                                          16000456
  3204+///                                                                                                                16000457
  3205+dcl-pr stomp_getTransactionId varchar(100) extproc(*dclcase);                                                      16000458
  3206+  client pointer const;                                                                                            16000459
  3207+end-pr;                                                                                                            16000460
  3208+                                                                                                                   16000461
  3209+///                                                                                                                16000462
  3210+// Set Server Heart-beat                                                                                           16000463
  3211+//                                                                                                                 16000464
  3212+// Sets the server heart-beat. 0 (zero) means no heart-beat.                                                       16000465
  3213+//                                                                                                                 16000466
  3214+// @param Client                                                                                                   16000467
  3215+// @param Heartbeat interval (in ms)                                                                               16000468
  3216+///                                                                                                                16000469
  3217+dcl-pr stomp_setHeartbeatServer extproc(*dclcase);                                                                 16000470
  3218+  client pointer const;                                                                                            16000471
  3219+  heartbeatValue uns(10) const;                                                                                    16000472
  3220+end-pr;                                                                                                            16000473
  3221+                                                                                                                   16000474
  3222+///                                                                                                                16000475
  3223+// Get Server Heart-beat                                                                                           16000476
  3224+//                                                                                                                 16000477
  3225+// Gets the server heart-beat. 0 (zero) means no heart-beat.                                                       16000478
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     63
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3226+//                                                                                                                 16000479
  3227+// @param Client                                                                                                   16000480
  3228+// @return Heartbeat interval (in ms)                                                                              16000481
  3229+///                                                                                                                16000482
  3230+dcl-pr stomp_getHeartbeatServer uns(10) extproc(*dclcase);                                                         16000483
  3231+  client pointer const;                                                                                            16000484
  3232+end-pr;                                                                                                            16000485
  3233+/include 'stompcmd.rpginc'                                                                                         15000010
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stompcmd.+                                                   *                    17
        * External name  . . . . . . :  ../include/stompcmd.rpginc                                   *                    17
        * Last change  . . . . . . . :  05/23/21  09:15:18                                           *                    17
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3234+**FREE                                                                                                             17000001
  3235+                                                                                                                   17000002
  3236+/if defined(STOMP_COMMAND_H)                                                                                       17000003
            LINES EXCLUDED: 1
  3237+/endif                                                                                                             17000005
  3238+                                                                                                                   17000006
  3239+/define STOMP_COMMAND_H                                                                                            17000007
  3240+                                                                                                                   17000008
  3241+                                                                                                                   17000009
  3242+///                                                                                                                17000010
  3243+// STOMP Client : Commands                                                                                         17000011
  3244+//                                                                                                                 17000012
  3245+// This module contains procedures for the various STOMP commands.                                                 17000013
  3246+//                                                                                                                 17000014
  3247+// @author Mihael Schmidt                                                                                          17000015
  3248+// @date   26.07.2017                                                                                              17000016
  3249+// @project STOMP                                                                                                  17000017
  3250+// @version 2.0                                                                                                    17000018
  3251+// @link https://stomp.github.io                                                                                   17000019
  3252+// @link https://bitbucket.org/m1hael/stomp STOMP client                                                           17000020
  3253+///                                                                                                                17000021
  3254+                                                                                                                   17000022
  3255+//                          The MIT License (MIT)                                                                  17000023
  3256+//                                                                                                                 17000024
  3257+// Copyright (c) 2021 Mihael Schmidt                                                                               17000025
  3258+//                                                                                                                 17000026
  3259+// Permission is hereby granted, free of charge, to any person obtaining a copy                                    17000027
  3260+// of this software and associated documentation files (the "Software"), to deal                                   17000028
  3261+// in the Software without restriction, including without limitation the rights                                    17000029
  3262+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                       17000030
  3263+// copies of the Software, and to permit persons to whom the Software is                                           17000031
  3264+// furnished to do so, subject to the following conditions:                                                        17000032
  3265+//                                                                                                                 17000033
  3266+// The above copyright notice and this permission notice shall be included in                                      17000034
  3267+// all copies or substantial portions of the Software.                                                             17000035
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     64
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3268+//                                                                                                                 17000036
  3269+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                      17000037
  3270+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                        17000038
  3271+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                     17000039
  3272+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                          17000040
  3273+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                   17000041
  3274+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                   17000042
  3275+// SOFTWARE.                                                                                                       17000043
  3276+                                                                                                                   17000044
  3277+///                                                                                                                17000045
  3278+// Connect to messaging system                                                                                     17000046
  3279+//                                                                                                                 17000047
  3280+// Connects this client to the configured messaging system with a CONNECT                                          17000048
  3281+// frame. One client can connect to exactly one system at the same time.                                           17000049
  3282+// <br><br>                                                                                                        17000050
  3283+// The returned session id will be stored in the client and can be                                                 17000051
  3284+// queried with <em>stomp_getSessionId()</em>.                                                                     17000052
  3285+// <br><br>                                                                                                        17000053
  3286+// Any registered extension will be called on frame creation.                                                      17000054
  3287+// <br><br>                                                                                                        17000055
  3288+// If the client cannot connect an escape message will be sent.                                                    17000056
  3289+//                                                                                                                 17000057
  3290+// @param Client                                                                                                   17000058
  3291+// @param Username                                                                                                 17000059
  3292+// @param Password                                                                                                 17000060
  3293+//                                                                                                                 17000061
  3294+///                                                                                                                17000062
  3295+dcl-pr stomp_command_connect extproc(*dclcase);                                                                    17000063
  3296+  conn pointer const;                                                                                              17000064
  3297+  user varchar(100) const options(*nopass);                                                                        17000065
  3298+  pass varchar(100) const options(*nopass);                                                                        17000066
  3299+end-pr;                                                                                                            17000067
  3300+                                                                                                                   17000068
  3301+///                                                                                                                17000069
  3302+// Disconnect from server                                                                                          17000070
  3303+//                                                                                                                 17000071
  3304+// Sends a DISCONNECT frame to the server.                                                                         17000072
  3305+// <br><br>                                                                                                        17000073
  3306+// Any registered extension will be called on frame creation.                                                      17000074
  3307+//                                                                                                                 17000075
  3308+// @param Client                                                                                                   17000076
  3309+///                                                                                                                17000077
  3310+dcl-pr stomp_command_disconnect extproc(*dclcase);                                                                 17000078
  3311+  conn pointer const;                                                                                              17000079
  3312+end-pr;                                                                                                            17000080
  3313+                                                                                                                   17000081
  3314+///                                                                                                                17000082
  3315+// Send message                                                                                                    17000083
  3316+//                                                                                                                 17000084
  3317+// Sends a SEND frame to the server with the passed message to the                                                 17000085
  3318+// passed destination (queue or topic).                                                                            17000086
  3319+// <br><br>                                                                                                        17000087
  3320+// The header <em>content-length</em> will always be added to the                                                  17000088
  3321+// frame.                                                                                                          17000089
  3322+// <br><br>                                                                                                        17000090
  3323+// Any registered extension will be called on frame creation.                                                      17000091
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     65
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3324+// <br><br>                                                                                                        17000092
  3325+// The passed content type will overwrite the general content type setting on                                      17000093
  3326+// this client.                                                                                                    17000094
  3327+//                                                                                                                 17000095
  3328+// @param Client                                                                                                   17000096
  3329+// @param Destination (queue or topic)                                                                             17000097
  3330+// @param Message                                                                                                  17000098
  3331+// @param Message length                                                                                           17000099
  3332+// @param Content Type                                                                                             17000100
  3333+//                                                                                                                 17000101
  3334+// @info If no message length is passed it will be assumed that the message is                                     17000102
  3335+//       null-terminated.                                                                                          17000103
  3336+///                                                                                                                17000104
  3337+dcl-pr stomp_command_send extproc(*dclcase);                                                                       17000105
  3338+  conn pointer const;                                                                                              17000106
  3339+  destination varchar(100) const;                                                                                  17000107
  3340+  messageData pointer const options(*string);                                                                      17000108
  3341+  messageLength uns(10) const options(*omit : *nopass);                                                            17000109
  3342+  contentType varchar(100) const options(*nopass);                                                                 17000110
  3343+end-pr;                                                                                                            17000111
  3344+                                                                                                                   17000112
  3345+///                                                                                                                17000113
  3346+// Subscribe to queue or topic                                                                                     17000114
  3347+//                                                                                                                 17000115
  3348+// Subscribes this client to the passed destination (queue or topic).                                              17000116
  3349+// <br> <br>                                                                                                       17000117
  3350+// Any registered extension will be called on frame creation.                                                      17000118
  3351+//                                                                                                                 17000119
  3352+// @param Client                                                                                                   17000120
  3353+// @param Destination (queue or topic)                                                                             17000121
  3354+///                                                                                                                17000122
  3355+dcl-pr stomp_command_subscribe extproc(*dclcase);                                                                  17000123
  3356+  conn pointer const;                                                                                              17000124
  3357+  destination varchar(100) const;                                                                                  17000125
  3358+end-pr;                                                                                                            17000126
  3359+                                                                                                                   17000127
  3360+///                                                                                                                17000128
  3361+// Unsubscribe from a queue or topic                                                                               17000129
  3362+//                                                                                                                 17000130
  3363+// Sends an UNSUBSCRIBE frame to the server.                                                                       17000131
  3364+// <br><br>                                                                                                        17000132
  3365+// Any registered extension will be called on frame creation.                                                      17000133
  3366+//                                                                                                                 17000134
  3367+// @param Client                                                                                                   17000135
  3368+// @param Destination (queue or topic)                                                                             17000136
  3369+///                                                                                                                17000137
  3370+dcl-pr stomp_command_unsubscribe extproc(*dclcase);                                                                17000138
  3371+  client pointer const;                                                                                            17000139
  3372+  destination varchar(100) const;                                                                                  17000140
  3373+end-pr;                                                                                                            17000141
  3374+                                                                                                                   17000142
  3375+///                                                                                                                17000143
  3376+// Begin transaction                                                                                               17000144
  3377+//                                                                                                                 17000145
  3378+// Begins a transaction by sending a BEGIN frame to the server.                                                    17000146
  3379+// The specified transaction id will be automatically added to any MESSAGE and                                     17000147
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     66
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3380+// ACK frame.                                                                                                      17000148
  3381+// <br><br>                                                                                                        17000149
  3382+// Any registered extension will be called on frame creation.                                                      17000150
  3383+//                                                                                                                 17000151
  3384+// @param Client                                                                                                   17000152
  3385+// @param Transaction Id                                                                                           17000153
  3386+///                                                                                                                17000154
  3387+dcl-pr stomp_command_begin extproc(*dclcase);                                                                      17000155
  3388+  client pointer const;                                                                                            17000156
  3389+  transactionId varchar(100) const;                                                                                17000157
  3390+end-pr;                                                                                                            17000158
  3391+                                                                                                                   17000159
  3392+///                                                                                                                17000160
  3393+// Commit transaction                                                                                              17000161
  3394+//                                                                                                                 17000162
  3395+// Commits a transaction on the server. The transaction has ended. Further                                         17000163
  3396+// MESSAGE frames are not part of a transaction till a new transaction has                                         17000164
  3397+// been started.                                                                                                   17000165
  3398+// <br><br>                                                                                                        17000166
  3399+// Any registered extension will be called on frame creation.                                                      17000167
  3400+//                                                                                                                 17000168
  3401+// @param Client                                                                                                   17000169
  3402+///                                                                                                                17000170
  3403+dcl-pr stomp_command_commit extproc(*dclcase);                                                                     17000171
  3404+  client pointer const;                                                                                            17000172
  3405+end-pr;                                                                                                            17000173
  3406+                                                                                                                   17000174
  3407+///                                                                                                                17000175
  3408+// Abort transaction                                                                                               17000176
  3409+//                                                                                                                 17000177
  3410+// Aborts the transaction on the server. The transaction has ended.                                                17000178
  3411+// <br><br>                                                                                                        17000179
  3412+// Any registered extension will be called on frame creation.                                                      17000180
  3413+//                                                                                                                 17000181
  3414+// @param Client                                                                                                   17000182
  3415+///                                                                                                                17000183
  3416+dcl-pr stomp_command_abort extproc(*dclcase);                                                                      17000184
  3417+  client pointer const;                                                                                            17000185
  3418+end-pr;                                                                                                            17000186
  3419+                                                                                                                   17000187
  3420+///                                                                                                                17000188
  3421+// Acknowledge frame                                                                                               17000189
  3422+//                                                                                                                 17000190
  3423+// Sends an ACK frame to the server based on the passed frame. This must be done                                   17000191
  3424+// if the ack mode is either "client" or "client-individual". In these modes the                                   17000192
  3425+// server will wait for an ACK frame before it removes a message from a queue or                                   17000193
  3426+// topic.                                                                                                          17000194
  3427+// <br><br>                                                                                                        17000195
  3428+// Any registered extension will be called on frame creation.                                                      17000196
  3429+//                                                                                                                 17000197
  3430+// @param Client                                                                                                   17000198
  3431+// @param Frame to be "acknowledged"                                                                               17000199
  3432+//                                                                                                                 17000200
  3433+///                                                                                                                17000201
  3434+dcl-pr stomp_command_ack extproc(*dclcase);                                                                        17000202
  3435+  client pointer const;                                                                                            17000203
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     67
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3436+  frame pointer const;                                                                                             17000204
  3437+end-pr;                                                                                                            17000205
  3438+                                                                                                                   17000206
  3439+///                                                                                                                17000207
  3440+// Not acknowledge frame                                                                                           17000208
  3441+//                                                                                                                 17000209
  3442+// Sends a NACK frame to the server based on the passed frame. This can be used                                    17000210
  3443+// to tell the server that this frame has not been processed and should stay on                                    17000211
  3444+// the server. It is then up to the server how to handle this message (it may                                      17000212
  3445+// pass the message to another client or put it in a backup queue).                                                17000213
  3446+// <br><br>                                                                                                        17000214
  3447+// Any registered extension will be called on frame creation.                                                      17000215
  3448+//                                                                                                                 17000216
  3449+// @param Client                                                                                                   17000217
  3450+// @param Frame to be "not acknowledged"                                                                           17000218
  3451+///                                                                                                                17000219
  3452+dcl-pr stomp_command_nack extproc(*dclcase);                                                                       17000220
  3453+  client pointer const;                                                                                            17000221
  3454+  frame pointer const;                                                                                             17000222
  3455+end-pr;                                                                                                            17000223
  3456+/include 'stompframe.rpginc'                                                                                       15000011
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stompfram+                                                   *                    18
        * External name  . . . . . . :  ../include/stompframe.rpginc                                 *                    18
        * Last change  . . . . . . . :  05/21/21  09:02:59                                           *                    18
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3457+**FREE                                                                                                             18000001
  3458+                                                                                                                   18000002
  3459+/if defined(STOMP_FRAME_H)                                                                                         18000003
            LINES EXCLUDED: 1
  3460+/endif                                                                                                             18000005
  3461+                                                                                                                   18000006
  3462+/define STOMP_FRAME_H                                                                                              18000007
  3463+                                                                                                                   18000008
  3464+///                                                                                                                18000009
  3465+// STOMP : Frame Module                                                                                            18000010
  3466+//                                                                                                                 18000011
  3467+// This module provides procedures for creating and querying a stomp frame.                                        18000012
  3468+// <br><br>                                                                                                        18000013
  3469+// Log entries will be written via the logger <em>rpgnextgen.stomp.frame</em>.                                     18000014
  3470+// There is no appender configured for this logger. Feel free to add log appenders                                 18000015
  3471+// for this logger.                                                                                                18000016
  3472+//                                                                                                                 18000017
  3473+// @author Mihael Schmidt                                                                                          18000018
  3474+// @date   26.07.2017                                                                                              18000019
  3475+// @project STOMP                                                                                                  18000020
  3476+///                                                                                                                18000021
  3477+                                                                                                                   18000022
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     68
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3478+//                          The MIT License (MIT)                                                                  18000023
  3479+//                                                                                                                 18000024
  3480+// Copyright (c) 2017 Mihael Schmidt                                                                               18000025
  3481+//                                                                                                                 18000026
  3482+// Permission is hereby granted, free of charge, to any person obtaining a copy                                    18000027
  3483+// of this software and associated documentation files (the "Software"), to deal                                   18000028
  3484+// in the Software without restriction, including without limitation the rights                                    18000029
  3485+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                       18000030
  3486+// copies of the Software, and to permit persons to whom the Software is                                           18000031
  3487+// furnished to do so, subject to the following conditions:                                                        18000032
  3488+//                                                                                                                 18000033
  3489+// The above copyright notice and this permission notice shall be included in                                      18000034
  3490+// all copies or substantial portions of the Software.                                                             18000035
  3491+//                                                                                                                 18000036
  3492+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                      18000037
  3493+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                        18000038
  3494+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                     18000039
  3495+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                          18000040
  3496+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                   18000041
  3497+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                   18000042
  3498+// SOFTWARE.                                                                                                       18000043
  3499+                                                                                                                   18000044
  3500+                                                                                                                   18000045
  3501+//                                                                                                                 18000046
  3502+// Templates                                                                                                       18000047
  3503+//                                                                                                                 18000048
  3504+dcl-s stomp_frame_header_key varchar(100) template;                                                                18000049
  3505+dcl-s stomp_frame_header_value varchar(1000) template;                                                             18000050
  3506+dcl-s stomp_frame_command varchar(20) template;                                                                    18000051
  3507+dcl-c STOMP_FRAME_HEADER_VALUE_LENGTH 1000;                                                                        18000052
  3508+dcl-c STOMP_FRAME_BODY_LENGTH 65535;                                                                               18000053
  3509+                                                                                                                   18000054
  3510+dcl-ds stomp_frame_header_t qualified template;                                                                    18000055
  3511+  key like(stomp_frame_header_key);                                                                                18000056
  3512+  value like(stomp_frame_header_value);                                                                            18000057
  3513+end-ds;                                                                                                            18000058
  3514+                                                                                                                   18000059
  3515+                                                                                                                   18000060
  3516+/include 'stomputil.rpginc'                                                                                        18000061
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stomputil+                                                   *                    19
        * External name  . . . . . . :  ../include/stomputil.rpginc                                  *                    19
        * Last change  . . . . . . . :  05/21/21  09:33:03                                           *                    19
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3517+**FREE                                                                                                             19000001
  3518+                                                                                                                   19000002
  3519+/if not defined (STOMP_UTIL_H)                                                                                     19000003
  3520+/define STOMP_UTIL_H                                                                                               19000004
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     69
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3521+                                                                                                                   19000005
  3522+//                          The MIT License (MIT)                                                                  19000006
  3523+//                                                                                                                 19000007
  3524+// Copyright (c) 2021 Mihael Schmidt                                                                               19000008
  3525+//                                                                                                                 19000009
  3526+// Permission is hereby granted, free of charge, to any person obtaining a copy                                    19000010
  3527+// of this software and associated documentation files (the "Software"), to deal                                   19000011
  3528+// in the Software without restriction, including without limitation the rights                                    19000012
  3529+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                       19000013
  3530+// copies of the Software, and to permit persons to whom the Software is                                           19000014
  3531+// furnished to do so, subject to the following conditions:                                                        19000015
  3532+//                                                                                                                 19000016
  3533+// The above copyright notice and this permission notice shall be included in                                      19000017
  3534+// all copies or substantial portions of the Software.                                                             19000018
  3535+//                                                                                                                 19000019
  3536+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                      19000020
  3537+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                        19000021
  3538+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                     19000022
  3539+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                          19000023
  3540+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                   19000024
  3541+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                   19000025
  3542+// SOFTWARE.                                                                                                       19000026
  3543+                                                                                                                   19000027
  3544+dcl-ds stomp_util_buffer_t qualified template;                                                                     19000028
  3545+  data pointer;                                                                                                    19000029
  3546+  length uns(10);                                                                                                  19000030
  3547+end-ds;                                                                                                            19000031
  3548+                                                                                                                   19000032
  3549+dcl-pr stomp_util_buffer_dispose extproc(*dclcase);                                                                19000033
  3550+  buffer likeds(stomp_util_buffer_t);                                                                              19000034
  3551+end-pr;                                                                                                            19000035
  3552+                                                                                                                   19000036
  3553+dcl-pr stomp_util_convert likeds(stomp_util_buffer_t) extproc(*dclcase);                                           19000037
  3554+  data pointer const;                                                                                              19000038
  3555+  length uns(10) const;                                                                                            19000039
  3556+  toCcsid int(10) const;                                                                                           19000040
  3557+  fromCcsid int(10) const options(*nopass);                                                                        19000041
  3558+end-pr;                                                                                                            19000042
  3559+                                                                                                                   19000043
  3560+dcl-pr stomp_util_hasBinaryContent ind extproc(*dclcase);                                                          19000044
  3561+  frame pointer const;                                                                                             19000045
  3562+end-pr;                                                                                                            19000046
  3563+                                                                                                                   19000047
  3564+dcl-pr stomp_util_getExplicitCharset varchar(100) extproc(*dclcase);                                               19000048
  3565+  frame pointer const;                                                                                             19000049
  3566+end-pr;                                                                                                            19000050
  3567+                                                                                                                   19000051
  3568+/endif                                                                                                             19000052
  3569+                                                                                                                   18000062
  3570+                                                                                                                   18000063
  3571+//                                                                                                                 18000064
  3572+// Prototypes                                                                                                      18000065
  3573+//                                                                                                                 18000066
  3574+                                                                                                                   18000067
  3575+///                                                                                                                18000068
  3576+// Create stomp frame                                                                                              18000069
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     70
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3577+//                                                                                                                 18000070
  3578+// Creates a stomp frame and if the parameters are passed also initializes it.                                     18000071
  3579+//                                                                                                                 18000072
  3580+// @param Stomp command (optional)                                                                                 18000073
  3581+// @param Frame body text (optional)                                                                               18000074
  3582+//                                                                                                                 18000075
  3583+// @info The resources allocated with this frame must be released by the caller                                    18000076
  3584+//       with the <em>stomp_frame_finalize</em> procedure.                                                         18000077
  3585+///                                                                                                                18000078
  3586+dcl-pr stomp_frame_create pointer extproc(*dclcase);                                                               18000079
  3587+  command like(stomp_frame_command) const options(*nopass);                                                        18000080
  3588+  body varchar(65335) const options(*nopass);                                                                      18000081
  3589+end-pr;                                                                                                            18000082
  3590+                                                                                                                   18000083
  3591+///                                                                                                                18000084
  3592+// Finalize stomp frame                                                                                            18000085
  3593+//                                                                                                                 18000086
  3594+// Releases all resources allocated to the frame.                                                                  18000087
  3595+//                                                                                                                 18000088
  3596+// @param Frame                                                                                                    18000089
  3597+///                                                                                                                18000090
  3598+dcl-pr stomp_frame_finalize extproc(*dclcase);                                                                     18000091
  3599+  frame pointer;                                                                                                   18000092
  3600+end-pr;                                                                                                            18000093
  3601+                                                                                                                   18000094
  3602+///                                                                                                                18000095
  3603+// Set stomp frame header value                                                                                    18000096
  3604+//                                                                                                                 18000097
  3605+// Sets a header (key and value) on the passed stomp frame.                                                        18000098
  3606+//                                                                                                                 18000099
  3607+// @info If this header already exists its value will be appended to the list of                                   18000100
  3608+//       headers. STOMP Spec 1.2 supports multiple headers with the same key.                                      18000101
  3609+//                                                                                                                 18000102
  3610+// @param Frame                                                                                                    18000103
  3611+// @param Key                                                                                                      18000104
  3612+// @param Value                                                                                                    18000105
  3613+///                                                                                                                18000106
  3614+dcl-pr stomp_frame_setHeader extproc(*dclcase);                                                                    18000107
  3615+  frame pointer const;                                                                                             18000108
  3616+  key like(stomp_frame_header_key) const;                                                                          18000109
  3617+  value like(stomp_frame_header_value) const;                                                                      18000110
  3618+end-pr;                                                                                                            18000111
  3619+                                                                                                                   18000112
  3620+///                                                                                                                18000113
  3621+// Get stomp frame header value                                                                                    18000114
  3622+//                                                                                                                 18000115
  3623+// Returns the value from the passed header of the stomp frame.                                                    18000116
  3624+//                                                                                                                 18000117
  3625+// @param Frame                                                                                                    18000118
  3626+// @param Stomp frame header (key)                                                                                 18000119
  3627+//                                                                                                                 18000120
  3628+// @return Value                                                                                                   18000121
  3629+//                                                                                                                 18000122
  3630+// @throws CPF9898 Header not found in stomp frame                                                                 18000123
  3631+///                                                                                                                18000124
  3632+dcl-pr stomp_frame_getHeader like(stomp_frame_header_value) extproc(*dclcase);                                     18000125
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     71
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3633+  frame pointer const;                                                                                             18000126
  3634+  key like(stomp_frame_header_key) const;                                                                          18000127
  3635+end-pr;                                                                                                            18000128
  3636+                                                                                                                   18000129
  3637+///                                                                                                                18000130
  3638+// List stomp frame headers                                                                                        18000131
  3639+//                                                                                                                 18000132
  3640+// Returns a list of stomp frame headers. Each entry of the list is a data                                         18000133
  3641+// structure (stomp_frame_header_t).                                                                               18000134
  3642+//                                                                                                                 18000135
  3643+// @param Frame                                                                                                    18000136
  3644+// @return List with headers                                                                                       18000137
  3645+//                                                                                                                 18000138
  3646+// @info The caller of this procedure must make sure to free the                                                   18000139
  3647+//       allocated resources of the returned list with <em>list_dispose(list)</em>.                                18000140
  3648+///                                                                                                                18000141
  3649+dcl-pr stomp_frame_listHeaders pointer extproc(*dclcase);                                                          18000142
  3650+  frame pointer const;                                                                                             18000143
  3651+end-pr;                                                                                                            18000144
  3652+                                                                                                                   18000145
  3653+///                                                                                                                18000146
  3654+// Remove stomp frame header                                                                                       18000147
  3655+//                                                                                                                 18000148
  3656+// Removes any occurence of the header from the passed stomp frame.                                                18000149
  3657+// <br>                                                                                                            18000150
  3658+// If the header does not exist this procedure does nothing.                                                       18000151
  3659+//                                                                                                                 18000152
  3660+// @param Frame                                                                                                    18000153
  3661+// @param Stomp frame header (key)                                                                                 18000154
  3662+///                                                                                                                18000155
  3663+dcl-pr stomp_frame_removeHeader extproc(*dclcase);                                                                 18000156
  3664+  frame pointer const;                                                                                             18000157
  3665+  key like(stomp_frame_header_key) const;                                                                          18000158
  3666+end-pr;                                                                                                            18000159
  3667+                                                                                                                   18000160
  3668+///                                                                                                                18000161
  3669+// Set command                                                                                                     18000162
  3670+//                                                                                                                 18000163
  3671+// Sets the command in the stomp frame.                                                                            18000164
  3672+//                                                                                                                 18000165
  3673+// @param Frame                                                                                                    18000166
  3674+// @param Command                                                                                                  18000167
  3675+//                                                                                                                 18000168
  3676+// @throws CPF9898 Invalid stomp command                                                                           18000169
  3677+///                                                                                                                18000170
  3678+dcl-pr stomp_frame_setCommand extproc(*dclcase);                                                                   18000171
  3679+  frame pointer const;                                                                                             18000172
  3680+  command like(stomp_frame_command) const;                                                                         18000173
  3681+end-pr;                                                                                                            18000174
  3682+                                                                                                                   18000175
  3683+///                                                                                                                18000176
  3684+// Get command                                                                                                     18000177
  3685+//                                                                                                                 18000178
  3686+// Returns the command of this stomp frame.                                                                        18000179
  3687+//                                                                                                                 18000180
  3688+// @param Frame                                                                                                    18000181
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     72
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3689+//                                                                                                                 18000182
  3690+// @return Command (is *blank if not set yet)                                                                      18000183
  3691+///                                                                                                                18000184
  3692+dcl-pr stomp_frame_getCommand like(stomp_frame_command) extproc(*dclcase);                                         18000185
  3693+  frame pointer const;                                                                                             18000186
  3694+end-pr;                                                                                                            18000187
  3695+                                                                                                                   18000188
  3696+///                                                                                                                18000189
  3697+// Set body/content                                                                                                18000190
  3698+//                                                                                                                 18000191
  3699+// Sets the body/content of this frame.                                                                            18000192
  3700+//                                                                                                                 18000193
  3701+// @param Frame                                                                                                    18000194
  3702+// @param Content                                                                                                  18000195
  3703+// @param Content length                                                                                           18000196
  3704+//                                                                                                                 18000197
  3705+// @info If this frame already contains a content the old content will be                                          18000198
  3706+//       replaced by the new one.                                                                                  18000199
  3707+//                                                                                                                 18000200
  3708+// @info If no content length has been passed then it will be assumed that the                                     18000201
  3709+//       content is null-terminated.                                                                               18000202
  3710+///                                                                                                                18000203
  3711+dcl-pr stomp_frame_setBody extproc(*dclcase);                                                                      18000204
  3712+  frame pointer const;                                                                                             18000205
  3713+  body pointer const options(*string);                                                                             18000206
  3714+  length uns(10) const options(*nopass);                                                                           18000207
  3715+end-pr;                                                                                                            18000208
  3716+                                                                                                                   18000209
  3717+///                                                                                                                18000210
  3718+// Return message body                                                                                             18000211
  3719+//                                                                                                                 18000212
  3720+// Returns a pointer to the body text of this frame.                                                               18000213
  3721+// The string is null-terminated.                                                                                  18000214
  3722+//                                                                                                                 18000215
  3723+// @param Frame                                                                                                    18000216
  3724+//                                                                                                                 18000217
  3725+// @return Buffer containing message body                                                                          18000218
  3726+//                                                                                                                 18000219
  3727+// @warning Don't call <em>stomp_util_buffer_dispose</em> on this buffer.                                          18000220
  3728+//          The resources from this buffer will automatically be freed when                                        18000221
  3729+//          disposing the frame.                                                                                   18000222
  3730+///                                                                                                                18000223
  3731+dcl-pr stomp_frame_getBody likeds(stomp_util_buffer_t) extproc(*dclcase);                                          18000224
  3732+  frame pointer const;                                                                                             18000225
  3733+end-pr;                                                                                                            18000226
  3734+                                                                                                                   18000227
  3735+                                                                                                                   18000228
  3736+///                                                                                                                18000229
  3737+// Serialize frame                                                                                                 18000230
  3738+//                                                                                                                 18000231
  3739+// Returns the frame in a serialized format which adheres to the STOMP Spec 1.2.                                   18000232
  3740+//                                                                                                                 18000233
  3741+// @param Frame                                                                                                    18000234
  3742+// @return Serialized content (stomp_util_buffer_t)                                                                18000235
  3743+//                                                                                                                 18000236
  3744+// @info The resources of the returned value must be freed by the caller by                                        18000237
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     73
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3745+//       calling <em>stomp_util_buffer_dispose</em>.                                                               18000238
  3746+//                                                                                                                 18000239
  3747+// @throws CPF9898 Stomp frame is not valid                                                                        18000240
  3748+///                                                                                                                18000241
  3749+dcl-pr stomp_frame_serialize likeds(stomp_util_buffer_t) extproc(*dclcase);                                        18000242
  3750+  frame pointer const;                                                                                             18000243
  3751+end-pr;                                                                                                            18000244
  3752+                                                                                                                   18000245
  3753+                                                                                                                   18000246
  3754+///                                                                                                                18000247
  3755+// Check if frame contains header                                                                                  18000248
  3756+//                                                                                                                 18000249
  3757+// Checks if the frame contains the header.                                                                        18000250
  3758+//                                                                                                                 18000251
  3759+// @param Frame                                                                                                    18000252
  3760+// @param Header (key)                                                                                             18000253
  3761+//                                                                                                                 18000254
  3762+// @return *on = frame contains header otherwise *off                                                              18000255
  3763+///                                                                                                                18000256
  3764+dcl-pr stomp_frame_containsHeader ind extproc(*dclcase);                                                           18000257
  3765+  frame pointer const;                                                                                             18000258
  3766+  key like(stomp_frame_header_key) const;                                                                          18000259
  3767+end-pr;                                                                                                            18000260
  3768+                                                                                                                   18000261
  3769+///                                                                                                                18000262
  3770+// Dump frame to job log                                                                                           18000263
  3771+//                                                                                                                 18000264
  3772+// Writes the frame in a serialized format (see stomp_frame_toString) to the                                       18000265
  3773+// job log.                                                                                                        18000266
  3774+//                                                                                                                 18000267
  3775+// @param Frame                                                                                                    18000268
  3776+///                                                                                                                18000269
  3777+dcl-pr stomp_frame_dump extproc(*dclcase);                                                                         18000270
  3778+  frame pointer const;                                                                                             18000271
  3779+end-pr;                                                                                                            18000272
  3780+                                                                                                                   18000273
  3781+///                                                                                                                18000274
  3782+// Get frame body as string                                                                                        18000275
  3783+//                                                                                                                 18000276
  3784+// Returns the body of the frame as a string in the job ccsid.                                                     18000277
  3785+//                                                                                                                 18000278
  3786+// @param Frame                                                                                                    18000279
  3787+// @return Frame body                                                                                              18000280
  3788+///                                                                                                                18000281
  3789+dcl-pr stomp_frame_toString varchar(1000000) rtnparm extproc(*dclcase);                                            18000282
  3790+  frame pointer const;                                                                                             18000283
  3791+end-pr;                                                                                                            18000284
  3792+/include 'stompext.rpginc'                                                                                         15000012
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stompext.+                                                   *                    20
        * External name  . . . . . . :  ../include/stompext.rpginc                                   *                    20
        * Last change  . . . . . . . :  05/23/21  07:58:50                                           *                    20
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     74
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3793+**FREE                                                                                                             20000001
  3794+                                                                                                                   20000002
  3795+/if not defined (STOMP_EXT)                                                                                        20000003
  3796+/define STOMP_EXT                                                                                                  20000004
  3797+                                                                                                                   20000005
  3798+///                                                                                                                20000006
  3799+// STOMP : Extension Proxy                                                                                         20000007
  3800+//                                                                                                                 20000008
  3801+// @author Mihael Schmidt                                                                                          20000009
  3802+// @date   26.07.2017                                                                                              20000010
  3803+// @project STOMP                                                                                                  20000011
  3804+///                                                                                                                20000012
  3805+                                                                                                                   20000013
  3806+//                          The MIT License (MIT)                                                                  20000014
  3807+//                                                                                                                 20000015
  3808+// Copyright (c) 2021 Mihael Schmidt                                                                               20000016
  3809+//                                                                                                                 20000017
  3810+// Permission is hereby granted, free of charge, to any person obtaining a copy                                    20000018
  3811+// of this software and associated documentation files (the "Software"), to deal                                   20000019
  3812+// in the Software without restriction, including without limitation the rights                                    20000020
  3813+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                       20000021
  3814+// copies of the Software, and to permit persons to whom the Software is                                           20000022
  3815+// furnished to do so, subject to the following conditions:                                                        20000023
  3816+//                                                                                                                 20000024
  3817+// The above copyright notice and this permission notice shall be included in                                      20000025
  3818+// all copies or substantial portions of the Software.                                                             20000026
  3819+//                                                                                                                 20000027
  3820+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                      20000028
  3821+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                        20000029
  3822+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                     20000030
  3823+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                          20000031
  3824+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                   20000032
  3825+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                   20000033
  3826+// SOFTWARE.                                                                                                       20000034
  3827+                                                                                                                   20000035
  3828+                                                                                                                   20000036
  3829+///                                                                                                                20000037
  3830+// Interface Template                                                                                              20000038
  3831+///                                                                                                                20000039
  3832+dcl-ds stomp_ext_t qualified template align;                                                                       20000040
  3833+  id char(50);                                                                                                     20000041
  3834+  userdata pointer;                                                                                                20000042
  3835+  proc_connect pointer(*proc);                                                                                     20000043
  3836+  proc_disconnect pointer(*proc);                                                                                  20000044
  3837+  proc_send pointer(*proc);                                                                                        20000045
  3838+  proc_begin pointer(*proc);                                                                                       20000046
  3839+  proc_commit pointer(*proc);                                                                                      20000047
  3840+  proc_abort pointer(*proc);                                                                                       20000048
  3841+  proc_subscribe pointer(*proc);                                                                                   20000049
  3842+  proc_unsubscribe pointer(*proc);                                                                                 20000050
  3843+  proc_ack pointer(*proc);                                                                                         20000051
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     75
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3844+  proc_nack pointer(*proc);                                                                                        20000052
  3845+  proc_finalize pointer(*proc);                                                                                    20000053
  3846+end-ds;                                                                                                            20000054
  3847+                                                                                                                   20000055
  3848+                                                                                                                   20000056
  3849+//                                                                                                                 20000057
  3850+// Prototypes                                                                                                      20000058
  3851+//                                                                                                                 20000059
  3852+dcl-pr stomp_ext_getId varchar(50) extproc('stomp_ext_getId');                                                     20000060
  3853+  extension pointer const;                                                                                         20000061
  3854+end-pr;                                                                                                            20000062
  3855+                                                                                                                   20000063
  3856+dcl-pr stomp_ext_connect extproc('stomp_ext_connect');                                                             20000064
  3857+  extension pointer const;                                                                                         20000065
  3858+  client pointer const;                                                                                            20000066
  3859+  frame pointer const;                                                                                             20000067
  3860+  user varchar(100) const options(*nopass);                                                                        20000068
  3861+  pass varchar(100) const options(*nopass);                                                                        20000069
  3862+end-pr;                                                                                                            20000070
  3863+                                                                                                                   20000071
  3864+dcl-pr stomp_ext_send extproc('stomp_ext_send');                                                                   20000072
  3865+  extension pointer const;                                                                                         20000073
  3866+  client pointer const;                                                                                            20000074
  3867+  frame pointer const;                                                                                             20000075
  3868+  destination varchar(100) const;                                                                                  20000076
  3869+  messageData pointer const options(*string);                                                                      20000077
  3870+  messageLength uns(10) const options(*omit : *nopass);                                                            20000078
  3871+  contentType varchar(100) const options(*nopass);                                                                 20000079
  3872+end-pr;                                                                                                            20000080
  3873+                                                                                                                   20000081
  3874+dcl-pr stomp_ext_disconnect extproc('stomp_ext_disconnect');                                                       20000082
  3875+  extension pointer const;                                                                                         20000083
  3876+  client pointer const;                                                                                            20000084
  3877+  frame pointer const;                                                                                             20000085
  3878+end-pr;                                                                                                            20000086
  3879+                                                                                                                   20000087
  3880+dcl-pr stomp_ext_subscribe extproc('stomp_ext_subscribe');                                                         20000088
  3881+  extension pointer const;                                                                                         20000089
  3882+  client pointer const;                                                                                            20000090
  3883+  frame pointer const;                                                                                             20000091
  3884+  destination varchar(100) const;                                                                                  20000092
  3885+end-pr;                                                                                                            20000093
  3886+                                                                                                                   20000094
  3887+dcl-pr stomp_ext_unsubscribe extproc('stomp_ext_unsubscribe');                                                     20000095
  3888+  extension pointer const;                                                                                         20000096
  3889+  client pointer const;                                                                                            20000097
  3890+  frame pointer const;                                                                                             20000098
  3891+  destination varchar(100) const;                                                                                  20000099
  3892+end-pr;                                                                                                            20000100
  3893+                                                                                                                   20000101
  3894+dcl-pr stomp_ext_begin extproc(*dclcase);                                                                          20000102
  3895+  extension pointer const;                                                                                         20000103
  3896+  client pointer const;                                                                                            20000104
  3897+  frame pointer const;                                                                                             20000105
  3898+  transactionId varchar(100) const;                                                                                20000106
  3899+end-pr;                                                                                                            20000107
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     76
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3900+                                                                                                                   20000108
  3901+dcl-pr stomp_ext_commit extproc(*dclcase);                                                                         20000109
  3902+  extension pointer const;                                                                                         20000110
  3903+  client pointer const;                                                                                            20000111
  3904+  frame pointer const;                                                                                             20000112
  3905+end-pr;                                                                                                            20000113
  3906+                                                                                                                   20000114
  3907+dcl-pr stomp_ext_abort extproc(*dclcase);                                                                          20000115
  3908+  extension pointer const;                                                                                         20000116
  3909+  client pointer const;                                                                                            20000117
  3910+  frame pointer const;                                                                                             20000118
  3911+end-pr;                                                                                                            20000119
  3912+                                                                                                                   20000120
  3913+dcl-pr stomp_ext_ack extproc(*dclcase);                                                                            20000121
  3914+  extension pointer const;                                                                                         20000122
  3915+  client pointer const;                                                                                            20000123
  3916+  frame pointer const;                                                                                             20000124
  3917+  ackFrame pointer const;                                                                                          20000125
  3918+end-pr;                                                                                                            20000126
  3919+                                                                                                                   20000127
  3920+dcl-pr stomp_ext_nack extproc(*dclcase);                                                                           20000128
  3921+  extension pointer const;                                                                                         20000129
  3922+  client pointer const;                                                                                            20000130
  3923+  frame pointer const;                                                                                             20000131
  3924+  nackFrame pointer const;                                                                                         20000132
  3925+end-pr;                                                                                                            20000133
  3926+                                                                                                                   20000134
  3927+dcl-pr stomp_ext_finalize extproc('stomp_ext_finalize');                                                           20000135
  3928+  extension pointer;                                                                                               20000136
  3929+end-pr;                                                                                                            20000137
  3930+                                                                                                                   20000138
  3931+/endif                                                                                                             20000139
  3932+/include 'stompparser.rpginc'                                                                                      15000013
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stomppars+                                                   *                    21
        * External name  . . . . . . :  ../include/stompparser.rpginc                                *                    21
        * Last change  . . . . . . . :  05/20/21  12:08:40                                           *                    21
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3933+**FREE                                                                                                             21000001
  3934+                                                                                                                   21000002
  3935+/if not defined(STOMP_FRAME_PARSER_H)                                                                              21000003
  3936+/define STOMP_FRAME_PARSER_H                                                                                       21000004
  3937+                                                                                                                   21000005
  3938+//                          The MIT License (MIT)                                                                  21000006
  3939+//                                                                                                                 21000007
  3940+// Copyright (c) 2021 Mihael Schmidt                                                                               21000008
  3941+//                                                                                                                 21000009
  3942+// Permission is hereby granted, free of charge, to any person obtaining a copy                                    21000010
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     77
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3943+// of this software and associated documentation files (the "Software"), to deal                                   21000011
  3944+// in the Software without restriction, including without limitation the rights                                    21000012
  3945+// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                       21000013
  3946+// copies of the Software, and to permit persons to whom the Software is                                           21000014
  3947+// furnished to do so, subject to the following conditions:                                                        21000015
  3948+//                                                                                                                 21000016
  3949+// The above copyright notice and this permission notice shall be included in                                      21000017
  3950+// all copies or substantial portions of the Software.                                                             21000018
  3951+//                                                                                                                 21000019
  3952+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                      21000020
  3953+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                        21000021
  3954+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                     21000022
  3955+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                          21000023
  3956+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                   21000024
  3957+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE                                   21000025
  3958+// SOFTWARE.                                                                                                       21000026
  3959+                                                                                                                   21000027
  3960+///                                                                                                                21000028
  3961+// Parse frame                                                                                                     21000029
  3962+//                                                                                                                 21000030
  3963+// Parses the content starting from the passed pointer to the first null byte.                                     21000031
  3964+//                                                                                                                 21000032
  3965+// @param Data (null-terminated)                                                                                   21000033
  3966+//                                                                                                                 21000034
  3967+// @return Pointer to a frame or *null if there was a problem parsing the data                                     21000035
  3968+//                                                                                                                 21000036
  3969+// @throws CPF9898 Invalid stomp command                                                                           21000037
  3970+///                                                                                                                21000038
  3971+dcl-pr stomp_parser_parse pointer extproc(*dclcase);                                                               21000039
  3972+  data pointer const;                                                                                              21000040
  3973+  length uns(10) const;                                                                                            21000041
  3974+end-pr;                                                                                                            21000042
  3975+                                                                                                                   21000043
  3976+/endif                                                                                                             21000044
  3977+/include 'stomputil.rpginc'                                                                                        15000014
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stomputil+                                                   *                    22
        * External name  . . . . . . :  ../include/stomputil.rpginc                                  *                    22
        * Last change  . . . . . . . :  05/21/21  09:33:03                                           *                    22
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3978+**FREE                                                                                                             22000001
  3979+                                                                                                                   22000002
  3980+/if not defined (STOMP_UTIL_H)                                                                                     22000003
            LINES EXCLUDED: 48
  3981+/endif                                                                                                             22000052
  3982 /include 'stompext.rpginc'                                                                                           000051
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     78
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stompext.+                                                   *                    23
        * External name  . . . . . . :  ../include/stompext.rpginc                                   *                    23
        * Last change  . . . . . . . :  05/23/21  07:58:50                                           *                    23
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3983+**FREE                                                                                                             23000001
  3984+                                                                                                                   23000002
  3985+/if not defined (STOMP_EXT)                                                                                        23000003
            LINES EXCLUDED: 135
  3986+/endif                                                                                                             23000139
  3987 /include 'stompframe.rpginc'                                                                                         000052
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stompfram+                                                   *                    24
        * External name  . . . . . . :  ../include/stompframe.rpginc                                 *                    24
        * Last change  . . . . . . . :  05/21/21  09:02:59                                           *                    24
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3988+**FREE                                                                                                             24000001
  3989+                                                                                                                   24000002
  3990+/if defined(STOMP_FRAME_H)                                                                                         24000003
  3991+/eof                                                                                                               24000004
  3992 /include 'stomplog.rpginc'                                                                                           000053
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stomplog.+                                                   *                    25
        * External name  . . . . . . :  ../include/stomplog.rpginc                                   *                    25
        * Last change  . . . . . . . :  05/20/21  19:00:50                                           *                    25
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  3993+**FREE                                                                                                             25000001
  3994+                                                                                                                   25000002
  3995+/if defined (STOMP_LOG)                                                                                            25000003
            LINES EXCLUDED: 1
  3996+/endif                                                                                                             25000005
  3997+                                                                                                                   25000006
  3998+/define STOMP_LOG                                                                                                  25000007
  3999+                                                                                                                   25000008
  4000+dcl-pr stomp_log_create pointer extproc(*dclcase);                                                                 25000009
  4001+  name varchar(100) const;                                                                                         25000010
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     79
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4002+end-pr;                                                                                                            25000011
  4003+                                                                                                                   25000012
  4004+dcl-pr stomp_log_dispose extproc(*dclcase);                                                                        25000013
  4005+  logger pointer;                                                                                                  25000014
  4006+end-pr;                                                                                                            25000015
  4007+                                                                                                                   25000016
  4008+dcl-pr stomp_log extproc(*dclcase);                                                                                25000017
  4009+  logger pointer const;                                                                                            25000018
  4010+  message varchar(1000) const;                                                                                     25000019
  4011+end-pr;                                                                                                            25000020
  4012 /include 'stompparser.rpginc'                                                                                        000054
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stomppars+                                                   *                    26
        * External name  . . . . . . :  ../include/stompparser.rpginc                                *                    26
        * Last change  . . . . . . . :  05/20/21  12:08:40                                           *                    26
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4013+**FREE                                                                                                             26000001
  4014+                                                                                                                   26000002
  4015+/if not defined(STOMP_FRAME_PARSER_H)                                                                              26000003
            LINES EXCLUDED: 40
  4016+/endif                                                                                                             26000044
  4017 /include 'stomputil.rpginc'                                                                                          000055
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  stomputil+                                                   *                    27
        * External name  . . . . . . :  ../include/stomputil.rpginc                                  *                    27
        * Last change  . . . . . . . :  05/21/21  09:33:03                                           *                    27
        *--------------------------------------------------------------------------------------------*
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4018+**FREE                                                                                                             27000001
  4019+                                                                                                                   27000002
  4020+/if not defined (STOMP_UTIL_H)                                                                                     27000003
            LINES EXCLUDED: 48
  4021+/endif                                                                                                             27000052
  4022                                                                                                                      000056
  4023                                                                                                                      000057
  4024 //                                                                                                                   000058
  4025 // Templates                                                                                                         000059
  4026 //                                                                                                                   000060
  4027 dcl-ds stomp_header_t qualified template;                                                                            000061
  4028   socket int(10);                                                                                                    000062
  4029   host char(255);                                                                                                    000063
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     80
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4030   port int(10);                                                                                                      000064
  4031   connected ind;                                                                                                     000065
  4032   options pointer;                                                                                                   000066
  4033   sessionId char(100);                                                                                               000067
  4034   extension pointer;                                                                                                 000068
  4035   useReceipts ind;                                                                                                   000069
  4036   receiptId uns(20);                                                                                                 000070
  4037   openReceipts pointer;                                                                                              000071
  4038   bufferedFrames pointer;                                                                                            000072
  4039   transactionId varchar(100);                                                                                        000073
  4040   heartbeatServer uns(10);                                                                                           000074
  4041   heartbeatClient uns(10);                                                                                           000075
  4042 end-ds;                                                                                                              000076
  4043                                                                                                                      000077
  4044                                                                                                                      000078
  4045 //                                                                                                                   000079
  4046 // Global Variables                                                                                                  000080
  4047 //                                                                                                                   000081
  4048 dcl-s logger pointer;                                                                                                000082
  4049                                                                                                                      000083
  4050                                                                                                                      000084
  4051 //                                                                                                                   000085
  4052 // Procedures                                                                                                        000086
  4053 //                                                                                                                   000087
  4054 dcl-proc stomp_init export;                                                                                          000088
  4055   dcl-pi *n int(10) end-pi;                                                                                          000089
  4056                                                                                                                      000090
  4057   dcl-ds errorCode likeds(qusec_t) inz;                                                                              000091
  4058                                                                                                                      000092
  4059   logger = stomp_log_create('stomp');                                                                                000093
  4060                                                                                                                      000094
  4061   cee4rage2(%paddr(stomp_exitHandler) : errorCode);                                                                  000095
  4062                                                                                                                      000096
  4063   return 0;                                                                                                          000097
  4064 end-proc;                                                                                                            000098
  4065                                                                                                                      000099
  4066                                                                                                                      000100
  4067 dcl-proc stomp_exitHandler;                                                                                          000101
  4068   dcl-pi *n;                                                                                                         000102
  4069     activationGroupMark uns(20);                                                                                     000103
  4070     reason uns(10);                                                                                                  000104
  4071     resultCode uns(10);                                                                                              000105
  4072     userResultCode uns(10);                                                                                          000106
  4073   end-pi;                                                                                                            000107
  4074                                                                                                                      000108
  4075   stomp_log_dispose(logger);                                                                                         000109
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     81
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4076 end-proc;                                                                                                            000110
  4077                                                                                                                      000111
  4078                                                                                                                      000112
  4079 dcl-proc stomp_create export;                                                                                        000113
  4080   dcl-pi *N pointer;                                                                                                 000114
  4081     host varchar(255) const;                                                                                         000115
  4082     port int(10) const;                                                                                              000116
  4083   end-pi;                                                                                                            000117
  4084                                                                                                                      000118
  4085   dcl-ds header likeds(stomp_header_t) based(ptr);                                                                   000119
  4086   dcl-s flags int(10);                                                                                               000120
  4087   dcl-s c_err int(10) based(errPtr);                                                                                 000121
  4088                                                                                                                      000122
  4089   ptr = %alloc(%size(stomp_header_t));                                                                               000123
  4090                                                                                                                      000124
  4091   clear header;                                                                                                      000125
  4092   header.host = host;                                                                                                000126
  4093   header.port = port;                                                                                                000127
  4094   header.connected = *off;                                                                                           000128
  4095   header.extension = *null;                                                                                          000129
  4096   header.useReceipts = *off;                                                                                         000130
  4097   header.options = tree_rb_create(%paddr('tree_rb_int_compare'));                                                    000131
  4098   header.openReceipts = list_create();                                                                               000132
  4099   header.bufferedFrames = list_create();                                                                             000133
  4100                                                                                                                      000134
  4101   header.socket = socket(AF_INET : SOCK_STREAM : PROTOCOL_DEFAULT);                                                  000135
  4102   if (header.socket = -1);                                                                           B01             000136
  4103     errPtr = errno();                                                                                 01             000137
  4104     message_escape('Could not create socket. ' + %char(c_err) + ': ' + %str(strerror(c_err)));        01             000138
  4105   endif;                                                                                             E01             000139
  4106                                                                                                                      000140
  4107   stomp_log(logger : 'STOMP client created');                                                                        000141
  4108                                                                                                                      000142
  4109   return ptr;                                                                                                        000143
  4110 end-proc;                                                                                                            000144
  4111                                                                                                                      000145
  4112                                                                                                                      000146
  4113 dcl-proc stomp_open export;                                                                                          000147
  4114   dcl-pi *N;                                                                                                         000148
  4115     conn pointer const;                                                                                              000149
  4116   end-pi;                                                                                                            000150
  4117                                                                                                                      000151
  4118   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000152
  4119   dcl-ds socket_address_inet likeds(socket_address_inet_t);                                                          000153
  4120   dcl-s c_err int(10) based(errPtr);                                                                                 000154
  4121   dcl-ds node likeds(tree_node_int_t) based(nodePtr);                                                                000155
  4122   dcl-ds timeout likeds(timeout_t) based(node.value);                                                                000156
  4123                                                                                                                      000157
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     82
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4124   clear socket_address_inet;                                                                                         000158
  4125   socket_address_inet.family = AF_INET;                                                                              000159
  4126   socket_address_inet.addr = inet_addr(%trim(header.host));                                                          000160
  4127   socket_address_inet.port = header.port;                                                                            000161
  4128   socket_address_inet.zero = *allx'00';                                                                              000162
  4129                                                                                                                      000163
  4130   if (connect(header.socket : %addr(socket_address_inet) : %size(socket_address_inet)) = -1);        B01             000164
  4131     errPtr = errno();                                                                                 01             000165
  4132     message_escape('Could not open socket connection. ' + %char(c_err) + ': ' + %str(strerror(c_err)  01             000166
 ...   ));
  4133   endif;                                                                                             E01             000167
  4134                                                                                                                      000168
  4135   // set timeout                                                                                                     000169
  4136   if (tree_rb_int_containsKey(header.options : STOMP_OPTION_TIMEOUT));                               B01             000170
  4137     nodePtr = tree_rb_int_get(header.options : STOMP_OPTION_TIMEOUT);                                 01             000171
  4138                                                                                                                      000172
  4139     if (setsockopt(header.socket : SOL_SOCKET: SO_RCVTIMEO : %addr(timeout) : %size(timeout)) = -1); B02             000173
  4140       errPtr = errno();                                                                               02             000174
  4141       message_escape('Could not set socket timeout. ' + %char(c_err) + ': ' + %str(strerror(c_err)))  02             000175
 ...   ;
  4142     endif;                                                                                           E02             000176
  4143   endif;                                                                                             E01             000177
  4144                                                                                                                      000178
  4145   header.connected = *on;                                                                                            000179
  4146                                                                                                                      000180
  4147   stomp_log(logger : 'socket connection established to ' + %trimr(header.host) + ':' + %char(header.                 000181
 ...   port));
  4148 end-proc;                                                                                                            000182
  4149                                                                                                                      000183
  4150                                                                                                                      000184
  4151 dcl-proc stomp_close export;                                                                                         000185
  4152   dcl-pi *N;                                                                                                         000186
  4153     conn pointer const;                                                                                              000187
  4154   end-pi;                                                                                                            000188
  4155                                                                                                                      000189
  4156   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000190
  4157                                                                                                                      000191
  4158   if (header.connected);                                                                             B01             000192
  4159     callp close(header.socket);                                                                       01             000193
  4160     header.connected = *off;                                                                          01             000194
  4161   endif;                                                                                             E01             000195
  4162                                                                                                                      000196
  4163   stomp_log(logger : 'socket connection closed');                                                                    000197
  4164 end-proc;                                                                                                            000198
  4165                                                                                                                      000199
  4166                                                                                                                      000200
  4167 dcl-proc stomp_finalize export;                                                                                      000201
  4168   dcl-pi *N;                                                                                                         000202
  4169     conn pointer;                                                                                                    000203
  4170   end-pi;                                                                                                            000204
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     83
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4171                                                                                                                      000205
  4172   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000206
  4173                                                                                                                      000207
  4174   if (header.connected);                                                                             B01             000208
  4175     // close socket                                                                                                  000209
  4176     stomp_close(conn);                                                                                01             000210
  4177   endif;                                                                                             E01             000211
  4178                                                                                                                      000212
  4179   tree_rb_int_finalize(header.options);                                                                              000213
  4180                                                                                                                      000214
  4181   if (header.extension <> *null);                                                                    B01             000215
  4182     stomp_ext_finalize(header.extension);                                                             01             000216
  4183   endif;                                                                                             E01             000217
  4184                                                                                                                      000218
  4185   list_dispose(header.openReceipts);                                                                                 000219
  4186   list_dispose(header.bufferedFrames);                                                                               000220
  4187                                                                                                                      000221
  4188   stomp_log(logger : 'STOMP client disposed');                                                                       000222
  4189                                                                                                                      000223
  4190   dealloc(n) conn;                                                                                                   000224
  4191 end-proc;                                                                                                            000225
  4192                                                                                                                      000226
  4193                                                                                                                      000227
  4194 dcl-proc stomp_setTimeout export;                                                                                    000228
  4195   dcl-pi *N;                                                                                                         000229
  4196     conn pointer const;                                                                                              000230
  4197     mseconds int(10) const;                                                                                          000231
  4198   end-pi;                                                                                                            000232
  4199                                                                                                                      000233
  4200   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000234
  4201   dcl-ds timeout likeds(timeout_t);                                                                                  000235
  4202                                                                                                                      000236
  4203   timeout.seconds = mseconds / 1000;                                                                                 000237
  4204   timeout.useconds = %rem(mseconds : 1000) * 1000;                                                                   000238
  4205   tree_rb_int_put(header.options : STOMP_OPTION_TIMEOUT : %addr(timeout) : %size(timeout));                          000239
  4206   stomp_log(logger : 'set timeout: ' + %char(mseconds) + 'ms');                                                      000240
  4207 end-proc;                                                                                                            000241
  4208                                                                                                                      000242
  4209                                                                                                                      000243
  4210 dcl-proc stomp_setVirtualHost export;                                                                                000244
  4211   dcl-pi *N;                                                                                                         000245
  4212     conn pointer const;                                                                                              000246
  4213     pVirtualHost varchar(100) const;                                                                                 000247
  4214   end-pi;                                                                                                            000248
  4215                                                                                                                      000249
  4216   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000250
  4217   dcl-s virtualHost varchar(100);                                                                                    000251
  4218                                                                                                                      000252
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     84
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4219   virtualHost = pVirtualHost;                                                                                        000253
  4220   tree_rb_int_put(header.options : STOMP_OPTION_VIRTUAL_HOST :                                                       000254
  4221                   %addr(virtualHost : *DATA) : %len(virtualHost));                                                   000255
  4222   stomp_log(logger : 'set virtual host: ' + pVirtualHost);                                                           000256
  4223 end-proc;                                                                                                            000257
  4224                                                                                                                      000258
  4225                                                                                                                      000259
  4226 dcl-proc stomp_setClientId export;                                                                                   000260
  4227   dcl-pi *N;                                                                                                         000261
  4228     conn pointer const;                                                                                              000262
  4229     pClientId varchar(100) const;                                                                                    000263
  4230   end-pi;                                                                                                            000264
  4231                                                                                                                      000265
  4232   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000266
  4233   dcl-s clientId varchar(100);                                                                                       000267
  4234                                                                                                                      000268
  4235   clientId = pClientId;                                                                                              000269
  4236   tree_rb_int_put(header.options : STOMP_OPTION_CLIENT_ID :                                                          000270
  4237                   %addr(clientId : *DATA) : %len(clientId));                                                         000271
  4238   stomp_log(logger : 'set client id: ' + pClientId);                                                                 000272
  4239 end-proc;                                                                                                            000273
  4240                                                                                                                      000274
  4241                                                                                                                      000275
  4242 dcl-proc stomp_setContentType export;                                                                                000276
  4243   dcl-pi *N;                                                                                                         000277
  4244     conn pointer const;                                                                                              000278
  4245     pContentType varchar(100) const;                                                                                 000279
  4246   end-pi;                                                                                                            000280
  4247                                                                                                                      000281
  4248   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000282
  4249   dcl-s contentType varchar(100);                                                                                    000283
  4250                                                                                                                      000284
  4251   contentType = pContentType;                                                                                        000285
  4252   tree_rb_int_put(header.options : STOMP_OPTION_CONTENT_TYPE :                                                       000286
  4253                   %addr(contentType : *DATA) : %len(contentType));                                                   000287
  4254   stomp_log(logger : 'set content type: ' + contentType);                                                            000288
  4255 end-proc;                                                                                                            000289
  4256                                                                                                                      000290
  4257                                                                                                                      000291
  4258 dcl-proc stomp_setAckMode export;                                                                                    000292
  4259   dcl-pi *N;                                                                                                         000293
  4260     conn pointer const;                                                                                              000294
  4261     pMode varchar(100) const;                                                                                        000295
  4262   end-pi;                                                                                                            000296
  4263                                                                                                                      000297
  4264   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000298
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     85
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4265   dcl-s mode varchar(100);                                                                                           000299
  4266                                                                                                                      000300
  4267   mode = pMode;                                                                                                      000301
  4268   tree_rb_int_put(header.options : STOMP_OPTION_ACK : %addr(mode : *data) : %len(mode));                             000302
  4269   stomp_log(logger : 'set ack mode: ' + pMode);                                                                      000303
  4270 end-proc;                                                                                                            000304
  4271                                                                                                                      000305
  4272                                                                                                                      000306
  4273 dcl-proc stomp_setDurableSubscriberName export;                                                                      000307
  4274   dcl-pi *N;                                                                                                         000308
  4275     conn pointer const;                                                                                              000309
  4276     pName varchar(100) const;                                                                                        000310
  4277   end-pi;                                                                                                            000311
  4278                                                                                                                      000312
  4279   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000313
  4280   dcl-s name varchar(100);                                                                                           000314
  4281                                                                                                                      000315
  4282   name = pName;                                                                                                      000316
  4283   tree_rb_int_put(header.options : STOMP_OPTION_DURABLE_SUBSCRIBER :                                                 000317
  4284                   %addr(name : *DATA) : %len(name));                                                                 000318
  4285   stomp_log(logger : 'set durable subscriber: ' + pName);                                                            000319
  4286 end-proc;                                                                                                            000320
  4287                                                                                                                      000321
  4288                                                                                                                      000322
  4289 dcl-proc stomp_getSessionId export;                                                                                  000323
  4290   dcl-pi *N like(stomp_sessionid_t);                                                                                 000324
  4291     conn pointer const;                                                                                              000325
  4292   end-pi;                                                                                                            000326
  4293                                                                                                                      000327
  4294   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000328
  4295                                                                                                                      000329
  4296   return header.sessionId;                                                                                           000330
  4297 end-proc;                                                                                                            000331
  4298                                                                                                                      000332
  4299                                                                                                                      000333
  4300 dcl-proc stomp_setPersistMessages export;                                                                            000334
  4301   dcl-pi *N;                                                                                                         000335
  4302     conn pointer const;                                                                                              000336
  4303     persistent ind const;                                                                                            000337
  4304   end-pi;                                                                                                            000338
  4305                                                                                                                      000339
  4306   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000340
  4307   dcl-s value varchar(6);                                                                                            000341
  4308                                                                                                                      000342
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     86
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4309   if (persistent);                                                                                   B01             000343
  4310     value = 'true';                                                                                   01             000344
  4311   else;                                                                                              X01             000345
  4312     value = 'false';                                                                                  01             000346
  4313   endif;                                                                                             E01             000347
  4314                                                                                                                      000348
  4315   tree_rb_int_put(header.options : STOMP_OPTION_PERSISTENT : %addr(value : *DATA) : %len(value));                    000349
  4316   stomp_log(logger : 'set persist messages: ' + value);                                                              000350
  4317 end-proc;                                                                                                            000351
  4318                                                                                                                      000352
  4319 dcl-proc stomp_sendFrame export;                                                                                     000353
  4320   dcl-pi *N;                                                                                                         000354
  4321     conn pointer const;                                                                                              000355
  4322     frame pointer const;                                                                                             000356
  4323   end-pi;                                                                                                            000357
  4324                                                                                                                      000358
  4325   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000359
  4326   dcl-ds buffer likeds(stomp_util_buffer_t);                                                                         000360
  4327   dcl-s rc int(10);                                                                                                  000361
  4328   dcl-s receiptId like(stomp_receiptid_t);                                                                           000362
  4329                                                                                                                      000363
  4330   stomp_log(logger : 'sending ' + stomp_frame_getCommand(frame) + ' frame');                                         000364
  4331                                                                                                                      000365
  4332   // all frames (except the CONNECT frame) might get a receipt header                                                000366
  4333   if (stomp_frame_getCommand(frame) <> 'CONNECT' and                                                 B01             000367
  4334       stomp_isUsingReceipts(conn));                                                                  B01             000368
  4335     receiptId = nextReceiptId(conn);                                                                  01             000369
  4336     stomp_frame_setHeader(frame : 'receipt' : receiptId);                                             01             000370
  4337     stomp_addOpenReceipt(conn : receiptid);                                                           01             000371
  4338   endif;                                                                                             E01             000372
  4339                                                                                                                      000373
  4340   buffer = stomp_frame_serialize(frame);                                                                             000374
  4341                                                                                                                      000375
  4342   rc = send(header.socket : buffer.data : buffer.length : 0);                                                        000376
  4343                                                                                                                      000377
  4344   stomp_log(logger : 'sent ' + %char(rc) + ' bytes');                                                                000378
  4345                                                                                                                      000379
  4346   if (stomp_isUsingReceipts(conn));                                                                  B01             000380
  4347     waitForReceipts(conn);                                                                            01             000381
  4348   endif;                                                                                             E01             000382
  4349                                                                                                                      000383
  4350   on-exit;                                                                                                           000384
  4351     stomp_util_buffer_dispose(buffer);                                                                               000385
  4352 end-proc;                                                                                                            000386
  4353                                                                                                                      000387
  4354                                                                                                                      000388
  4355 dcl-proc stomp_receiveFrame export;                                                                                  000389
  4356   dcl-pi *N pointer;                                                                                                 000390
  4357     conn pointer const;                                                                                              000391
  4358   end-pi;                                                                                                            000392
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     87
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4359                                                                                                                      000393
  4360   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000394
  4361   dcl-s length int(10);                                                                                              000395
  4362   dcl-s ptr pointer;                                                                                                 000396
  4363   dcl-s rc int(10);                                                                                                  000397
  4364   dcl-s returnFrame pointer;                                                                                         000398
  4365   dcl-s bufferedFrame pointer based(tmpPtr);                                                                         000399
  4366   dcl-s running ind inz(*on);                                                                                        000400
  4367                                                                                                                      000401
  4368   stomp_log(logger : 'receiving frames ...');                                                                        000402
  4369                                                                                                                      000403
  4370   // return next buffered frames                                                                                     000404
  4371   if (not list_isEmpty(header.bufferedFrames));                                                      B01             000405
  4372     tmpPtr =list_getFirst(header.bufferedFrames);                                                     01             000406
  4373     list_removeFirst(header.bufferedFrames);                                                          01             000407
  4374     stomp_log(logger : 'return buffered frame ' + stomp_frame_getCommand(bufferedFrame));             01             000408
  4375     return bufferedFrame;                                                                             01             000409
  4376   endif;                                                                                             E01             000410
  4377                                                                                                                      000411
  4378   length = STOMP_MAX_FRAME_SIZE;                                                                                     000412
  4379   ptr = %alloc(length);                                                                                              000413
  4380                                                                                                                      000414
  4381   dow (running);                                                                                     B01             000415
  4382     rc = recv(header.socket : ptr : length : 0);                                                      01             000416
  4383     if (rc = 1 or rc = 2);                                                                           B02             000417
  4384       if (isHeartbeat(ptr : rc));                                                                    B03             000418
  4385         stomp_log(logger : 'received heartbeat');                                                     03             000419
  4386       else;                                                                                          X03             000420
  4387         stomp_log(logger : 'dropping invalid heartbeat data');                                        03             000421
  4388       endif;                                                                                         E03             000422
  4389     elseif (rc > 0);                                                                                 X02             000423
  4390       stomp_log(logger : 'received ' + %char(rc) + ' bytes');                                         02             000424
  4391                                                                                                                      000425
  4392       returnFrame = stomp_parser_parse(ptr : rc);                                                     02             000426
  4393                                                                                                                      000427
  4394       stomp_log(logger : 'received ' + stomp_frame_getCommand(returnFrame) + ' frame');               02             000428
  4395                                                                                                                      000429
  4396       if (stomp_frame_getCommand(returnFrame) = 'CONNECTED');                                        B03             000430
  4397         checkHeartbeatNegotiation(conn : returnFrame);                                                03             000431
  4398       endif;                                                                                         E03             000432
  4399                                                                                                                      000433
  4400       running = *off;                                                                                 02             000434
  4401     else;                                                                                            X02             000435
  4402       stomp_log(logger : 'no data received from connection');                                         02             000436
  4403       running = *off;                                                                                 02             000437
  4404     endif;                                                                                           E02             000438
  4405   enddo;                                                                                             E01             000439
  4406                                                                                                                      000440
  4407   return returnFrame;                                                                                                000441
  4408                                                                                                                      000442
  4409   on-exit;                                                                                                           000443
  4410     dealloc ptr;                                                                                                     000444
  4411 end-proc;                                                                                                            000445
  4412                                                                                                                      000446
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     88
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4413                                                                                                                      000447
  4414 dcl-proc isHeartbeat;                                                                                                000448
  4415   dcl-pi *n ind;                                                                                                     000449
  4416     data pointer const;                                                                                              000450
  4417     length int(10) const;                                                                                            000451
  4418   end-pi;                                                                                                            000452
  4419                                                                                                                      000453
  4420   // in UTF-8 and UCS-2                                                                                              000454
  4421   dcl-c CR u'000D';                                                                                                  000455
  4422   dcl-c LF u'000A';                                                                                                  000456
  4423   dcl-c CRLF u'000A000D';                                                                                            000457
  4424                                                                                                                      000458
  4425   dcl-s value1 char(1) ccsid(*utf8) based(data);                                                                     000459
  4426   dcl-s value2 char(2) ccsid(*utf8) based(data);                                                                     000460
  4427                                                                                                                      000461
  4428   if (length = 1);                                                                                   B01             000462
  4429     return value1 = CR or value1 = LF;                                                                01             000463
  4430   elseif (length = 2);                                                                               X01             000464
  4431     return value2 = CRLF;                                                                             01             000465
  4432   else;                                                                                              X01             000466
  4433     return *off;                                                                                      01             000467
  4434   endif;                                                                                             E01             000468
  4435 end-proc;                                                                                                            000469
  4436                                                                                                                      000470
  4437                                                                                                                      000471
  4438 dcl-proc checkHeartbeatNegotiation;                                                                                  000472
  4439   dcl-pi *n;                                                                                                         000473
  4440     client pointer const;                                                                                            000474
  4441     frame pointer const;                                                                                             000475
  4442   end-pi;                                                                                                            000476
  4443                                                                                                                      000477
  4444   dcl-s heartbeat varchar(100);                                                                                      000478
  4445   dcl-s serverHeartbeat uns(10);                                                                                     000479
  4446   dcl-s success ind inz(*on);                                                                                        000480
  4447                                                                                                                      000481
  4448   heartbeat = stomp_frame_getHeader(frame : 'heart-beat');                                                           000482
  4449   if (heartbeat = *blank);                                                                           B01             000483
  4450     if (stomp_getHeartbeatServer(client) <> STOMP_HEARTBEAT_NONE);                                   B02             000484
  4451       stomp_log(logger : 'Failed heartbeat negotiation. Server sends no heartbeat.');                 02             000485
  4452       success = *off;                                                                                 02             000486
  4453     endif;                                                                                           E02             000487
  4454   else;                                                                                              X01             000488
  4455     serverHeartbeat = %uns(%subst(heartbeat : 1 : %scan(',' : heartbeat)-1));                         01             000489
  4456     if (serverHeartbeat <> stomp_getHeartbeatServer(client));                                        B02             000490
  4457       stomp_log(logger : 'Failed heartbeat negotiation. Server heartbeat interval: ' +                02             000491
  4458           %char(serverHeartbeat));                                                                    02             000492
  4459       success = *off;                                                                                 02             000493
  4460     endif;                                                                                           E02             000494
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     89
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4461   endif;                                                                                             E01             000495
  4462                                                                                                                      000496
  4463   if (success);                                                                                      B01             000497
  4464     stomp_log(logger : 'Heartbeat negotiation successful');                                           01             000498
  4465   endif;                                                                                             E01             000499
  4466 end-proc;                                                                                                            000500
  4467                                                                                                                      000501
  4468                                                                                                                      000502
  4469 dcl-proc stomp_setExtension export;                                                                                  000503
  4470   dcl-pi *N;                                                                                                         000504
  4471     conn pointer const;                                                                                              000505
  4472     extension pointer const;                                                                                         000506
  4473   end-pi;                                                                                                            000507
  4474                                                                                                                      000508
  4475   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000509
  4476                                                                                                                      000510
  4477   if (header.extension <> *null);                                                                    B01             000511
  4478     stomp_log(logger : 'replace extension: ' + stomp_ext_getId(header.extension));                    01             000512
  4479     stomp_ext_finalize(header.extension);                                                             01             000513
  4480   endif;                                                                                             E01             000514
  4481                                                                                                                      000515
  4482   header.extension = extension;                                                                                      000516
  4483                                                                                                                      000517
  4484   stomp_log(logger : 'set extension: ' + stomp_ext_getId(extension));                                                000518
  4485 end-proc;                                                                                                            000519
  4486                                                                                                                      000520
  4487                                                                                                                      000521
  4488 dcl-proc stomp_getExtension export;                                                                                  000522
  4489   dcl-pi *N pointer;                                                                                                 000523
  4490     conn pointer const;                                                                                              000524
  4491   end-pi;                                                                                                            000525
  4492                                                                                                                      000526
  4493   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000527
  4494                                                                                                                      000528
  4495   return header.extension;                                                                                           000529
  4496 end-proc;                                                                                                            000530
  4497                                                                                                                      000531
  4498                                                                                                                      000532
  4499 dcl-proc stomp_useReceipts export;                                                                                   000533
  4500   dcl-pi *N;                                                                                                         000534
  4501     conn pointer const;                                                                                              000535
  4502     value ind const;                                                                                                 000536
  4503   end-pi;                                                                                                            000537
  4504                                                                                                                      000538
  4505   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000539
  4506                                                                                                                      000540
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     90
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4507   header.useReceipts = value;                                                                                        000541
  4508                                                                                                                      000542
  4509   stomp_log(logger : 'set using receipts: ' + value);                                                                000543
  4510 end-proc;                                                                                                            000544
  4511                                                                                                                      000545
  4512                                                                                                                      000546
  4513 dcl-proc stomp_isUsingReceipts export;                                                                               000547
  4514   dcl-pi *N ind;                                                                                                     000548
  4515     conn pointer const;                                                                                              000549
  4516   end-pi;                                                                                                            000550
  4517                                                                                                                      000551
  4518   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000552
  4519                                                                                                                      000553
  4520   return header.useReceipts;                                                                                         000554
  4521 end-proc;                                                                                                            000555
  4522                                                                                                                      000556
  4523                                                                                                                      000557
  4524 dcl-proc stomp_hasOption export;                                                                                     000558
  4525   dcl-pi *N ind;                                                                                                     000559
  4526     conn pointer const;                                                                                              000560
  4527     option int(10) const;                                                                                            000561
  4528   end-pi;                                                                                                            000562
  4529                                                                                                                      000563
  4530   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000564
  4531   dcl-ds node likeds(tree_node_int_t) based(nodePtr);                                                                000565
  4532                                                                                                                      000566
  4533   return tree_rb_int_containsKey(header.options : option);                                                           000567
  4534 end-proc;                                                                                                            000568
  4535                                                                                                                      000569
  4536                                                                                                                      000570
  4537 dcl-proc stomp_getOptionValue export;                                                                                000571
  4538   dcl-pi *N pointer;                                                                                                 000572
  4539     conn pointer const;                                                                                              000573
  4540     option int(10) const;                                                                                            000574
  4541   end-pi;                                                                                                            000575
  4542                                                                                                                      000576
  4543   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000577
  4544   dcl-ds node likeds(tree_node_int_t) based(nodePtr);                                                                000578
  4545                                                                                                                      000579
  4546   nodePtr = tree_rb_int_get(header.options : option);                                                                000580
  4547   return node.value;                                                                                                 000581
  4548 end-proc;                                                                                                            000582
  4549                                                                                                                      000583
  4550                                                                                                                      000584
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     91
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4551 dcl-proc stomp_setSessionId export;                                                                                  000585
  4552   dcl-pi *N;                                                                                                         000586
  4553     conn pointer const;                                                                                              000587
  4554     session like(stomp_header_t.sessionId) const;                                                                    000588
  4555   end-pi;                                                                                                            000589
  4556                                                                                                                      000590
  4557   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000591
  4558                                                                                                                      000592
  4559   header.sessionId = session;                                                                                        000593
  4560                                                                                                                      000594
  4561   stomp_log(logger : 'set session id: ' + session);                                                                  000595
  4562 end-proc;                                                                                                            000596
  4563                                                                                                                      000597
  4564                                                                                                                      000598
  4565 dcl-proc stomp_addOpenReceipt export;                                                                                000599
  4566   dcl-pi *N;                                                                                                         000600
  4567     conn pointer const;                                                                                              000601
  4568     pReceipt like(stomp_receiptid_t) const;                                                                          000602
  4569   end-pi;                                                                                                            000603
  4570                                                                                                                      000604
  4571   dcl-s receipt like(stomp_receiptid_t);                                                                             000605
  4572   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000606
  4573                                                                                                                      000607
  4574   receipt = pReceipt;                                                                                                000608
  4575   list_add(header.openReceipts : %addr(receipt : *data) : %len(receipt));                                            000609
  4576                                                                                                                      000610
  4577   stomp_log(logger : 'added open receipt: ' + receipt);                                                              000611
  4578 end-proc;                                                                                                            000612
  4579                                                                                                                      000613
  4580                                                                                                                      000614
  4581 dcl-proc stomp_getNumberOfOpenReceipts export;                                                                       000615
  4582   dcl-pi *N int(10);                                                                                                 000616
  4583     conn pointer const;                                                                                              000617
  4584   end-pi;                                                                                                            000618
  4585                                                                                                                      000619
  4586   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000620
  4587                                                                                                                      000621
  4588   return list_size(header.openReceipts);                                                                             000622
  4589 end-proc;                                                                                                            000623
  4590                                                                                                                      000624
  4591                                                                                                                      000625
  4592 ///                                                                                                                  000626
  4593 // Wait for receipts                                                                                                 000627
  4594 //                                                                                                                   000628
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     92
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4595 // The procedure receives frames over the socket of the client and waits                                             000629
  4596 // until all open receipts has been received. <br/>                                                                  000630
  4597 //                                                                                                                   000631
  4598 // Because receipts may not be sent directly after the frame with the receipt header                                 000632
  4599 // all non RECEIPT frames will be buffered and returned by calling the                                               000633
  4600 // <em>stomp_receiveFrame</em> procedure.                                                                            000634
  4601 //                                                                                                                   000635
  4602 // @param Pointer to client                                                                                          000636
  4603 ///                                                                                                                  000637
  4604 dcl-proc waitForReceipts;                                                                                            000638
  4605   dcl-pi *N;                                                                                                         000639
  4606     conn pointer const;                                                                                              000640
  4607   end-pi;                                                                                                            000641
  4608                                                                                                                      000642
  4609   dcl-ds header likeds(stomp_header_t) based(conn);                                                                  000643
  4610   dcl-s rc int(10);                                                                                                  000644
  4611   dcl-s ptr pointer;                                                                                                 000645
  4612   dcl-s length int(10);                                                                                              000646
  4613   dcl-s frame pointer;                                                                                               000647
  4614   dcl-s receiptId like(stomp_receiptid_t);                                                                           000648
  4615   dcl-s x int(10);                                                                                                   000649
  4616                                                                                                                      000650
  4617   stomp_log(logger : 'waiting for receipts ...');                                                                    000651
  4618                                                                                                                      000652
  4619   length = STOMP_MAX_FRAME_SIZE;                                                                                     000653
  4620   ptr = %alloc(length);                                                                                              000654
  4621                                                                                                                      000655
  4622   dow (not list_isEmpty(header.openReceipts));                                                       B01             000656
  4623     rc = recv(header.socket : ptr : length : 0);                                                      01             000657
  4624                                                                                                                      000658
  4625     if (rc <= 0);                                                                                    B02             000659
  4626       stomp_log(logger : 'no data received from connection');                                         02             000660
  4627       leave;                                                                                          02             000661
  4628     else;                                                                                            X02             000662
  4629       frame = stomp_parser_parse(ptr : rc);                                                           02             000663
  4630                                                                                                                      000664
  4631       stomp_log(logger : 'received ' + stomp_frame_getCommand(frame) + ' frame');                     02             000665
  4632                                                                                                                      000666
  4633       if (stomp_frame_getCommand(frame) = 'RECEIPT');                                                B03             000667
  4634         receiptId = stomp_frame_getHeader(frame : 'receipt-id');                                      03             000668
  4635                                                                                                                      000669
  4636         stomp_log(logger : 'received receipt with id: ' + receiptId);                                 03             000670
  4637                                                                                                                      000671
  4638         x = list_indexOf(header.openReceipts : %addr(receiptId : *DATA) :                             03             000672
  4639                          %len(receiptId));                                                            03             000673
  4640         if (x >=0); // open receipt found                                                            B04             000674
  4641           list_remove(header.openReceipts : x);                                                       04             000675
  4642           stomp_log(logger : 'removed receipt ' + receiptId +                                         04             000676
  4643                              ' from open receipt list (position ' +                                   04             000677
  4644                              %char(x) + ')');                                                         04             000678
  4645         else;                                                                                        X04             000679
  4646           stomp_log(logger : 'receipt ' + receiptId + ' is not in the ' +                             04             000680
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     93
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4647                              'list of open receipts');                                                04             000681
  4648         endif;                                                                                       E04             000682
  4649                                                                                                                      000683
  4650       else;                                                                                          X03             000684
  4651         // no receipt => add frame to buffered frames                                                                000685
  4652         list_add(header.bufferedFrames : %addr(frame) : %size(frame));                                03             000686
  4653         stomp_log(logger : 'buffered frame ' + stomp_frame_getCommand(frame) +                        03             000687
  4654                            '. waiting for receipt ...');                                              03             000688
  4655       endif;                                                                                         E03             000689
  4656     endif;                                                                                           E02             000690
  4657                                                                                                                      000691
  4658   enddo;                                                                                             E01             000692
  4659                                                                                                                      000693
  4660   dealloc ptr;                                                                                                       000694
  4661 end-proc;                                                                                                            000695
  4662                                                                                                                      000696
  4663                                                                                                                      000697
  4664 dcl-proc stomp_setTransactionId export;                                                                              000698
  4665   dcl-pi *n;                                                                                                         000699
  4666     client pointer const;                                                                                            000700
  4667     transactionId varchar(100) const;                                                                                000701
  4668   end-pi;                                                                                                            000702
  4669                                                                                                                      000703
  4670   dcl-ds header likeds(stomp_header_t) based(client);                                                                000704
  4671                                                                                                                      000705
  4672   header.transactionId = transactionId;                                                                              000706
  4673 end-proc;                                                                                                            000707
  4674                                                                                                                      000708
  4675                                                                                                                      000709
  4676 dcl-proc stomp_getTransactionId export;                                                                              000710
  4677   dcl-pi *n varchar(100);                                                                                            000711
  4678     client pointer const;                                                                                            000712
  4679   end-pi;                                                                                                            000713
  4680                                                                                                                      000714
  4681   dcl-ds header likeds(stomp_header_t) based(client);                                                                000715
  4682                                                                                                                      000716
  4683   return header.transactionId;                                                                                       000717
  4684 end-proc;                                                                                                            000718
  4685                                                                                                                      000719
  4686                                                                                                                      000720
  4687 dcl-proc stomp_setHeartbeatServer export;                                                                            000721
  4688   dcl-pi *n;                                                                                                         000722
  4689     client pointer const;                                                                                            000723
  4690     heartbeatValue uns(10) const;                                                                                    000724
  4691   end-pi;                                                                                                            000725
  4692                                                                                                                      000726
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     94
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  4693   dcl-ds header likeds(stomp_header_t) based(client);                                                                000727
  4694                                                                                                                      000728
  4695   header.heartbeatServer = heartbeatValue;                                                                           000729
  4696 end-proc;                                                                                                            000730
  4697                                                                                                                      000731
  4698                                                                                                                      000732
  4699 dcl-proc stomp_getHeartbeatServer export;                                                                            000733
  4700   dcl-pi *n uns(10);                                                                                                 000734
  4701     client pointer const;                                                                                            000735
  4702   end-pi;                                                                                                            000736
  4703                                                                                                                      000737
  4704   dcl-ds header likeds(stomp_header_t) based(client);                                                                000738
  4705                                                                                                                      000739
  4706   return header.heartbeatServer;                                                                                     000740
  4707 end-proc;                                                                                                            000741
  4708                                                                                                                      000742
  4709                                                                                                                      000743
  4710 dcl-proc nextReceiptId;                                                                                              000744
  4711   dcl-pi *n varchar(100);                                                                                            000745
  4712     client pointer const;                                                                                            000746
  4713   end-pi;                                                                                                            000747
  4714                                                                                                                      000748
  4715   dcl-ds header likeds(stomp_header_t) based(client);                                                                000749
  4716                                                                                                                      000750
  4717   if (header.receiptId = *hival);                                                                    B01             000751
  4718     header.receiptId = 0;                                                                             01             000752
  4719   endif;                                                                                             E01             000753
  4720                                                                                                                      000754
  4721   header.receiptId += 1;                                                                                             000755
  4722                                                                                                                      000756
  4723   return 'msg-' + %char(header.receiptId);                                                                           000757
  4724 end-proc;                                                                                                            000758
       * * * * *   E N D   O F   S O U R C E   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     95
          A d d i t i o n a l   D i a g n o s t i c   M e s s a g e s
 Msg id  Sv Number Seq     Message text
*RNF5409 00   4159 000193  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   4373 000407  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   4575 000609  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   4641 000675  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   4652 000686  The prototyped call returns a value which is lost when
                           CALLP is used.
 * * * * *   E N D   O F   A D D I T I O N A L   D I A G N O S T I C   M E S S A G E S   * * * * *
                            / C o p y   M e m b e r s
Line   Src  RPG name   <-------- External name -------> CCSID  <- Last change ->
Number Id              Library    File       Member            Date     Time
    41    1 errno_h.r+ ../include/errno_h.rpgle           850  08/21/18 18:21:24
   349    2 ilecee.rp+ ../include/ilecee.rpginc           850  05/20/21 19:17:09
   361    3 libc_h.rp+ ../include/libc_h.rpgle            850  08/21/18 18:21:24
   364    4 QUSEC      QSYSINC    QRPGLESRC  QUSEC         37  02/17/19 10:02:41
   646    5 libtree_h+ /home/mihael/include/libtree/li+   850  05/23/21 10:14:10
   737    6 rngrb_h.r+ /home/mihael/include/libtree/rn+   850  05/23/21 10:14:10
   760    7 rngrb_int+ /home/mihael/include/libtree/rn+   850  05/23/21 10:14:10
   840    8 rngrb_str+ /home/mihael/include/libtree/rn+   850  05/23/21 10:14:10
   930    9 llist_h.r+ /home/mihael/include/llist/llis+   923  03/29/20 08:30:06
  2211   10 llist_so_+ /home/mihael/include/llist/llis+   923  03/29/20 08:30:06
  2268   11 message_h+ /home/mihael/include/message/me+   819  04/14/21 19:21:26
  2560   12 net_h.rpg+ ../include/net_h.rpgle             850  08/21/18 18:21:24
  2575   13 qusec.rpg+ ../include/qusec.rpginc            850  05/20/21 19:39:58
  2589   14 socket_h.+ ../include/socket_h.rpgle          850  08/21/18 18:21:24
  2740   15 stomp.rpg+ ../include/stomp.rpginc            850  05/23/21 09:14:17
  2748   16 stomp_h.r+ ../include/stomp_h.rpginc          850  05/23/21 07:01:29
  3233   17 stompcmd.+ ../include/stompcmd.rpginc         850  05/23/21 09:15:18
  3456   18 stompfram+ ../include/stompframe.rpginc       850  05/21/21 09:02:59
  3516   19 stomputil+ ../include/stomputil.rpginc        850  05/21/21 09:33:03
  3792   20 stompext.+ ../include/stompext.rpginc         850  05/23/21 07:58:50
  3932   21 stomppars+ ../include/stompparser.rpginc      850  05/20/21 12:08:40
  3977   22 stomputil+ ../include/stomputil.rpginc        850  05/21/21 09:33:03
  3982   23 stompext.+ ../include/stompext.rpginc         850  05/23/21 07:58:50
  3987   24 stompfram+ ../include/stompframe.rpginc       850  05/21/21 09:02:59
  3992   25 stomplog.+ ../include/stomplog.rpginc         850  05/20/21 19:00:50
  4012   26 stomppars+ ../include/stompparser.rpginc      850  05/20/21 12:08:40
  4017   27 stomputil+ ../include/stomputil.rpginc        850  05/21/21 09:33:03
         * * * * *   E N D   O F   / C O P Y   M E M B E R S   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     96
                          C r o s s   R e f e r e n c e
      File and Record References:
         File              Device             References (D=Defined)
           Record
         No references in the source.
      Global Field References:
         Field             Attributes         References (D=Defined M=Modified)
         AF_INET           CONST                2655D   4101    4125
*RNF7031 AF_INET6          CONST                2657D
*RNF7031 AF_NS             CONST                2656D
*RNF7031 AF_TELEPHONY      CONST                2659D
*RNF7031 AF_UNIX           CONST                2654D
*RNF7031 AF_UNIX_CCSID     CONST                2658D
*RNF7031 AF_UNSPEC         CONST                2653D
*RNF7031 BSEARCH           *(16)                 576D
                           PROTOTYPE
*RNF7031 C__ERRNO          *(16)                 345D
                           PROTOTYPE
*RNF7031 CASECONVERT       PROTOTYPE             508D
         CEE4RAGE2         PROTOTYPE             357D   4061M
*RNF7031 CEILING           F(8)                  547D
                           PROTOTYPE
         CHECKHEARTBEATNEGOTIATION...
                           PROTOTYPE            4397M   4438
         CLOSE             I(10,0)              2638D   4159
                           PROTOTYPE
         CONNECT           I(10,0)              2602D   4130
                           PROTOTYPE
*RNF7031 EACCES            CONST                 138D
*RNF7031 EADDRINUSE        CONST                 160D
*RNF7031 EADDRNOTAVAIL     CONST                 162D
*RNF7031 EAFNOSUPPORT      CONST                 164D
*RNF7031 EAGAIN            CONST                 148D
*RNF7031 EALREADY          CONST                 166D
*RNF7031 EBADDATA          CONST                 115D
*RNF7031 EBADF             CONST                 222D
*RNF7031 EBADFID           CONST                 292D
*RNF7031 EBADFUNC          CONST                 111D
*RNF7031 EBADKEYLN         CONST                 125D
*RNF7031 EBADMODE          CONST                 101D
*RNF7031 EBADNAME          CONST                  99D
*RNF7031 EBADOPT           CONST                 117D
*RNF7031 EBADPOS           CONST                 103D
*RNF7031 EBADSEEK          CONST                  97D
*RNF7031 EBUSY             CONST                 336D
*RNF7031 ECHILD            CONST                 300D
*RNF7031 ECLOSED           CONST                 158D
*RNF7031 ECONNABORTED      CONST                 168D
*RNF7031 ECONNREFUSED      CONST                 170D
*RNF7031 ECONNRESET        CONST                 172D
*RNF7031 ECONVERT          CONST                 268D
*RNF7031 EDAMAGE           CONST                 256D
*RNF7031 EDATALINK         CONST                 324D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     97
*RNF7031 EDEADLK           CONST                 232D
*RNF7031 EDESTADDRREQ      CONST                 174D
*RNF7031 EDESTROYED        CONST                 238D
*RNF7031 EDOM              CONST                  77D
*RNF7031 EEXIST            CONST                 230D
*RNF7031 EFAULT            CONST                 152D
*RNF7031 EFBIG             CONST                 284D
*RNF7031 EFILECVT          CONST                 290D
*RNF7031 EGETANDPUT        CONST                 129D
*RNF7031 EHOSTDOWN         CONST                 176D
*RNF7031 EHOSTUNREACH      CONST                 178D
*RNF7031 EIDRM             CONST                 286D
*RNF7031 EILSEQ            CONST                 272D
*RNF7031 EINPROGRESS       CONST                 180D
*RNF7031 EINTR             CONST                 150D
*RNF7031 EINVAL            CONST                 330D
*RNF7031 EIO               CONST                 332D
*RNF7031 EIOERROR          CONST                 131D
*RNF7031 EIORECERR         CONST                 133D
*RNF7031 EISCONN           CONST                 182D
*RNF7031 EISDIR            CONST                 248D
*RNF7031 EITERBAD          CONST                 254D
*RNF7031 EJOURNALED        CONST                 320D
*RNF7031 EJRNDAMAGE        CONST                 308D
*RNF7031 EJRNENTTOOLONG    CONST                 322D
*RNF7031 EJRNINACTIVE      CONST                 310D
*RNF7031 EJRNRCVSPC        CONST                 312D
*RNF7031 EJRNRMT           CONST                 314D
*RNF7031 ELOCKED           CONST                 282D
*RNF7031 ELOOP             CONST                 258D
*RNF7031 EMFILE            CONST                 224D
*RNF7031 EMLINK            CONST                 242D
*RNF7031 EMSGSIZE          CONST                 184D
*RNF7031 ENAMETOOLONG      CONST                 260D
*RNF7031 ENETDOWN          CONST                 186D
*RNF7031 ENETRESET         CONST                 188D
*RNF7031 ENETUNREACH       CONST                 190D
*RNF7031 ENEWJRN           CONST                 318D
*RNF7031 ENEWJRNRCV        CONST                 316D
*RNF7031 ENFILE            CONST                 226D
*RNF7031 ENOBUFS           CONST                 192D
*RNF7031 ENODEV            CONST                 334D
*RNF7031 ENOENT            CONST                 338D
*RNF7031 ENOLCK            CONST                 262D
*RNF7031 ENOMEM            CONST                 234D
*RNF7031 ENOMSG            CONST                 288D
*RNF7031 ENOPOS            CONST                 105D
*RNF7031 ENOPROTOOPT       CONST                 194D
*RNF7031 ENOREC            CONST                 113D
*RNF7031 ENOSPC            CONST                 142D
*RNF7031 ENOSYS            CONST                 246D
*RNF7031 ENOSYSRSC         CONST                 266D
*RNF7031 ENOTCONN          CONST                 196D
*RNF7031 ENOTDIR           CONST                 140D
*RNF7031 ENOTDLT           CONST                 121D
*RNF7031 ENOTEMPTY         CONST                 264D
*RNF7031 ENOTENROLL        CONST                 276D
*RNF7031 ENOTOPEN          CONST                  83D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     98
*RNF7031 ENOTREAD          CONST                  85D
*RNF7031 ENOTSAFE          CONST                 304D
*RNF7031 ENOTSIGINIT       CONST                 298D
*RNF7031 ENOTSOCK          CONST                 198D
*RNF7031 ENOTSUP           CONST                 200D
*RNF7031 ENOTUPD           CONST                 119D
*RNF7031 ENOTWRITE         CONST                  89D
*RNF7031 ENUMMBRS          CONST                 107D
*RNF7031 ENUMRECS          CONST                 109D
*RNF7031 ENXIO             CONST                 156D
*RNF7031 EOFFLINE          CONST                 278D
*RNF7031 EOPNOTSUPP        CONST                 202D
*RNF7031 EOVERFLOW         CONST                 306D
*RNF7031 EOWNERTERM        CONST                 236D
*RNF7031 EPAD              CONST                 123D
*RNF7031 EPERM             CONST                 340D
*RNF7031 EPFNOSUPPORT      CONST                 204D
*RNF7031 EPIPE             CONST                 228D
*RNF7031 EPROTONOSUPPORT   CONST                 206D
*RNF7031 EPROTOTYPE        CONST                 209D
*RNF7031 EPUTANDGET        CONST                 127D
*RNF7031 ERANGE            CONST                  79D
*RNF7031 ERCVDERR          CONST                 211D
*RNF7031 ERECIO            CONST                  87D
*RNF7031 EROFS             CONST                 250D
*RNF7031 EROOBJ            CONST                 280D
         ERRNO             *(16)                 586D   4103    4131    4140
                           PROTOTYPE
*RNF7031 ESHUTDOWN         CONST                 213D
*RNF7031 ESOCKTNOSUPPORT   CONST                 215D
*RNF7031 ESOFTDAMAGE       CONST                 274D
*RNF7031 ESPIPE            CONST                 244D
*RNF7031 ESRCH             CONST                 296D
*RNF7031 ESTALE            CONST                 294D
*RNF7031 ESTDERR           CONST                  95D
*RNF7031 ESTDIN            CONST                  91D
*RNF7031 ESTDOUT           CONST                  93D
*RNF7031 ETERM             CONST                 240D
*RNF7031 ETIME             CONST                 154D
*RNF7031 ETIMEDOUT         CONST                 218D
*RNF7031 ETOOMANYREFS      CONST                 302D
*RNF7031 ETRUNC            CONST                  81D
*RNF7031 EUNATCH           CONST                 220D
*RNF7031 EUNKNOWN          CONST                 252D
*RNF7031 EWOULDBLOCK       CONST                 146D
*RNF7031 EXDEV             CONST                 144D
*RNF7031 E2BIG             CONST                 270D
*RNF7031 F_DUPFD           CONST                 600D
*RNF7031 F_GETFL           CONST                 601D
*RNF7031 F_GETOWN          CONST                 603D
*RNF7031 F_SETFL           CONST                 602D
*RNF7031 F_SETOWN          CONST                 604D
*RNF7031 FASYNC            CONST                 611D
*RNF7031 FCNTL             I(10,0)               638D
                           PROTOTYPE
*RNF7031 FLOOR             F(8)                  550D
                           PROTOTYPE
*RNF7031 FNDELAY           CONST                 610D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page     99
*RNF7031 GETHOSTBYNAME     *(16)                2570D
                           PROTOTYPE
*RNF7031 INADDR_NONE       CONST                2674D
         INET_ADDR         U(10,0)              2564D   4126
                           PROTOTYPE
*RNF7031 INET_NTOA         *(16)                2567D
                           PROTOTYPE
*RNF7031 IPPROTO_IP        CONST                2672D
         ISHEARTBEAT       N(1)                 4384    4414
                           PROTOTYPE
*RNF7031 LIST_ABORTITERATION...
                           PROTOTYPE            1398D
         LIST_ADD          N(1)                 1093D   4575M   4652M
                           PROTOTYPE
*RNF7031 LIST_ADDALL       N(1)                 1153D
                           PROTOTYPE
*RNF7031 LIST_ADDBOOLEAN   N(1)                 1916D
                           PROTOTYPE
*RNF7031 LIST_ADDDATE      N(1)                 1972D
                           PROTOTYPE
*RNF7031 LIST_ADDDECIMAL   N(1)                 1944D
                           PROTOTYPE
*RNF7031 LIST_ADDDOUBLE    N(1)                 1888D
                           PROTOTYPE
*RNF7031 LIST_ADDFIRST     N(1)                 1113D
                           PROTOTYPE
*RNF7031 LIST_ADDFLOAT     N(1)                 1860D
                           PROTOTYPE
*RNF7031 LIST_ADDINTEGER   N(1)                 1776D
                           PROTOTYPE
*RNF7031 LIST_ADDLAST      N(1)                 1132D
                           PROTOTYPE
*RNF7031 LIST_ADDLONG      N(1)                 1804D
                           PROTOTYPE
*RNF7031 LIST_ADDSHORT     N(1)                 1832D
                           PROTOTYPE
*RNF7031 LIST_ADDSTRING    N(1)                 1748D
                           PROTOTYPE
*RNF7031 LIST_CLEAR        N(1)                 1229D
                           PROTOTYPE
*RNF7031 LIST_CONTAINS     N(1)                 1432D
                           PROTOTYPE
*RNF7031 LIST_COPY         *(16)                1701D
                           PROTOTYPE
         LIST_CREATE       *(16)                1048D   4098    4099
                           PROTOTYPE
         LIST_DISPOSE      PROTOTYPE            1065D   4185M   4186M
*RNF7031 LIST_FOREACH      PROTOTYPE            1614D
*RNF7031 LIST_FREQUENCY    U(10,0)              1720D
                           PROTOTYPE
*RNF7031 LIST_GET          *(16)                1289D
                           PROTOTYPE
*RNF7031 LIST_GETBOOLEAN   N(1)                 2099D
                           PROTOTYPE
*RNF7031 LIST_GETDATE      D(10*ISO-)           2135D
                           PROTOTYPE
*RNF7031 LIST_GETDECIMAL   P(15,5)              2117D
                           PROTOTYPE
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    100
*RNF7031 LIST_GETDOUBLE    F(8)                 2081D
                           PROTOTYPE
         LIST_GETFIRST     *(16)                1307D   4372
                           PROTOTYPE
*RNF7031 LIST_GETFLOAT     F(4)                 2063D
                           PROTOTYPE
*RNF7031 LIST_GETINTEGER   I(10,0)              2009D
                           PROTOTYPE
*RNF7031 LIST_GETLAST      *(16)                1324D
                           PROTOTYPE
*RNF7031 LIST_GETLONG      I(20,0)              2045D
                           PROTOTYPE
*RNF7031 LIST_GETNEXT      *(16)                1345D
                           PROTOTYPE
*RNF7031 LIST_GETPREV      *(16)                1381D
                           PROTOTYPE
*RNF7031 LIST_GETSHORT     I(5,0)               2027D
                           PROTOTYPE
*RNF7031 LIST_GETSTRING    A(65535)             1991D
                           PROTOTYPE
         LIST_INDEXOF      I(10,0)              1453D   4638
                           PROTOTYPE
         LIST_ISEMPTY      N(1)                 1246D   4371    4622
                           PROTOTYPE
*RNF7031 LIST_ITERATE      *(16)                1363D
                           PROTOTYPE
*RNF7031 LIST_LASTINDEXOF  I(10,0)              1474D
                           PROTOTYPE
*RNF7031 LIST_MERGE        PROTOTYPE            2203D
         LIST_REMOVE       N(1)                 1177D   4641M
                           PROTOTYPE
         LIST_REMOVEFIRST  N(1)                 1195D   4373M
                           PROTOTYPE
*RNF7031 LIST_REMOVELAST   N(1)                 1212D
                           PROTOTYPE
*RNF7031 LIST_REMOVERANGE  PROTOTYPE            2184D
*RNF7031 LIST_REPLACE      N(1)                 1267D
                           PROTOTYPE
*RNF7031 LIST_RESETITERATION...
                           PROTOTYPE            1413D
*RNF7031 LIST_REVERSE      PROTOTYPE            1685D
*RNF7031 LIST_ROTATE       PROTOTYPE            1568D
         LIST_SIZE         U(10,0)              1515D   4588
                           PROTOTYPE
*RNF7031 LIST_SORT         PROTOTYPE            2168D
*RNF7031 LIST_SORT_INSERTIONSORT...
                           PROTOTYPE            2262D
*RNF7031 LIST_SPLIT        *(16)                1672D
                           PROTOTYPE
*RNF7031 LIST_SUBLIST      *(16)                1533D
                           PROTOTYPE
*RNF7031 LIST_SWAP         N(1)                 1584D
                           PROTOTYPE
*RNF7031 LIST_TOCHARARRAY  PROTOTYPE            1496D
*RNF7031 LIST_TOSTRING     A(65535)             1646D
                           VARYING(2)
                           PROTOTYPE
         LOGGER            *(16)                4048D   4059M   4075    4107
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    101
                                                4147    4163    4188    4206
                                                4222    4238    4254    4269
                                                4285    4316    4330    4344
                                                4368    4374    4385    4387
                                                4390    4394    4402    4451
                                                4457    4464    4478    4484
                                                4509    4561    4577    4617
                                                4626    4631    4636    4642
                                                4646    4653
*RNF7031 MEMCMP            I(10,0)               534D
                           PROTOTYPE
*RNF7031 MEMCPY            *(16)                 519D
                           PROTOTYPE
*RNF7031 MEMICMP           I(10,0)               539D
                           PROTOTYPE
*RNF7031 MEMMOVE           *(16)                 529D
                           PROTOTYPE
*RNF7031 MEMSET            *(16)                 524D
                           PROTOTYPE
*RNF7031 MESSAGE_COMPLETION...
                           PROTOTYPE            2494D
*RNF7031 MESSAGE_CONTROL_BOUNDARY...
                           CONST                2305D
*RNF7031 MESSAGE_CURRENT_CALL_STACK_ENTRY...
                           CONST                2303D
*RNF7031 MESSAGE_DIAGNOSTIC...
                           PROTOTYPE            2555D
         MESSAGE_ESCAPE    PROTOTYPE            2507D   4104M   4132M   4141M
*RNF7031 MESSAGE_FILE_ESCAPE...
                           PROTOTYPE            2542D
*RNF7031 MESSAGE_FILE_INFO PROTOTYPE            2523D
*RNF7031 MESSAGE_INFO      PROTOTYPE            2476D
*RNF7031 MESSAGE_LAST_NEW_ESCAPE_MESSAGE...
                           CONST                2300D
*RNF7031 MESSAGE_ONE_CALL_STACK_LEVEL_ABOVE...
                           CONST                2296D
*RNF7031 MESSAGE_RECEIVEMESSAGE...
                           DS(793)              2381D
                           PROTOTYPE
*RNF7031 MESSAGE_RECEIVEMESSAGEDATA...
                           A(256)               2355D
                           PROTOTYPE
*RNF7031 MESSAGE_RECEIVEMESSAGEINFO...
                           DS(541)              2347D
                           PROTOTYPE
*RNF7031 MESSAGE_RECEIVEMESSAGETEXT...
                           A(256)               2365D
                           PROTOTYPE
*RNF7031 MESSAGE_RESENDESCAPEMESSAGE...
                           PROTOTYPE            2397D
*RNF7031 MESSAGE_SENDCOMPLETIONMESSAGE...
                           PROTOTYPE            2408D
*RNF7031 MESSAGE_SENDESCAPEMESSAGE...
                           PROTOTYPE            2419D
*RNF7031 MESSAGE_SENDESCAPEMESSAGEABOVECONTROLBODY...
                           PROTOTYPE            2443D
*RNF7031 MESSAGE_SENDESCAPEMESSAGETOCALLER...
                           PROTOTYPE            2431D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    102
*RNF7031 MESSAGE_SENDINFOMESSAGE...
                           PROTOTYPE            2455D
*RNF7031 MESSAGE_SENDSTATUSMESSAGE...
                           PROTOTYPE            2465D
*RNF7031 MESSAGE_STATUS    PROTOTYPE            2485D
         MESSAGE_T         DS(793)              2323D   2381
                           TEMPLATE
*RNF7031   ID              A(7)                 2324D
*RNF7031   REPLACEMENTDATA A(254)               2326D
                           VARYING(2)
*RNF7031   SENDER          DS(274)              2327D
*RNF7031   TEXT            A(254)               2325D
                           VARYING(2)
*RNF7031 MESSAGE_TWO_CALL_STACK_LEVEL_ABOVE...
                           CONST                2297D
         MESSAGEINFO_T     DS(541)              2311D   2347
                           TEMPLATE
*RNF7031   MESSAGE         A(256)               2313D
*RNF7031   MESSAGEID       A(7)                 2312D
*RNF7031   PROCEDURENAME   A(256)               2317D
*RNF7031   PROGRAMNAME     A(12)                2315D
*RNF7031   STATEMENT       A(10)                2319D
         MESSAGESENDER_T   DS(274)              2327    2331D
                           TEMPLATE
*RNF7031   PROCEDURENAME   A(256)               2333D
*RNF7031   PROGRAMNAME     A(12)                2332D
*RNF7031   STATEMENT       A(6)                 2334D
         NEXTRECEIPTID     A(100)               4335    4710
                           VARYING(2)
                           PROTOTYPE
*RNF7031 O_NDELAY          CONST                 609D
*RNF7031 O_NONBLOCK        CONST                 608D
*RNF7031 PERROR            PROTOTYPE             347D
         PROTOCOL_DEFAULT  CONST                2670D   4101
*RNF7031 QSORT             *(16)                 570D
                           PROTOTYPE
*RNF7031 QUSBAVL           I(10,0)               414D
*RNF7031 QUSBAVL14         I(10,0)               429D
*RNF7031 QUSBPRV           I(10,0)               412D
*RNF7031 QUSBPRV00         I(10,0)               427D
*RNF7031 QUSCCSID11        I(10,0)               435D
*RNF7031 QUSC0200          DS(32)                423D
         QUSEC             DS(16)                410D    514
         QUSEC_T           DS(16)               2581D   4057
                           TEMPLATE
*RNF7031   BYTESAVAILABLE  I(10,0)              2583D
*RNF7031   BYTESPROVIDED   I(10,0)              2582D
*RNF7031   EXCEPTIONID     A(7)                 2584D
*RNF7031   RESERVED        A(1)                 2585D
*RNF7031 QUSEI             A(7)                  416D
*RNF7031 QUSEI00           A(7)                  431D
*RNF7031 QUSERVED          A(1)                  418D
*RNF7031 QUSERVED39        A(1)                  433D
*RNF7031 QUSK01            I(10,0)               425D
*RNF7031 QUSLED01          I(10,0)               439D
*RNF7031 QUSOED01          I(10,0)               437D
*RNF7031 RAND              I(10,0)               568D
                           PROTOTYPE
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    103
*RNF7031 RBNODE_T          DS(52)                692D
                           TEMPLATE
*RNF7031   COLOR           I(10,0)               696D
*RNF7031   LEFT            *(16)                 693D
*RNF7031   PARENT          *(16)                 695D
*RNF7031   RIGHT           *(16)                 694D
*RNF7031 RBTREE_FIRST      *(16)                 707D
                           PROTOTYPE
*RNF7031 RBTREE_INIT       PROTOTYPE             702D
*RNF7031 RBTREE_INSERT     *(16)                 724D
                           PROTOTYPE
*RNF7031 RBTREE_LAST       *(16)                 710D
                           PROTOTYPE
*RNF7031 RBTREE_LOOKUP     *(16)                 720D
                           PROTOTYPE
*RNF7031 RBTREE_NEXT       *(16)                 713D
                           PROTOTYPE
*RNF7031 RBTREE_PREVIOUS   *(16)                 716D
                           PROTOTYPE
*RNF7031 RBTREE_REMOVE     *(16)                 728D
                           PROTOTYPE
*RNF7031 RBTREE_REPLACE    *(16)                 732D
                           PROTOTYPE
*RNF7031 RBTREE_T          DS(64)                681D
                           TEMPLATE
*RNF7031   COMPARE         *(16) PROCPTR         683D
*RNF7031   FIRST           *(16)                 684D
*RNF7031   LAST            *(16)                 685D
*RNF7031   ROOT            *(16)                 682D
         RECV              I(10,0)              2619D   4382    4623
                           PROTOTYPE
*RNF7031 REQUESTCONTROLBLOCKLOWER...
                           DS(22)                494D
*RNF7031   CASE            I(10,0)               498D
*RNF7031   CCSID           I(10,0)               497D
*RNF7031   RES1            A(10)                 499D
*RNF7031   TYPE            I(10,0)               496D
         REQUESTCONTROLBLOCKUPPER...
                           DS(22)                501D    510
*RNF7031   CASE            I(10,0)               505D
*RNF7031   CCSID           I(10,0)               504D
*RNF7031   RES1            A(10)                 506D
*RNF7031   TYPE            I(10,0)               503D
*RNF7031 SELECT            I(10,0)              2641D
                           PROTOTYPE
         SEND              I(10,0)              2610D   4342
                           PROTOTYPE
*RNF7031 SERVENT_T         DS(64)               2692D
                           TEMPLATE
*RNF7031   S_ALIASES       *(16)                2694D
*RNF7031   S_NAME          *(16)                2693D
*RNF7031   S_PORT          I(10,0)              2695D
*RNF7031   S_PROTO         *(16)                2696D
         SETSOCKOPT        I(10,0)              2628D   4139
                           PROTOTYPE
*RNF7031 SO_BROADCAST      CONST                2704D
*RNF7031 SO_DEBUG          CONST                2706D
*RNF7031 SO_DONTROUTE      CONST                2709D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    104
*RNF7031 SO_ERROR          CONST                2711D
*RNF7031 SO_KEEPALIVE      CONST                2713D
*RNF7031 SO_LINGER         CONST                2715D
*RNF7031 SO_OOBINLINE      CONST                2717D
*RNF7031 SO_RCVBUF         CONST                2719D
*RNF7031 SO_RCVLOWAT       CONST                2721D
         SO_RCVTIMEO       CONST                2723D   4139
*RNF7031 SO_REUSEADDR      CONST                2725D
*RNF7031 SO_SNDBUF         CONST                2727D
*RNF7031 SO_SNDLOWAT       CONST                2729D
*RNF7031 SO_SNDTIMEO       CONST                2731D
*RNF7031 SO_TYPE           CONST                2733D
*RNF7031 SO_USELOOPBACK    CONST                2735D
*RNF7031 SOCK_DGRAM        CONST                2664D
*RNF7031 SOCK_RAW          CONST                2665D
*RNF7031 SOCK_SEQPACKET    CONST                2666D
         SOCK_STREAM       CONST                2663D   4101
         SOCKET            I(10,0)              2594D   4101
                           PROTOTYPE
         SOCKET_ADDRESS_INET_T...
                           DS(16)               2681D   4119
                           TEMPLATE
*RNF7031   ADDR            U(10,0)              2689D
*RNF7031   FAMILY          U(3,0)               2685D
*RNF7031   PORT            U(5,0)               2688D
*RNF7031   SA_LEN          U(3,0)               2684D
*RNF7031   ZERO            A(8)                 2690D
*RNF7031 SOCKET_ADDRESS_T  DS(16)               2676D
                           TEMPLATE
*RNF7031   SA_DATA         A(14)                2679D
*RNF7031   SA_FAMILY       I(5,0)               2678D
         SOL_SOCKET        CONST                2737D   4139
*RNF7031 SRAND             PROTOTYPE             565D
*RNF7031 STOMP_ACK_MODE_AUTO...
                           CONST                2820D
*RNF7031 STOMP_ACK_MODE_CLIENT...
                           CONST                2821D
*RNF7031 STOMP_ACK_MODE_CLIENT_INDIVIDUAL...
                           CONST                2822D
         STOMP_ADDOPENRECEIPT...
                           PROTOTYPE            3173D   4337M   4565
         STOMP_CLOSE       PROTOTYPE            2879D   4151    4176M
*RNF7031 STOMP_COMMAND_ABORT...
                           PROTOTYPE            3416D
*RNF7031 STOMP_COMMAND_ACK PROTOTYPE            3434D
*RNF7031 STOMP_COMMAND_BEGIN...
                           PROTOTYPE            3387D
*RNF7031 STOMP_COMMAND_COMMIT...
                           PROTOTYPE            3403D
*RNF7031 STOMP_COMMAND_CONNECT...
                           PROTOTYPE            3295D
*RNF7031 STOMP_COMMAND_DISCONNECT...
                           PROTOTYPE            3310D
*RNF7031 STOMP_COMMAND_NACK...
                           PROTOTYPE            3452D
*RNF7031 STOMP_COMMAND_SEND...
                           PROTOTYPE            3337D
*RNF7031 STOMP_COMMAND_SUBSCRIBE...
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    105
                           PROTOTYPE            3355D
*RNF7031 STOMP_COMMAND_UNSUBSCRIBE...
                           PROTOTYPE            3370D
         STOMP_CREATE      *(16)                2853D   4079
                           PROTOTYPE
         STOMP_EXITHANDLER PROTOTYPE            4061    4067
*RNF7031 STOMP_EXT_ABORT   PROTOTYPE            3907D
*RNF7031 STOMP_EXT_ACK     PROTOTYPE            3913D
*RNF7031 STOMP_EXT_BEGIN   PROTOTYPE            3894D
*RNF7031 STOMP_EXT_COMMIT  PROTOTYPE            3901D
*RNF7031 STOMP_EXT_CONNECT PROTOTYPE            3856D
*RNF7031 STOMP_EXT_DISCONNECT...
                           PROTOTYPE            3874D
         STOMP_EXT_FINALIZE...
                           PROTOTYPE            3927D   4182M   4479M
         STOMP_EXT_GETID   A(50)                3852D   4478    4484
                           VARYING(2)
                           PROTOTYPE
*RNF7031 STOMP_EXT_NACK    PROTOTYPE            3920D
*RNF7031 STOMP_EXT_SEND    PROTOTYPE            3864D
*RNF7031 STOMP_EXT_SUBSCRIBE...
                           PROTOTYPE            3880D
*RNF7031 STOMP_EXT_T       DS(256)              3832D
                           TEMPLATE
*RNF7031   ID              A(50)                3833D
*RNF7031   PROC_ABORT      *(16) PROCPTR        3840D
*RNF7031   PROC_ACK        *(16) PROCPTR        3843D
*RNF7031   PROC_BEGIN      *(16) PROCPTR        3838D
*RNF7031   PROC_COMMIT     *(16) PROCPTR        3839D
*RNF7031   PROC_CONNECT    *(16) PROCPTR        3835D
*RNF7031   PROC_DISCONNECT *(16) PROCPTR        3836D
*RNF7031   PROC_FINALIZE   *(16) PROCPTR        3845D
*RNF7031   PROC_NACK       *(16) PROCPTR        3844D
*RNF7031   PROC_SEND       *(16) PROCPTR        3837D
*RNF7031   PROC_SUBSCRIBE  *(16) PROCPTR        3841D
*RNF7031   PROC_UNSUBSCRIBE...
                           *(16) PROCPTR        3842D
*RNF7031   USERDATA        *(16)                3834D
*RNF7031 STOMP_EXT_UNSUBSCRIBE...
                           PROTOTYPE            3887D
         STOMP_FINALIZE    PROTOTYPE            2891D   4167
*RNF7031 STOMP_FRAME_BODY_LENGTH...
                           CONST                3508D
         STOMP_FRAME_COMMAND...
                           A(20)                3506D   3587    3680    3692
                           VARYING(2)
                           TEMPLATE
*RNF7031 STOMP_FRAME_CONTAINSHEADER...
                           N(1)                 3764D
                           PROTOTYPE
*RNF7031 STOMP_FRAME_CREATE...
                           *(16)                3586D
                           PROTOTYPE
*RNF7031 STOMP_FRAME_DUMP  PROTOTYPE            3777D
*RNF7031 STOMP_FRAME_FINALIZE...
                           PROTOTYPE            3598D
*RNF7031 STOMP_FRAME_GETBODY...
                           DS(20)               3731D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    106
                           PROTOTYPE
         STOMP_FRAME_GETCOMMAND...
                           A(20)                3692D   4330    4333    4374
                           VARYING(2)           4394    4396    4631    4633
                           PROTOTYPE            4653
         STOMP_FRAME_GETHEADER...
                           A(1000)              3632D   4448    4634
                           VARYING(2)
                           PROTOTYPE
         STOMP_FRAME_HEADER_KEY...
                           A(100)               3504D   3511    3616    3634
                           VARYING(2)           3665    3766
                           TEMPLATE
*RNF7031 STOMP_FRAME_HEADER_T...
                           DS(1104)             3510D
                           TEMPLATE
*RNF7031   KEY             A(100)               3511D
                           VARYING(2)
*RNF7031   VALUE           A(1000)              3512D
                           VARYING(2)
         STOMP_FRAME_HEADER_VALUE...
                           A(1000)              3505D   3512    3617    3632
                           VARYING(2)
                           TEMPLATE
*RNF7031 STOMP_FRAME_HEADER_VALUE_LENGTH...
                           CONST                3507D
*RNF7031 STOMP_FRAME_LISTHEADERS...
                           *(16)                3649D
                           PROTOTYPE
*RNF7031 STOMP_FRAME_REMOVEHEADER...
                           PROTOTYPE            3663D
         STOMP_FRAME_SERIALIZE...
                           DS(20)               3749D   4340
                           PROTOTYPE
*RNF7031 STOMP_FRAME_SETBODY...
                           PROTOTYPE            3711D
*RNF7031 STOMP_FRAME_SETCOMMAND...
                           PROTOTYPE            3678D
         STOMP_FRAME_SETHEADER...
                           PROTOTYPE            3614D   4336M
*RNF7031 STOMP_FRAME_TOSTRING...
                           A(1000000)           3789D
                           VARYING(4)
                           PROTOTYPE
         STOMP_GETEXTENSION...
                           *(16)                3074D   4488
                           PROTOTYPE
         STOMP_GETHEARTBEATSERVER...
                           U(10,0)              3230D   4450    4456    4699
                           PROTOTYPE
         STOMP_GETNUMBEROFOPENRECEIPTS...
                           I(10,0)              3187D   4581
                           PROTOTYPE
         STOMP_GETOPTIONVALUE...
                           *(16)                3131D   4537
                           PROTOTYPE
         STOMP_GETSESSIONID...
                           A(100)               3034D   4289
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    107
                           PROTOTYPE
         STOMP_GETTRANSACTIONID...
                           A(100)               3205D   4676
                           VARYING(2)
                           PROTOTYPE
         STOMP_HASOPTION   N(1)                 3147D   4524
                           PROTOTYPE
         STOMP_HEADER_T    DS(574)              4027D   4085    4089    4118
                           TEMPLATE             4156    4172    4200    4216
                                                4232    4248    4264    4279
                                                4294    4306    4325    4360
                                                4475    4493    4505    4518
                                                4530    4543    4554    4557
                                                4572    4586    4609    4670
                                                4681    4693    4704    4715
*RNF7031   BUFFEREDFRAMES  *(16)                4038D
*RNF7031   CONNECTED       N(1)                 4031D
*RNF7031   EXTENSION       *(16)                4034D
*RNF7031   HEARTBEATCLIENT U(10,0)              4041D
*RNF7031   HEARTBEATSERVER U(10,0)              4040D
*RNF7031   HOST            A(255)               4029D
*RNF7031   OPENRECEIPTS    *(16)                4037D
*RNF7031   OPTIONS         *(16)                4032D
*RNF7031   PORT            I(10,0)              4030D
*RNF7031   RECEIPTID       U(20,0)              4036D
           SESSIONID       A(100)               4033D   4554
*RNF7031   SOCKET          I(10,0)              4028D
*RNF7031   TRANSACTIONID   A(100)               4039D
                           VARYING(2)
*RNF7031   USERECEIPTS     N(1)                 4035D
         STOMP_HEARTBEAT_NONE...
                           CONST                2837D   4450
         STOMP_INIT        I(10,0)                32D   4054
                           PROTOTYPE
         STOMP_ISUSINGRECEIPTS...
                           N(1)                 3117D   4334    4346    4513
                           PROTOTYPE
         STOMP_LOG         PROTOTYPE            4008D   4107M   4147M   4163M
                                                4188M   4206M   4222M   4238M
                                                4254M   4269M   4285M   4316M
                                                4330M   4344M   4368M   4374M
                                                4385M   4387M   4390M   4394M
                                                4402M   4451M   4457M   4464M
                                                4478M   4484M   4509M   4561M
                                                4577M   4617M   4626M   4631M
                                                4636M   4642M   4646M   4653M
         STOMP_LOG_CREATE  *(16)                4000D   4059
                           PROTOTYPE
         STOMP_LOG_DISPOSE PROTOTYPE            4004D   4075M
         STOMP_MAX_FRAME_SIZE...
                           CONST                2836D   4378    4619
*RNF7031 STOMP_MIME_BINARY CONST                2831D
*RNF7031 STOMP_MIME_HTML   CONST                2833D
*RNF7031 STOMP_MIME_JSON   CONST                2835D
*RNF7031 STOMP_MIME_TEXT   CONST                2832D
*RNF7031 STOMP_MIME_XML    CONST                2834D
         STOMP_OPEN        PROTOTYPE            2867D   4113
         STOMP_OPTION_ACK  CONST                2825D   4268
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    108
*RNF7031 STOMP_OPTION_CHARSET...
                           CONST                2829D
         STOMP_OPTION_CLIENT_ID...
                           CONST                2824D   4236
         STOMP_OPTION_CONTENT_TYPE...
                           CONST                2828D   4252
         STOMP_OPTION_DURABLE_SUBSCRIBER...
                           CONST                2827D   4283
         STOMP_OPTION_PERSISTENT...
                           CONST                2826D   4315
         STOMP_OPTION_TIMEOUT...
                           CONST                2823D   4136    4137    4205
         STOMP_OPTION_VIRTUAL_HOST...
                           CONST                2830D   4220
         STOMP_PARSER_PARSE...
                           *(16)                3971D   4392    4629
                           PROTOTYPE
         STOMP_RECEIPTID_T A(50)                2814D   3175    4328    4568
                           VARYING(2)           4571    4614
                           TEMPLATE
         STOMP_RECEIVEFRAME...
                           *(16)                2942D   4355
                           PROTOTYPE
         STOMP_SENDFRAME   PROTOTYPE            2910D   4319
         STOMP_SESSIONID_T A(100)               2813D   3034    3162    4290
                           TEMPLATE
         STOMP_SETACKMODE  PROTOTYPE            3020D   4258
         STOMP_SETCLIENTID PROTOTYPE            2981D   4226
         STOMP_SETCONTENTTYPE...
                           PROTOTYPE            2997D   4242
         STOMP_SETDURABLESUBSCRIBERNAME...
                           PROTOTYPE            3046D   4273
         STOMP_SETEXTENSION...
                           PROTOTYPE            3087D   4469
         STOMP_SETHEARTBEATSERVER...
                           PROTOTYPE            3217D   4687
         STOMP_SETPERSISTMESSAGES...
                           PROTOTYPE            3060D   4300
         STOMP_SETSESSIONID...
                           PROTOTYPE            3160D   4551
         STOMP_SETTIMEOUT  PROTOTYPE            2954D   4194
         STOMP_SETTRANSACTIONID...
                           PROTOTYPE            3191D   4664
         STOMP_SETVIRTUALHOST...
                           PROTOTYPE            2967D   4210
         STOMP_USERECEIPTS PROTOTYPE            3101D   4499
         STOMP_UTIL_BUFFER_DISPOSE...
                           PROTOTYPE            3549D   4351M
         STOMP_UTIL_BUFFER_T...
                           DS(20)               3544D   3550    3553    3731
                           TEMPLATE             3749    4326
*RNF7031   DATA            *(16)                3545D
*RNF7031   LENGTH          U(10,0)              3546D
*RNF7031 STOMP_UTIL_CONVERT...
                           DS(20)               3553D
                           PROTOTYPE
*RNF7031 STOMP_UTIL_GETEXPLICITCHARSET...
                           A(100)               3564D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    109
                           VARYING(2)
                           PROTOTYPE
*RNF7031 STOMP_UTIL_HASBINARYCONTENT...
                           N(1)                 3560D
                           PROTOTYPE
*RNF7031 STRCASECMP        I(10,0)               477D
                           PROTOTYPE
*RNF7031 STRCMP            I(10,0)               464D
                           PROTOTYPE
*RNF7031 STRCMPI           I(10,0)               473D
                           PROTOTYPE
*RNF7031 STRCSPN           I(10,0)               490D
                           PROTOTYPE
*RNF7031 STRERR            *(16)                 588D
                           PROTOTYPE
         STRERROR          *(16)                 591D   4104    4132    4141
                           PROTOTYPE
*RNF7031 STRLEN            U(10,0)               461D
                           PROTOTYPE
*RNF7031 STRNCASECMP       I(10,0)               481D
                           PROTOTYPE
*RNF7031 STRNCMP           I(10,0)               468D
                           PROTOTYPE
*RNF7031 STRSTR            *(16)                 486D
                           PROTOTYPE
*RNF7031 STRTOK            *(16)                 457D
                           PROTOTYPE
*RNF7031 SYSTEM            I(10,0)               562D
                           PROTOTYPE
         TIMEOUT_T         DS(8)                2699D   4122    4201
                           TEMPLATE
*RNF7031   SECONDS         I(10,0)              2700D
*RNF7031   USECONDS        I(10,0)              2701D
*RNF7031 TMPNAM            *(16)                 556D
                           PROTOTYPE
*RNF7031 TMPNAMIFS         *(16)                 559D
                           PROTOTYPE
         TREE_NODE_INT_T   DS(36)                832D   4121    4531    4544
                           TEMPLATE
*RNF7031   KEY             I(10,0)               834D
*RNF7031   LENGTH          I(10,0)               836D
*RNF7031   VALUE           *(16)                 835D
*RNF7031 TREE_NODE_STRING_T...
                           DS(52)                919D
                           TEMPLATE
*RNF7031   KEY             *(16)                 921D
*RNF7031   KEYLENGTH       I(10,0)               922D
*RNF7031   LENGTH          I(10,0)               924D
*RNF7031   VALUE           *(16)                 923D
         TREE_RB_CREATE    *(16)                 744D   4097
                           PROTOTYPE
*RNF7031 TREE_RB_INT_CLEAR PROTOTYPE             819D
*RNF7031 TREE_RB_INT_COMPARE...
                           I(10,0)               814D
                           PROTOTYPE
*RNF7031 TREE_RB_INT_CONTAINER_OF...
                           *(16)                 810D
                           PROTOTYPE
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    110
         TREE_RB_INT_CONTAINSKEY...
                           N(1)                  795D   4136    4533
                           PROTOTYPE
         TREE_RB_INT_FINALIZE...
                           PROTOTYPE             823D   4179M
*RNF7031 TREE_RB_INT_FIRST *(16)                 779D
                           PROTOTYPE
         TREE_RB_INT_GET   *(16)                 774D   4137    4546
                           PROTOTYPE
*RNF7031 TREE_RB_INT_LAST  *(16)                 783D
                           PROTOTYPE
*RNF7031 TREE_RB_INT_NEXT  *(16)                 787D
                           PROTOTYPE
*RNF7031 TREE_RB_INT_PREVIOUS...
                           *(16)                 791D
                           PROTOTYPE
         TREE_RB_INT_PUT   PROTOTYPE             767D   4205M   4220M   4236M
                                                4252M   4268M   4283M   4315M
*RNF7031 TREE_RB_INT_REMOVE...
                           PROTOTYPE             800D
*RNF7031 TREE_RB_INT_REMOVEBYNODE...
                           PROTOTYPE             805D
*RNF7031 TREE_RB_ISEMPTY   N(1)                  750D
                           PROTOTYPE
*RNF7031 TREE_RB_SIZE      I(10,0)               754D
                           PROTOTYPE
*RNF7031 TREE_RB_STRING_CLEAR...
                           PROTOTYPE             907D
*RNF7031 TREE_RB_STRING_COMPARE...
                           I(10,0)               896D
                           PROTOTYPE
*RNF7031 TREE_RB_STRING_COMPARE_IGNORE_CASE...
                           I(10,0)               901D
                           PROTOTYPE
*RNF7031 TREE_RB_STRING_CONTAINER_OF...
                           *(16)                 891D
                           PROTOTYPE
*RNF7031 TREE_RB_STRING_CONTAINSKEY...
                           N(1)                  875D
                           PROTOTYPE
*RNF7031 TREE_RB_STRING_FINALIZE...
                           PROTOTYPE             911D
*RNF7031 TREE_RB_STRING_FIRST...
                           *(16)                 859D
                           PROTOTYPE
*RNF7031 TREE_RB_STRING_GET...
                           *(16)                 854D
                           PROTOTYPE
*RNF7031 TREE_RB_STRING_LAST...
                           *(16)                 863D
                           PROTOTYPE
*RNF7031 TREE_RB_STRING_NEXT...
                           *(16)                 867D
                           PROTOTYPE
*RNF7031 TREE_RB_STRING_PREVIOUS...
                           *(16)                 871D
                           PROTOTYPE
*RNF7031 TREE_RB_STRING_PUT...
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    111
                           PROTOTYPE             847D
*RNF7031 TREE_RB_STRING_REMOVE...
                           PROTOTYPE             880D
*RNF7031 TREE_RB_STRING_REMOVEBYNODE...
                           PROTOTYPE             885D
         WAITFORRECEIPTS   PROTOTYPE              34D   4347M   4604
      Field References for subprocedure STOMP_INIT
         Field             Attributes         References (D=Defined M=Modified)
         ERRORCODE         DS(16)               4057D   4061
      Field References for subprocedure STOMP_EXITHANDLER
         Field             Attributes         References (D=Defined M=Modified)
*RNF7031 ACTIVATIONGROUPMARK...
                           U(20,0)              4069D
                           BASED(_QRNL_PST+)
*RNF7031 REASON            U(10,0)              4070D
                           BASED(_QRNL_PST+)
*RNF7031 RESULTCODE        U(10,0)              4071D
                           BASED(_QRNL_PST+)
*RNF7031 USERRESULTCODE    U(10,0)              4072D
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_CREATE
         Field             Attributes         References (D=Defined M=Modified)
         C_ERR             I(10,0)              4087D   4104    4104
                           BASED(ERRPTR)
         ERRPTR            *(16)                4087    4103M
*RNF7031 FLAGS             I(10,0)              4086D
         HEADER            DS(574)              4085D   4091M   4092M   4093M
                           BASED(PTR)           4094M   4095M   4096M   4097M
                                                4098M   4099M   4101M   4102
           BUFFEREDFRAMES  *(16)                4099
           CONNECTED       N(1)                 4094
           EXTENSION       *(16)                4095
           HOST            A(255)               4092
           OPENRECEIPTS    *(16)                4098
           OPTIONS         *(16)                4097
           PORT            I(10,0)              4093
           SOCKET          I(10,0)              4101    4102
           USERECEIPTS     N(1)                 4096
         HOST              A(255)               4081D   4092
                           BASED(_QRNL_PST+)
                           VARYING(2)
         PORT              I(10,0)              4082D   4093
                           BASED(_QRNL_PST+)
         PTR               *(16)                4085    4089M   4109
      Field References for subprocedure STOMP_OPEN
         Field             Attributes         References (D=Defined M=Modified)
         C_ERR             I(10,0)              4120D   4132    4132    4141
                           BASED(ERRPTR)        4141
         CONN              *(16)                4115D   4118
                           BASED(_QRNL_PST+)
         ERRPTR            *(16)                4120    4131M   4140M
         HEADER            DS(574)              4118D   4126    4127    4130
                           BASED(CONN)          4136    4137    4139    4145M
                                                4147    4147
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    112
           CONNECTED       N(1)                 4145
           HOST            A(255)               4126    4147
           OPTIONS         *(16)                4136    4137
           PORT            I(10,0)              4127    4147
           SOCKET          I(10,0)              4130    4139
         NODE              DS(36)               4121D   4122
                           BASED(NODEPTR)
           VALUE           *(16)                4122
         NODEPTR           *(16)                4121    4137M
         SOCKET_ADDRESS_INET...
                           DS(16)               4119D   4124M   4125M   4126M
                                                4127M   4128M   4130    4130
           ADDR            U(10,0)              4126
           FAMILY          U(3,0)               4125
           PORT            U(5,0)               4127
           ZERO            A(8)                 4128
         TIMEOUT           DS(8)                4122D   4139    4139
                           BASED(NODE.VALUE)
      Field References for subprocedure STOMP_CLOSE
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4153D   4156
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4156D   4158    4159    4160M
                           BASED(CONN)
           CONNECTED       N(1)                 4158    4160
           SOCKET          I(10,0)              4159
      Field References for subprocedure STOMP_FINALIZE
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4169D   4172    4176    4190M
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4172D   4174    4179    4181
                           BASED(CONN)          4182    4185    4186
           BUFFEREDFRAMES  *(16)                4186
           CONNECTED       N(1)                 4174
           EXTENSION       *(16)                4181    4182
           OPENRECEIPTS    *(16)                4185
           OPTIONS         *(16)                4179
      Field References for subprocedure STOMP_SETTIMEOUT
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4196D   4200
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4200D   4205
                           BASED(CONN)
           OPTIONS         *(16)                4205
         MSECONDS          I(10,0)              4197D   4203    4204    4206
                           BASED(_QRNL_PST+)
         TIMEOUT           DS(8)                4201D   4203M   4204M   4205
                                                4205
           SECONDS         I(10,0)              4203
           USECONDS        I(10,0)              4204
      Field References for subprocedure STOMP_SETVIRTUALHOST
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4212D   4216
                           BASED(_QRNL_PST+)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    113
         HEADER            DS(574)              4216D   4220
                           BASED(CONN)
           OPTIONS         *(16)                4220
         PVIRTUALHOST      A(100)               4213D   4219    4222
                           BASED(_QRNL_PST+)
                           VARYING(2)
         VIRTUALHOST       A(100)               4217D   4219M   4221    4221
                           VARYING(2)
      Field References for subprocedure STOMP_SETCLIENTID
         Field             Attributes         References (D=Defined M=Modified)
         CLIENTID          A(100)               4233D   4235M   4237    4237
                           VARYING(2)
         CONN              *(16)                4228D   4232
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4232D   4236
                           BASED(CONN)
           OPTIONS         *(16)                4236
         PCLIENTID         A(100)               4229D   4235    4238
                           BASED(_QRNL_PST+)
                           VARYING(2)
      Field References for subprocedure STOMP_SETCONTENTTYPE
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4244D   4248
                           BASED(_QRNL_PST+)
         CONTENTTYPE       A(100)               4249D   4251M   4253    4253
                           VARYING(2)           4254
         HEADER            DS(574)              4248D   4252
                           BASED(CONN)
           OPTIONS         *(16)                4252
         PCONTENTTYPE      A(100)               4245D   4251
                           BASED(_QRNL_PST+)
                           VARYING(2)
      Field References for subprocedure STOMP_SETACKMODE
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4260D   4264
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4264D   4268
                           BASED(CONN)
           OPTIONS         *(16)                4268
         MODE              A(100)               4265D   4267M   4268    4268
                           VARYING(2)
         PMODE             A(100)               4261D   4267    4269
                           BASED(_QRNL_PST+)
                           VARYING(2)
      Field References for subprocedure STOMP_SETDURABLESUBSCRIBERNAME
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4275D   4279
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4279D   4283
                           BASED(CONN)
           OPTIONS         *(16)                4283
         NAME              A(100)               4280D   4282M   4284    4284
                           VARYING(2)
         PNAME             A(100)               4276D   4282    4285
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    114
                           BASED(_QRNL_PST+)
                           VARYING(2)
      Field References for subprocedure STOMP_GETSESSIONID
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4291D   4294
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4294D   4296
                           BASED(CONN)
           SESSIONID       A(100)               4296
      Field References for subprocedure STOMP_SETPERSISTMESSAGES
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4302D   4306
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4306D   4315
                           BASED(CONN)
           OPTIONS         *(16)                4315
         PERSISTENT        N(1)                 4303D   4309
                           BASED(_QRNL_PST+)
         VALUE             A(6)                 4307D   4310M   4312M   4315
                           VARYING(2)           4315    4316
      Field References for subprocedure STOMP_SENDFRAME
         Field             Attributes         References (D=Defined M=Modified)
         BUFFER            DS(20)               4326D   4340M   4342    4342
                                                4351
           DATA            *(16)                4342
           LENGTH          U(10,0)              4342
         CONN              *(16)                4321D   4325    4334    4335
                           BASED(_QRNL_PST+)    4337    4346    4347
         FRAME             *(16)                4322D   4330    4333    4336
                           BASED(_QRNL_PST+)    4340
         HEADER            DS(574)              4325D   4342
                           BASED(CONN)
           SOCKET          I(10,0)              4342
         RC                I(10,0)              4327D   4342M   4344
         RECEIPTID         A(50)                4328D   4335M   4336    4337
                           VARYING(2)
      Field References for subprocedure STOMP_RECEIVEFRAME
         Field             Attributes         References (D=Defined M=Modified)
         BUFFEREDFRAME     *(16)                4365D   4374    4375
                           BASED(TMPPTR)
         CONN              *(16)                4357D   4360    4397
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4360D   4371    4372    4373
                           BASED(CONN)          4382
           BUFFEREDFRAMES  *(16)                4371    4372    4373
           SOCKET          I(10,0)              4382
         LENGTH            I(10,0)              4361D   4378M   4379    4382
         PTR               *(16)                4362D   4379M   4382    4384
                                                4392    4410M
         RC                I(10,0)              4363D   4382M   4383    4383
                                                4384    4389    4390    4392
         RETURNFRAME       *(16)                4364D   4392M   4394    4396
                                                4397    4407
         RUNNING           N(1)                 4366D   4381    4400M   4403M
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    115
         TMPPTR            *(16)                4365    4372M
      Field References for subprocedure ISHEARTBEAT
         Field             Attributes         References (D=Defined M=Modified)
         CR                CONST                4421D   4429
         CRLF              CONST                4423D   4431
         DATA              *(16)                4416D   4425    4426
                           BASED(_QRNL_PST+)
         LENGTH            I(10,0)              4417D   4428    4430
                           BASED(_QRNL_PST+)
         LF                CONST                4422D   4429
         VALUE1            A(1)                 4425D   4429    4429
                           BASED(DATA)
                           CCSID(1208)
         VALUE2            A(2)                 4426D   4431
                           BASED(DATA)
                           CCSID(1208)
      Field References for subprocedure CHECKHEARTBEATNEGOTIATION
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                4440D   4450    4456
                           BASED(_QRNL_PST+)
         FRAME             *(16)                4441D   4448
                           BASED(_QRNL_PST+)
         HEARTBEAT         A(100)               4444D   4448M   4449    4455
                           VARYING(2)           4455
         SERVERHEARTBEAT   U(10,0)              4445D   4455M   4456    4458
         SUCCESS           N(1)                 4446D   4452M   4459M   4463
      Field References for subprocedure STOMP_SETEXTENSION
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4471D   4475
                           BASED(_QRNL_PST+)
         EXTENSION         *(16)                4472D   4482    4484
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4475D   4477    4478    4479
                           BASED(CONN)          4482M
           EXTENSION       *(16)                4477    4478    4479    4482
      Field References for subprocedure STOMP_GETEXTENSION
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4490D   4493
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4493D   4495
                           BASED(CONN)
           EXTENSION       *(16)                4495
      Field References for subprocedure STOMP_USERECEIPTS
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4501D   4505
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4505D   4507M
                           BASED(CONN)
           USERECEIPTS     N(1)                 4507
         VALUE             N(1)                 4502D   4507    4509
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_ISUSINGRECEIPTS
         Field             Attributes         References (D=Defined M=Modified)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    116
         CONN              *(16)                4515D   4518
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4518D   4520
                           BASED(CONN)
           USERECEIPTS     N(1)                 4520
      Field References for subprocedure STOMP_HASOPTION
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4526D   4530
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4530D   4533
                           BASED(CONN)
           OPTIONS         *(16)                4533
*RNF7031 NODE              DS(36)               4531D
                           BASED(NODEPTR)
         NODEPTR           *(16)                4531
         OPTION            I(10,0)              4527D   4533
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_GETOPTIONVALUE
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4539D   4543
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4543D   4546
                           BASED(CONN)
           OPTIONS         *(16)                4546
         NODE              DS(36)               4544D   4547
                           BASED(NODEPTR)
           VALUE           *(16)                4547
         NODEPTR           *(16)                4544    4546M
         OPTION            I(10,0)              4540D   4546
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_SETSESSIONID
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4553D   4557
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4557D   4559M
                           BASED(CONN)
           SESSIONID       A(100)               4559
         SESSION           A(100)               4554D   4559    4561
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_ADDOPENRECEIPT
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4567D   4572
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4572D   4575
                           BASED(CONN)
           OPENRECEIPTS    *(16)                4575
         PRECEIPT          A(50)                4568D   4574
                           BASED(_QRNL_PST+)
                           VARYING(2)
         RECEIPT           A(50)                4571D   4574M   4575    4575
                           VARYING(2)           4577
      Field References for subprocedure STOMP_GETNUMBEROFOPENRECEIPTS
         Field             Attributes         References (D=Defined M=Modified)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    117
         CONN              *(16)                4583D   4586
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4586D   4588
                           BASED(CONN)
           OPENRECEIPTS    *(16)                4588
      Field References for subprocedure WAITFORRECEIPTS
         Field             Attributes         References (D=Defined M=Modified)
         CONN              *(16)                4606D   4609
                           BASED(_QRNL_PST+)
         FRAME             *(16)                4613D   4629M   4631    4633
                                                4634    4652    4652    4653
         HEADER            DS(574)              4609D   4622    4623    4638
                           BASED(CONN)          4641    4652
           BUFFEREDFRAMES  *(16)                4652
           OPENRECEIPTS    *(16)                4622    4638    4641
           SOCKET          I(10,0)              4623
         LENGTH            I(10,0)              4612D   4619M   4620    4623
         PTR               *(16)                4611D   4620M   4623    4629
                                                4660M
         RC                I(10,0)              4610D   4623M   4625    4629
         RECEIPTID         A(50)                4614D   4634M   4636    4638
                           VARYING(2)           4639    4642    4646
         X                 I(10,0)              4615D   4638M   4640    4641
                                                4644
      Field References for subprocedure STOMP_SETTRANSACTIONID
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                4666D   4670
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4670D   4672M
                           BASED(CLIENT)
           TRANSACTIONID   A(100)               4672
                           VARYING(2)
         TRANSACTIONID     A(100)               4667D   4672
                           BASED(_QRNL_PST+)
                           VARYING(2)
      Field References for subprocedure STOMP_GETTRANSACTIONID
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                4678D   4681
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4681D   4683
                           BASED(CLIENT)
           TRANSACTIONID   A(100)               4683
                           VARYING(2)
      Field References for subprocedure STOMP_SETHEARTBEATSERVER
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                4689D   4693
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4693D   4695M
                           BASED(CLIENT)
           HEARTBEATSERVER U(10,0)              4695
         HEARTBEATVALUE    U(10,0)              4690D   4695
                           BASED(_QRNL_PST+)
      Field References for subprocedure STOMP_GETHEARTBEATSERVER
         Field             Attributes         References (D=Defined M=Modified)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    118
         CLIENT            *(16)                4701D   4704
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4704D   4706
                           BASED(CLIENT)
           HEARTBEATSERVER U(10,0)              4706
      Field References for subprocedure NEXTRECEIPTID
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                4712D   4715
                           BASED(_QRNL_PST+)
         HEADER            DS(574)              4715D   4717    4718M   4721M
                           BASED(CLIENT)        4723
           RECEIPTID       U(20,0)              4717    4718    4721    4723
      Indicator References:
         Indicator                            References (D=Defined M=Modified)
       * * * * *   E N D   O F   C R O S S   R E F E R E N C E   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    119
                      E x t e r n a l   R e f e r e n c e s
      Statically bound procedures:
         Procedure                            References
         ceil                                    547
         rand                                    568
         floor                                   550
         srand                                   565
         qsort                                   570
         fcntl                                   638
         close                                  2638    4159
         perror                                  347
         strtok                                  457
         strlen                                  461
         strcmp                                  464
         strstr                                  486
         memcpy                                  519
         memset                                  524
         memcmp                                  534
         tmpnam                                  556
         system                                  562
         select                                 2641
         __errno                                 345     586    4103    4131
                                                4140
         strncmp                                 468
         strcmpi                                 473
         strcspn                                 490
         memmove                                 529
         bsearch                                 576
         strerror                                588     591    4104    4132
                                                4141
         list_add                               1093    4575    4652
         list_get                               1289
         CEE4RAGE2                               357    4061
         __memicmp                               539
         list_size                              1515    4588
         list_swap                              1584
         list_copy                              1701
         list_sort                              2168
         inet_addr                              2564    4126
         inet_ntoa                              2567
         stomp_log                                 0    4107    4147    4163
                                                4188    4206    4222    4238
                                                4254    4269    4285    4316
                                                4330    4344    4368    4374
                                                4385    4387    4390    4394
                                                4402    4451    4458    4464
                                                4478    4484    4509    4561
                                                4577    4617    4626    4631
                                                4636    4644    4647    4654
         strcasecmp                              477
         list_clear                             1229
         list_split                             1672
         list_merge                             2203
         qso_send98                             2610    4342
         qso_recv98                             2619    4382    4623
         strncasecmp                             481
         rbtree_init                             702
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    120
         rbtree_last                             710
         rbtree_next                             713
         rbtree_prev                             717
         list_create                            1048    4098    4099
         list_addAll                            1153
         list_remove                            1177    4641
         list_rotate                            1568
         rbtree_first                            707
         tree_rb_size                            755
         list_dispose                           1065    4185    4186
         list_addLast                           1132
         list_isEmpty                           1246    4371    4622
         list_replace                           1267
         list_getLast                           1324
         list_getNext                           1345
         list_iterate                           1363
         list_getPrev                           1381
         list_indexOf                           1453    4639
         list_sublist                           1533
         list_foreach                           1614
         list_reverse                           1685
         list_addLong                           1804
         list_addDate                           1972
         list_getLong                           2045
         list_getDate                           2135
         message_info                              0
         qso_socket98                           2594    4101
         _C_IFS_tmpnam                           559
         rbtree_lookup                           720
         rbtree_insert                           724
         rbtree_remove                           728
         list_addFirst                          1113
         list_getFirst                          1307    4372
         list_contains                          1432
         list_toString                          1646
         list_addShort                          1832
         list_addFloat                          1860
         list_getShort                          2027
         list_getFloat                          2063
         gethostbyname                          2570
         qso_connect98                          2602    4130
         stomp_ext_ack                             0
         QlgConvertCase                          508
         rbtree_replace                          732
         tree_rb_create                          745    4097
         list_frequency                         1720
         list_addString                         1748
         list_addDouble                         1888
         list_getString                         1991
         list_getDouble                         2081
         message_status                            0
         message_escape                            0    4104    4132    4141
         stomp_ext_send                         3864
         stomp_ext_nack                            0
         tree_rb_isEmpty                         751
         tree_rb_int_put                         768    4205    4221    4237
                                                4253    4268    4284    4315
         tree_rb_int_get                         775    4137    4546
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    121
         list_removeLast                        1212
         list_addInteger                        1776
         list_addBoolean                        1916
         list_addDecimal                        1944
         list_getInteger                        2009
         list_getBoolean                        2099
         list_getDecimal                        2117
         stomp_ext_getId                        3852    4478    4484
         stomp_ext_begin                           0
         stomp_ext_abort                           0
         tree_rb_int_last                        784
         tree_rb_int_next                        788
         list_removeFirst                       1195    4373
         list_lastIndexOf                       1474
         list_toCharArray                       1496
         list_removeRange                       2184
         qso_setsockopt98                       2628    4139
         stomp_frame_dump                          0
         stomp_ext_commit                          0
         stomp_log_create                          0    4059
         tree_rb_int_first                       780
         tree_rb_int_clear                       820
         message_file_info                         0
         stomp_command_ack                         0
         stomp_ext_connect                      3856
         stomp_log_dispose                         0    4075
         tree_rb_int_remove                      801
         tree_rb_string_put                      848
         tree_rb_string_get                      855
         message_completion                        0
         message_diagnostic                        0
         stomp_command_send                        0
         stomp_command_nack                        0
         stomp_util_convert                        0
         stomp_frame_create                        0
         stomp_ext_finalize                     3927    4182    4479
         stomp_parser_parse                        0    4392    4629
         tree_rb_int_compare                     815    4097
         tree_rb_string_last                     864
         tree_rb_string_next                     868
         list_abortIteration                    1398
         list_resetIteration                    1413
         message_file_escape                       0
         stomp_command_begin                       0
         stomp_command_abort                       0
         stomp_frame_setBody                       0
         stomp_frame_getBody                       0
         stomp_ext_subscribe                    3880
         tree_rb_int_previous                    792
         tree_rb_int_finalize                    824    4179
         tree_rb_string_first                    860
         tree_rb_string_clear                    908
         stomp_command_commit                      0
         stomp_frame_finalize                      0
         stomp_frame_toString                      0
         stomp_ext_disconnect                   3874
         tree_rb_string_remove                   881
         stomp_command_connect                     0
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    122
         stomp_frame_setHeader                     0    4336
         stomp_frame_getHeader                     0    4448    4634
         stomp_frame_serialize                     0    4340
         stomp_ext_unsubscribe                  3887
         tree_rb_string_compare                  897
         message_receiveMessage                    0
         stomp_frame_setCommand                    0
         stomp_frame_getCommand                    0    4330    4333    4374
                                                4394    4396    4631    4633
                                                4653
         tree_rb_int_containsKey                 796    4136    4533
         tree_rb_string_previous                 872
         tree_rb_string_finalize                 912
         list_sort_insertionSort                2262
         message_sendInfoMessage                   0
         stomp_command_subscribe                   0
         stomp_frame_listHeaders                   0
         tree_rb_int_removeByNode                806
         tree_rb_int_container_of                811
         stomp_command_disconnect                  0
         stomp_frame_removeHeader                  0
         message_sendEscapeMessage                 0
         message_sendStatusMessage                 0
         stomp_command_unsubscribe                 0
         stomp_util_buffer_dispose                 0    4351
         tree_rb_string_containsKey              876
         message_receiveMessageInfo                0
         message_receiveMessageData                0
         message_receiveMessageText                0
         stomp_frame_containsHeader                0
         tree_rb_string_removeByNode             886
         tree_rb_string_container_of             892
         stomp_util_hasBinaryContent               0
         message_sendCompletionMessage             0
         stomp_util_getExplicitCharset             0
         message_sendEscapeMessageToCaller         0
         tree_rb_string_compare_ignore_case      902
         message_sendEscapeMessageAboveControlBody
                                                   0
      Imported fields:
         Field             Attributes         Defined
         No references in the source.
      Exported fields:
         Field             Attributes         Defined
         No references in the source.
   * * * * *   E N D   O F   E X T E R N A L   R E F E R E N C E S   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    123
                          M e s s a g e   S u m m a r y
 Msg id  Sv Number Message text
*RNF5409 00      5 The prototyped call returns a value which is lost when CALLP
                   is used.
*RNF7031 00    824 The name or indicator is not referenced.
       * * * * *   E N D   O F   M E S S A G E   S U M M A R Y   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             STOMP/STOMP              OPENSRC    05/23/21 10:14:30        Page    124
                            F i n a l   S u m m a r y
  Message Totals:
    Information  (00) . . . . . . . :      829
    Warning      (10) . . . . . . . :        0
    Error        (20) . . . . . . . :        0
    Severe Error (30+)  . . . . . . :        0
    ---------------------------------  -------
    Total . . . . . . . . . . . . . :      829
  Source Totals:
    Records . . . . . . . . . . . . :     4724
    Specifications  . . . . . . . . :     1603
    Data records  . . . . . . . . . :        0
    Comments  . . . . . . . . . . . :     2850
         * * * * *   E N D   O F   F I N A L   S U M M A R Y   * * * * *
Module STOMP placed in library STOMP. 00 highest severity. Created on 05/23/21 at 10:14:32.
          * * * * *   E N D   O F   C O M P I L A T I O N   * * * * *
